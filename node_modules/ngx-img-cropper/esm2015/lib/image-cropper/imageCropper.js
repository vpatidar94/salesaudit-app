import { Bounds } from './model/bounds';
import { CornerMarker } from './model/cornerMarker';
import { CropTouch } from './model/cropTouch';
import { DragMarker } from './model/dragMarker';
import { ImageCropperModel } from './model/imageCropperModel';
import { ImageCropperDataShare } from './imageCropperDataShare';
import { PointPool } from './model/pointPool';
export class ImageCropper extends ImageCropperModel {
    constructor(cropperSettings) {
        super();
        this.imageCropperDataShare = new ImageCropperDataShare();
        const x = 0;
        const y = 0;
        const width = cropperSettings.width;
        const height = cropperSettings.height;
        const keepAspect = cropperSettings.keepAspect;
        const touchRadius = cropperSettings.touchRadius;
        const centerTouchRadius = cropperSettings.centerTouchRadius;
        const minWidth = cropperSettings.minWidth;
        const minHeight = cropperSettings.minHeight;
        const croppedWidth = cropperSettings.croppedWidth;
        const croppedHeight = cropperSettings.croppedHeight;
        this.cropperSettings = cropperSettings;
        this.crop = this;
        this.x = x;
        this.y = y;
        this.canvasHeight = cropperSettings.canvasHeight;
        this.canvasWidth = cropperSettings.canvasWidth;
        this.width = width;
        if (width === void 0) {
            this.width = 100;
        }
        this.height = height;
        if (height === void 0) {
            this.height = 50;
        }
        this.keepAspect = keepAspect;
        if (keepAspect === void 0) {
            this.keepAspect = true;
        }
        this.touchRadius = touchRadius;
        if (touchRadius === void 0) {
            this.touchRadius = 20;
        }
        this.minWidth = minWidth;
        this.minHeight = minHeight;
        this.aspectRatio = 0;
        this.currentDragTouches = [];
        this.isMouseDown = false;
        this.ratioW = 1;
        this.ratioH = 1;
        this.fileType = cropperSettings.fileType;
        this.imageSet = false;
        this.pointPool = new PointPool(200);
        this.tl = new CornerMarker(x, y, touchRadius, this.cropperSettings);
        this.tr = new CornerMarker(x + width, y, touchRadius, this.cropperSettings);
        this.bl = new CornerMarker(x, y + height, touchRadius, this.cropperSettings);
        this.br = new CornerMarker(x + width, y + height, touchRadius, this.cropperSettings);
        this.tl.addHorizontalNeighbour(this.tr);
        this.tl.addVerticalNeighbour(this.bl);
        this.tr.addHorizontalNeighbour(this.tl);
        this.tr.addVerticalNeighbour(this.br);
        this.bl.addHorizontalNeighbour(this.br);
        this.bl.addVerticalNeighbour(this.tl);
        this.br.addHorizontalNeighbour(this.bl);
        this.br.addVerticalNeighbour(this.tr);
        this.markers = [this.tl, this.tr, this.bl, this.br];
        this.center = new DragMarker(x + width / 2, y + height / 2, centerTouchRadius, this.cropperSettings);
        this.aspectRatio = height / width;
        this.croppedImage = new Image();
        this.currentlyInteracting = false;
        this.cropWidth = croppedWidth;
        this.cropHeight = croppedHeight;
    }
    sign(x) {
        if (+x === x) {
            return x === 0 ? x : x > 0 ? 1 : -1;
        }
        return NaN;
    }
    getMousePos(canvas, evt) {
        const rect = canvas.getBoundingClientRect();
        return new PointPool().instance.borrow(evt.clientX - rect.left, evt.clientY - rect.top);
    }
    getTouchPos(canvas, touch) {
        const rect = canvas.getBoundingClientRect();
        return new PointPool().instance.borrow(touch.clientX - rect.left, touch.clientY - rect.top);
    }
    detectVerticalSquash(img) {
        const ih = img.height;
        const canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = ih;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0);
        const imageData = ctx.getImageData(0, 0, 1, ih);
        if (imageData) {
            const data = imageData.data;
            // search image edge pixel position in case it is squashed vertically.
            let sy = 0;
            let ey = ih;
            let py = ih;
            while (py > sy) {
                const alpha = data[(py - 1) * 4 + 3];
                if (alpha === 0) {
                    ey = py;
                }
                else {
                    sy = py;
                }
                // tslint:disable-next-line:no-bitwise
                py = (ey + sy) >> 1;
            }
            const ratio = py / ih;
            return ratio === 0 ? 1 : ratio;
        }
        else {
            return 1;
        }
    }
    getDataUriMimeType(dataUri) {
        // Get a substring because the regex does not perform well on very large strings.
        // Cater for optional charset. Length 50 shoould be enough.
        const dataUriSubstring = dataUri.substring(0, 50);
        let mimeType = 'image/png';
        // data-uri scheme
        // data:[<media type>][;charset=<character set>][;base64],<data>
        const regEx = RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi);
        const matches = regEx.exec(dataUriSubstring);
        if (matches && matches[2]) {
            mimeType = matches[2];
            if (mimeType === 'image/jpg') {
                mimeType = 'image/jpeg';
            }
        }
        return mimeType;
    }
    prepare(canvas) {
        this.buffer = document.createElement('canvas');
        this.cropCanvas = document.createElement('canvas');
        // todo get more reliable parent width value.
        const responsiveWidth = canvas.parentElement
            ? canvas.parentElement.clientWidth
            : 0;
        if (responsiveWidth > 0 && this.cropperSettings.dynamicSizing) {
            this.cropCanvas.width = responsiveWidth;
            this.buffer.width = responsiveWidth;
            canvas.width = responsiveWidth;
        }
        else {
            this.cropCanvas.width = this.cropWidth;
            this.buffer.width = canvas.width;
        }
        this.cropCanvas.height = this.cropHeight;
        this.buffer.height = canvas.height;
        this.canvas = canvas;
        this.ctx = this.canvas.getContext('2d');
        this.draw(this.ctx);
    }
    updateSettings(cropperSettings) {
        this.cropperSettings = cropperSettings;
    }
    resizeCanvas(width, height, setImage = false) {
        this.canvas.width = this.cropCanvas.width = this.width = this.canvasWidth = this.buffer.width = width;
        this.canvas.height = this.cropCanvas.height = this.height = this.canvasHeight = this.buffer.height = height;
        if (setImage) {
            this.setImage(this.srcImage);
        }
    }
    reset() {
        this.setImage(undefined);
    }
    draw(ctx) {
        const bounds = this.getBounds();
        if (this.srcImage) {
            ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);
            const sourceAspect = this.srcImage.height / this.srcImage.width;
            const canvasAspect = this.canvasHeight / this.canvasWidth;
            let w = this.canvasWidth;
            let h = this.canvasHeight;
            if (canvasAspect > sourceAspect) {
                w = this.canvasWidth;
                h = this.canvasWidth * sourceAspect;
            }
            else {
                h = this.canvasHeight;
                w = this.canvasHeight / sourceAspect;
            }
            this.ratioW = w / this.srcImage.width;
            this.ratioH = h / this.srcImage.height;
            if (canvasAspect < sourceAspect) {
                this.drawImageIOSFix(ctx, this.srcImage, 0, 0, this.srcImage.width, this.srcImage.height, this.buffer.width / 2 - w / 2, 0, w, h);
            }
            else {
                this.drawImageIOSFix(ctx, this.srcImage, 0, 0, this.srcImage.width, this.srcImage.height, 0, this.buffer.height / 2 - h / 2, w, h);
            }
            this.buffer.getContext('2d').drawImage(this.canvas, 0, 0, this.canvasWidth, this.canvasHeight);
            ctx.lineWidth = this.cropperSettings.cropperDrawSettings.strokeWidth;
            ctx.strokeStyle = this.cropperSettings.cropperDrawSettings.strokeColor;
            ctx.fillStyle = this.cropperSettings.cropperDrawSettings.backgroundFillColor;
            if (!this.cropperSettings.rounded) {
                ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);
                ctx.drawImage(this.buffer, bounds.left, bounds.top, Math.max(bounds.width, 1), Math.max(bounds.height, 1), bounds.left, bounds.top, bounds.width, bounds.height);
                ctx.strokeRect(bounds.left, bounds.top, bounds.width, bounds.height);
            }
            else {
                ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                ctx.save();
                ctx.beginPath();
                ctx.arc(bounds.left + bounds.width / 2, bounds.top + bounds.height / 2, bounds.width / 2, 0, 2 * Math.PI);
                ctx.stroke();
                ctx.clip();
                if (canvasAspect < sourceAspect) {
                    this.drawImageIOSFix(ctx, this.srcImage, 0, 0, this.srcImage.width, this.srcImage.height, this.buffer.width / 2 - w / 2, 0, w, h);
                }
                else {
                    this.drawImageIOSFix(ctx, this.srcImage, 0, 0, this.srcImage.width, this.srcImage.height, 0, this.buffer.height / 2 - h / 2, w, h);
                }
                ctx.restore();
            }
            let marker;
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < this.markers.length; i++) {
                marker = this.markers[i];
                marker.draw(ctx);
            }
            this.center.draw(ctx);
        }
        else {
            ctx.fillStyle = 'rgba(192,192,192,1)';
            ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
        }
    }
    dragCenter(x, y, marker) {
        const bounds = this.getBounds();
        const left = x - bounds.width / 2;
        const right = x + bounds.width / 2;
        const top = y - bounds.height / 2;
        const bottom = y + bounds.height / 2;
        if (right >= this.maxXClamp) {
            x = this.maxXClamp - bounds.width / 2;
        }
        if (left <= this.minXClamp) {
            x = bounds.width / 2 + this.minXClamp;
        }
        if (top < this.minYClamp) {
            y = bounds.height / 2 + this.minYClamp;
        }
        if (bottom >= this.maxYClamp) {
            y = this.maxYClamp - bounds.height / 2;
        }
        this.tl.moveX(x - bounds.width / 2);
        this.tl.moveY(y - bounds.height / 2);
        this.tr.moveX(x + bounds.width / 2);
        this.tr.moveY(y - bounds.height / 2);
        this.bl.moveX(x - bounds.width / 2);
        this.bl.moveY(y + bounds.height / 2);
        this.br.moveX(x + bounds.width / 2);
        this.br.moveY(y + bounds.height / 2);
        marker.setPosition(x, y);
    }
    enforceMinSize(x, y, marker) {
        const xLength = x - marker.getHorizontalNeighbour().position.x;
        const yLength = y - marker.getVerticalNeighbour().position.y;
        const xOver = this.minWidth - Math.abs(xLength);
        const yOver = this.minHeight - Math.abs(yLength);
        if (xLength === 0 || yLength === 0) {
            x = marker.position.x;
            y = marker.position.y;
            return new PointPool().instance.borrow(x, y);
        }
        if (this.keepAspect) {
            if (xOver > 0 && yOver / this.aspectRatio > 0) {
                if (xOver > yOver / this.aspectRatio) {
                    if (xLength < 0) {
                        x -= xOver;
                        if (yLength < 0) {
                            y -= xOver * this.aspectRatio;
                        }
                        else {
                            y += xOver * this.aspectRatio;
                        }
                    }
                    else {
                        x += xOver;
                        if (yLength < 0) {
                            y -= xOver * this.aspectRatio;
                        }
                        else {
                            y += xOver * this.aspectRatio;
                        }
                    }
                }
                else {
                    if (yLength < 0) {
                        y -= yOver;
                        if (xLength < 0) {
                            x -= yOver / this.aspectRatio;
                        }
                        else {
                            x += yOver / this.aspectRatio;
                        }
                    }
                    else {
                        y += yOver;
                        if (xLength < 0) {
                            x -= yOver / this.aspectRatio;
                        }
                        else {
                            x += yOver / this.aspectRatio;
                        }
                    }
                }
            }
            else {
                if (xOver > 0) {
                    if (xLength < 0) {
                        x -= xOver;
                        if (yLength < 0) {
                            y -= xOver * this.aspectRatio;
                        }
                        else {
                            y += xOver * this.aspectRatio;
                        }
                    }
                    else {
                        x += xOver;
                        if (yLength < 0) {
                            y -= xOver * this.aspectRatio;
                        }
                        else {
                            y += xOver * this.aspectRatio;
                        }
                    }
                }
                else {
                    if (yOver > 0) {
                        if (yLength < 0) {
                            y -= yOver;
                            if (xLength < 0) {
                                x -= yOver / this.aspectRatio;
                            }
                            else {
                                x += yOver / this.aspectRatio;
                            }
                        }
                        else {
                            y += yOver;
                            if (xLength < 0) {
                                x -= yOver / this.aspectRatio;
                            }
                            else {
                                x += yOver / this.aspectRatio;
                            }
                        }
                    }
                }
            }
        }
        else {
            if (xOver > 0) {
                if (xLength < 0) {
                    x -= xOver;
                }
                else {
                    x += xOver;
                }
            }
            if (yOver > 0) {
                if (yLength < 0) {
                    y -= yOver;
                }
                else {
                    y += yOver;
                }
            }
        }
        if (x < this.minXClamp ||
            x > this.maxXClamp ||
            y < this.minYClamp ||
            y > this.maxYClamp) {
            x = marker.position.x;
            y = marker.position.y;
        }
        return new PointPool().instance.borrow(x, y);
    }
    dragCorner(x, y, marker) {
        let iX = 0;
        let iY = 0;
        let ax = 0;
        let ay = 0;
        let newHeight = 0;
        let newWidth = 0;
        let newY = 0;
        let newX = 0;
        let anchorMarker;
        let fold = 0;
        if (this.keepAspect) {
            anchorMarker = marker.getHorizontalNeighbour().getVerticalNeighbour();
            ax = anchorMarker.position.x;
            ay = anchorMarker.position.y;
            if (x <= anchorMarker.position.x) {
                if (y <= anchorMarker.position.y) {
                    iX = ax - 100 / this.aspectRatio;
                    iY = ay - (100 / this.aspectRatio) * this.aspectRatio;
                    fold = this.getSide(new PointPool().instance.borrow(iX, iY), anchorMarker.position, new PointPool().instance.borrow(x, y));
                    if (fold > 0) {
                        newHeight = Math.abs(anchorMarker.position.y - y);
                        newWidth = newHeight / this.aspectRatio;
                        newY = anchorMarker.position.y - newHeight;
                        newX = anchorMarker.position.x - newWidth;
                        const min = this.enforceMinSize(newX, newY, marker);
                        marker.move(min.x, min.y);
                        new PointPool().instance.returnPoint(min);
                    }
                    else {
                        if (fold < 0) {
                            newWidth = Math.abs(anchorMarker.position.x - x);
                            newHeight = newWidth * this.aspectRatio;
                            newY = anchorMarker.position.y - newHeight;
                            newX = anchorMarker.position.x - newWidth;
                            const min = this.enforceMinSize(newX, newY, marker);
                            marker.move(min.x, min.y);
                            new PointPool().instance.returnPoint(min);
                        }
                    }
                }
                else {
                    iX = ax - 100 / this.aspectRatio;
                    iY = ay + (100 / this.aspectRatio) * this.aspectRatio;
                    fold = this.getSide(new PointPool().instance.borrow(iX, iY), anchorMarker.position, new PointPool().instance.borrow(x, y));
                    if (fold > 0) {
                        newWidth = Math.abs(anchorMarker.position.x - x);
                        newHeight = newWidth * this.aspectRatio;
                        newY = anchorMarker.position.y + newHeight;
                        newX = anchorMarker.position.x - newWidth;
                        const min = this.enforceMinSize(newX, newY, marker);
                        marker.move(min.x, min.y);
                        new PointPool().instance.returnPoint(min);
                    }
                    else {
                        if (fold < 0) {
                            newHeight = Math.abs(anchorMarker.position.y - y);
                            newWidth = newHeight / this.aspectRatio;
                            newY = anchorMarker.position.y + newHeight;
                            newX = anchorMarker.position.x - newWidth;
                            const min = this.enforceMinSize(newX, newY, marker);
                            marker.move(min.x, min.y);
                            new PointPool().instance.returnPoint(min);
                        }
                    }
                }
            }
            else {
                if (y <= anchorMarker.position.y) {
                    iX = ax + 100 / this.aspectRatio;
                    iY = ay - (100 / this.aspectRatio) * this.aspectRatio;
                    fold = this.getSide(new PointPool().instance.borrow(iX, iY), anchorMarker.position, new PointPool().instance.borrow(x, y));
                    if (fold < 0) {
                        newHeight = Math.abs(anchorMarker.position.y - y);
                        newWidth = newHeight / this.aspectRatio;
                        newY = anchorMarker.position.y - newHeight;
                        newX = anchorMarker.position.x + newWidth;
                        const min = this.enforceMinSize(newX, newY, marker);
                        marker.move(min.x, min.y);
                        new PointPool().instance.returnPoint(min);
                    }
                    else {
                        if (fold > 0) {
                            newWidth = Math.abs(anchorMarker.position.x - x);
                            newHeight = newWidth * this.aspectRatio;
                            newY = anchorMarker.position.y - newHeight;
                            newX = anchorMarker.position.x + newWidth;
                            const min = this.enforceMinSize(newX, newY, marker);
                            marker.move(min.x, min.y);
                            new PointPool().instance.returnPoint(min);
                        }
                    }
                }
                else {
                    iX = ax + 100 / this.aspectRatio;
                    iY = ay + (100 / this.aspectRatio) * this.aspectRatio;
                    fold = this.getSide(new PointPool().instance.borrow(iX, iY), anchorMarker.position, new PointPool().instance.borrow(x, y));
                    if (fold < 0) {
                        newWidth = Math.abs(anchorMarker.position.x - x);
                        newHeight = newWidth * this.aspectRatio;
                        newY = anchorMarker.position.y + newHeight;
                        newX = anchorMarker.position.x + newWidth;
                        const min = this.enforceMinSize(newX, newY, marker);
                        marker.move(min.x, min.y);
                        new PointPool().instance.returnPoint(min);
                    }
                    else {
                        if (fold > 0) {
                            newHeight = Math.abs(anchorMarker.position.y - y);
                            newWidth = newHeight / this.aspectRatio;
                            newY = anchorMarker.position.y + newHeight;
                            newX = anchorMarker.position.x + newWidth;
                            const min = this.enforceMinSize(newX, newY, marker);
                            marker.move(min.x, min.y);
                            new PointPool().instance.returnPoint(min);
                        }
                    }
                }
            }
        }
        else {
            const min = this.enforceMinSize(x, y, marker);
            marker.move(min.x, min.y);
            new PointPool().instance.returnPoint(min);
        }
        this.center.recalculatePosition(this.getBounds());
    }
    getSide(a, b, c) {
        const n = this.sign((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x));
        // TODO move the return of the pools to outside of this function
        new PointPool().instance.returnPoint(a);
        new PointPool().instance.returnPoint(c);
        return n;
    }
    handleRelease(newCropTouch) {
        if (newCropTouch == null) {
            return;
        }
        let index = 0;
        for (let k = 0; k < this.currentDragTouches.length; k++) {
            if (newCropTouch.id === this.currentDragTouches[k].id) {
                this.currentDragTouches[k].dragHandle.setDrag(false);
                index = k;
            }
        }
        this.currentDragTouches.splice(index, 1);
        this.draw(this.ctx);
    }
    handleMove(newCropTouch) {
        let matched = false;
        // tslint:disable-next-line:prefer-for-of
        for (let k = 0; k < this.currentDragTouches.length; k++) {
            if (newCropTouch.id === this.currentDragTouches[k].id &&
                this.currentDragTouches[k].dragHandle != null) {
                const dragTouch = this.currentDragTouches[k];
                const clampedPositions = this.clampPosition(newCropTouch.x - dragTouch.dragHandle.offset.x, newCropTouch.y - dragTouch.dragHandle.offset.y);
                newCropTouch.x = clampedPositions.x;
                newCropTouch.y = clampedPositions.y;
                new PointPool().instance.returnPoint(clampedPositions);
                if (dragTouch.dragHandle instanceof CornerMarker) {
                    this.dragCorner(newCropTouch.x, newCropTouch.y, dragTouch.dragHandle);
                }
                else {
                    this.dragCenter(newCropTouch.x, newCropTouch.y, dragTouch.dragHandle);
                }
                this.currentlyInteracting = true;
                matched = true;
                this.imageCropperDataShare.setPressed(this.canvas);
                break;
            }
        }
        if (!matched) {
            for (const marker of this.markers) {
                if (marker.touchInBounds(newCropTouch.x, newCropTouch.y)) {
                    newCropTouch.dragHandle = marker;
                    this.currentDragTouches.push(newCropTouch);
                    marker.setDrag(true);
                    newCropTouch.dragHandle.offset.x =
                        newCropTouch.x - newCropTouch.dragHandle.position.x;
                    newCropTouch.dragHandle.offset.y =
                        newCropTouch.y - newCropTouch.dragHandle.position.y;
                    this.dragCorner(newCropTouch.x - newCropTouch.dragHandle.offset.x, newCropTouch.y - newCropTouch.dragHandle.offset.y, newCropTouch.dragHandle);
                    break;
                }
            }
            if (newCropTouch.dragHandle === null ||
                typeof newCropTouch.dragHandle === 'undefined') {
                if (this.center.touchInBounds(newCropTouch.x, newCropTouch.y)) {
                    newCropTouch.dragHandle = this.center;
                    this.currentDragTouches.push(newCropTouch);
                    newCropTouch.dragHandle.setDrag(true);
                    newCropTouch.dragHandle.offset.x =
                        newCropTouch.x - newCropTouch.dragHandle.position.x;
                    newCropTouch.dragHandle.offset.y =
                        newCropTouch.y - newCropTouch.dragHandle.position.y;
                    this.dragCenter(newCropTouch.x - newCropTouch.dragHandle.offset.x, newCropTouch.y - newCropTouch.dragHandle.offset.y, newCropTouch.dragHandle);
                }
            }
        }
    }
    updateClampBounds() {
        const sourceAspect = this.srcImage.height / this.srcImage.width;
        const canvasAspect = this.canvas.height / this.canvas.width;
        let w = this.canvas.width;
        let h = this.canvas.height;
        if (canvasAspect > sourceAspect) {
            w = this.canvas.width;
            h = this.canvas.width * sourceAspect;
        }
        else {
            h = this.canvas.height;
            w = this.canvas.height / sourceAspect;
        }
        this.minXClamp = this.canvas.width / 2 - w / 2;
        this.minYClamp = this.canvas.height / 2 - h / 2;
        this.maxXClamp = this.canvas.width / 2 + w / 2;
        this.maxYClamp = this.canvas.height / 2 + h / 2;
    }
    getCropBounds() {
        const bounds = this.getBounds();
        bounds.top = Math.round((bounds.top - this.minYClamp) / this.ratioH);
        bounds.bottom = Math.round((bounds.bottom - this.minYClamp) / this.ratioH);
        bounds.left = Math.round((bounds.left - this.minXClamp) / this.ratioW);
        bounds.right = Math.round((bounds.right - this.minXClamp) / this.ratioW);
        return bounds;
    }
    clampPosition(x, y) {
        if (x < this.minXClamp) {
            x = this.minXClamp;
        }
        if (x > this.maxXClamp) {
            x = this.maxXClamp;
        }
        if (y < this.minYClamp) {
            y = this.minYClamp;
        }
        if (y > this.maxYClamp) {
            y = this.maxYClamp;
        }
        return new PointPool().instance.borrow(x, y);
    }
    isImageSet() {
        return this.imageSet;
    }
    setImage(img) {
        this.srcImage = img;
        if (!img) {
            this.imageSet = false;
            this.draw(this.ctx);
        }
        else {
            this.imageSet = true;
            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
            const bufferContext = this.buffer.getContext('2d');
            bufferContext.clearRect(0, 0, this.buffer.width, this.buffer.height);
            if (!this.cropperSettings.fileType) {
                this.fileType = this.getDataUriMimeType(img.src);
            }
            if (this.cropperSettings.minWithRelativeToResolution) {
                this.minWidth =
                    (this.canvas.width * this.cropperSettings.minWidth) /
                        this.srcImage.width;
                this.minHeight =
                    (this.canvas.height * this.cropperSettings.minHeight) /
                        this.srcImage.height;
            }
            this.updateClampBounds();
            this.canvasWidth = this.canvas.width;
            this.canvasHeight = this.canvas.height;
            const cropPosition = this.getCropPositionFromMarkers();
            this.setCropPosition(cropPosition);
        }
    }
    updateCropPosition(cropBounds) {
        const cropPosition = this.getCropPositionFromBounds(cropBounds);
        this.setCropPosition(cropPosition);
    }
    setCropPosition(cropPosition) {
        this.tl.setPosition(cropPosition[0].x, cropPosition[0].y);
        this.tr.setPosition(cropPosition[1].x, cropPosition[1].y);
        this.bl.setPosition(cropPosition[2].x, cropPosition[2].y);
        this.br.setPosition(cropPosition[3].x, cropPosition[3].y);
        this.center.setPosition(cropPosition[4].x, cropPosition[4].y);
        for (const position of cropPosition) {
            new PointPool().instance.returnPoint(position);
        }
        this.vertSquashRatio = this.detectVerticalSquash(this.srcImage);
        this.draw(this.ctx);
        this.croppedImage = this.getCroppedImageHelper(false, this.cropWidth, this.cropHeight);
    }
    getCropPositionFromMarkers() {
        const w = this.canvas.width;
        const h = this.canvas.height;
        let tlPos;
        let trPos;
        let blPos;
        let brPos;
        let center;
        const sourceAspect = this.srcImage.height / this.srcImage.width;
        const cropBounds = this.getBounds();
        const cropAspect = cropBounds.height / cropBounds.width;
        const cX = this.canvas.width / 2;
        const cY = this.canvas.height / 2;
        if (cropAspect > sourceAspect) {
            const imageH = Math.min(w * sourceAspect, h);
            const cropW = imageH / cropAspect;
            tlPos = new PointPool().instance.borrow(cX - cropW / 2, cY + imageH / 2);
            trPos = new PointPool().instance.borrow(cX + cropW / 2, cY + imageH / 2);
            blPos = new PointPool().instance.borrow(cX - cropW / 2, cY - imageH / 2);
            brPos = new PointPool().instance.borrow(cX + cropW / 2, cY - imageH / 2);
        }
        else {
            const imageW = Math.min(h / sourceAspect, w);
            const cropH = imageW * cropAspect;
            tlPos = new PointPool().instance.borrow(cX - imageW / 2, cY + cropH / 2);
            trPos = new PointPool().instance.borrow(cX + imageW / 2, cY + cropH / 2);
            blPos = new PointPool().instance.borrow(cX - imageW / 2, cY - cropH / 2);
            brPos = new PointPool().instance.borrow(cX + imageW / 2, cY - cropH / 2);
        }
        center = new PointPool().instance.borrow(cX, cY);
        const positions = [tlPos, trPos, blPos, brPos, center];
        return positions;
    }
    getCropPositionFromBounds(cropPosition) {
        let marginTop = 0;
        let marginLeft = 0;
        const canvasAspect = this.canvasHeight / this.canvasWidth;
        const sourceAspect = this.srcImage.height / this.srcImage.width;
        if (canvasAspect > sourceAspect) {
            marginTop =
                this.buffer.height / 2 - (this.canvasWidth * sourceAspect) / 2;
        }
        else {
            marginLeft = this.buffer.width / 2 - this.canvasHeight / sourceAspect / 2;
        }
        const ratioW = (this.canvasWidth - marginLeft * 2) / this.srcImage.width;
        const ratioH = (this.canvasHeight - marginTop * 2) / this.srcImage.height;
        let actualH = cropPosition.height * ratioH;
        let actualW = cropPosition.width * ratioW;
        const actualX = cropPosition.left * ratioW + marginLeft;
        const actualY = cropPosition.top * ratioH + marginTop;
        if (this.keepAspect) {
            const scaledW = actualH / this.aspectRatio;
            const scaledH = actualW * this.aspectRatio;
            if (this.getCropBounds().height === cropPosition.height) {
                // only width changed
                actualH = scaledH;
            }
            else if (this.getCropBounds().width === cropPosition.width) {
                // only height changed
                actualW = scaledW;
            }
            else {
                // height and width changed
                if (Math.abs(scaledH - actualH) < Math.abs(scaledW - actualW)) {
                    actualW = scaledW;
                }
                else {
                    actualH = scaledH;
                }
            }
        }
        const tlPos = new PointPool().instance.borrow(actualX, actualY + actualH);
        const trPos = new PointPool().instance.borrow(actualX + actualW, actualY + actualH);
        const blPos = new PointPool().instance.borrow(actualX, actualY);
        const brPos = new PointPool().instance.borrow(actualX + actualW, actualY);
        const center = new PointPool().instance.borrow(actualX + actualW / 2, actualY + actualH / 2);
        const positions = [tlPos, trPos, blPos, brPos, center];
        return positions;
    }
    getCroppedImageHelper(preserveSize, fillWidth, fillHeight) {
        if (this.cropperSettings.cropOnResize) {
            return this.getCroppedImage(preserveSize, fillWidth, fillHeight);
        }
        return this.croppedImage
            ? this.croppedImage
            : document.createElement('img');
    }
    // todo: Unused parameters?
    getCroppedImage(preserveSize, fillWidth, fillHeight) {
        const bounds = this.getBounds();
        if (!this.srcImage) {
            return document.createElement('img');
        }
        else {
            const sourceAspect = this.srcImage.height / this.srcImage.width;
            const canvasAspect = this.canvas.height / this.canvas.width;
            let w = this.canvas.width;
            let h = this.canvas.height;
            if (canvasAspect > sourceAspect) {
                w = this.canvas.width;
                h = this.canvas.width * sourceAspect;
            }
            else {
                if (canvasAspect < sourceAspect) {
                    h = this.canvas.height;
                    w = this.canvas.height / sourceAspect;
                }
                else {
                    h = this.canvas.height;
                    w = this.canvas.width;
                }
            }
            this.ratioW = w / this.srcImage.width;
            this.ratioH = h / this.srcImage.height;
            const offsetH = (this.buffer.height - h) / 2 / this.ratioH;
            const offsetW = (this.buffer.width - w) / 2 / this.ratioW;
            const ctx = this.cropCanvas.getContext('2d');
            if (this.cropperSettings.preserveSize || preserveSize) {
                const width = Math.round(bounds.right / this.ratioW - bounds.left / this.ratioW);
                const height = Math.round(bounds.bottom / this.ratioH - bounds.top / this.ratioH);
                this.cropCanvas.width = width;
                this.cropCanvas.height = height;
                this.cropperSettings.croppedWidth = this.cropCanvas.width;
                this.cropperSettings.croppedHeight = this.cropCanvas.height;
            }
            else {
                this.cropCanvas.width = this.cropWidth;
                this.cropCanvas.height = this.cropHeight;
            }
            ctx.clearRect(0, 0, this.cropCanvas.width, this.cropCanvas.height);
            this.drawImageIOSFix(ctx, this.srcImage, Math.max(Math.round(bounds.left / this.ratioW - offsetW), 0), Math.max(Math.round(bounds.top / this.ratioH - offsetH), 0), Math.max(Math.round(bounds.width / this.ratioW), 1), Math.max(Math.round(bounds.height / this.ratioH), 1), 0, 0, this.cropCanvas.width, this.cropCanvas.height);
            if (this.cropperSettings.resampleFn) {
                this.cropperSettings.resampleFn(this.cropCanvas);
            }
            this.croppedImage.width = this.cropCanvas.width;
            this.croppedImage.height = this.cropCanvas.height;
            this.croppedImage.src = this.cropCanvas.toDataURL(this.fileType, this.cropperSettings.compressRatio);
            return this.croppedImage;
        }
    }
    getBounds() {
        let minX = Number.MAX_VALUE;
        let minY = Number.MAX_VALUE;
        let maxX = -Number.MAX_VALUE;
        let maxY = -Number.MAX_VALUE;
        for (const marker of this.markers) {
            if (marker.position.x < minX) {
                minX = marker.position.x;
            }
            if (marker.position.x > maxX) {
                maxX = marker.position.x;
            }
            if (marker.position.y < minY) {
                minY = marker.position.y;
            }
            if (marker.position.y > maxY) {
                maxY = marker.position.y;
            }
        }
        const bounds = new Bounds();
        bounds.left = minX;
        bounds.right = maxX;
        bounds.top = minY;
        bounds.bottom = maxY;
        return bounds;
    }
    setBounds(bounds) {
        // const topLeft: CornerMarker;
        // const topRight: CornerMarker;
        // const bottomLeft: CornerMarker;
        // const bottomRight: CornerMarker;
        const currentBounds = this.getBounds();
        for (const marker of this.markers) {
            if (marker.position.x === currentBounds.left) {
                if (marker.position.y === currentBounds.top) {
                    marker.setPosition(bounds.left, bounds.top);
                }
                else {
                    marker.setPosition(bounds.left, bounds.bottom);
                }
            }
            else {
                if (marker.position.y === currentBounds.top) {
                    marker.setPosition(bounds.right, bounds.top);
                }
                else {
                    marker.setPosition(bounds.right, bounds.bottom);
                }
            }
        }
        this.center.recalculatePosition(bounds);
        this.center.draw(this.ctx);
        this.draw(this.ctx); // we need to redraw all canvas if we have changed bounds
    }
    onTouchMove(event) {
        if (this.crop.isImageSet()) {
            if (event.touches.length === 1) {
                if (this.isMouseDown) {
                    event.preventDefault();
                    // tslint:disable-next-line:prefer-for-of
                    for (let i = 0; i < event.touches.length; i++) {
                        const touch = event.touches[i];
                        const touchPosition = this.getTouchPos(this.canvas, touch);
                        const cropTouch = new CropTouch(touchPosition.x, touchPosition.y, touch.identifier);
                        new PointPool().instance.returnPoint(touchPosition);
                        this.move(cropTouch);
                    }
                }
            }
            else {
                if (event.touches.length === 2) {
                    event.preventDefault();
                    const distance = (event.touches[0].clientX - event.touches[1].clientX) *
                        (event.touches[0].clientX - event.touches[1].clientX) +
                        (event.touches[0].clientY - event.touches[1].clientY) *
                            (event.touches[0].clientY - event.touches[1].clientY);
                    if (this.previousDistance && this.previousDistance !== distance) {
                        const bounds = this.getBounds();
                        if (distance < this.previousDistance) {
                            bounds.top += 1;
                            bounds.left += 1;
                            bounds.right -= 1;
                            bounds.bottom -= 1;
                        }
                        if (distance > this.previousDistance) {
                            if (bounds.top !== this.minYClamp &&
                                bounds.bottom !== this.maxYClamp &&
                                bounds.left !== this.minXClamp &&
                                bounds.right !== this.maxXClamp) {
                                // none
                                bounds.top -= 1;
                                bounds.left -= 1;
                                bounds.right += 1;
                                bounds.bottom += 1;
                            }
                            else if (bounds.top !== this.minYClamp &&
                                bounds.bottom !== this.maxYClamp &&
                                bounds.left === this.minXClamp &&
                                bounds.right !== this.maxXClamp) {
                                // left
                                bounds.top -= 1;
                                bounds.right += 2;
                                bounds.bottom += 1;
                            }
                            else if (bounds.top !== this.minYClamp &&
                                bounds.bottom !== this.maxYClamp &&
                                bounds.left !== this.minXClamp &&
                                bounds.right === this.maxXClamp) {
                                // right
                                bounds.top -= 1;
                                bounds.left -= 2;
                                bounds.bottom += 1;
                            }
                            else if (bounds.top === this.minYClamp &&
                                bounds.bottom !== this.maxYClamp &&
                                bounds.left !== this.minXClamp &&
                                bounds.right !== this.maxXClamp) {
                                // top
                                bounds.left -= 1;
                                bounds.right += 1;
                                bounds.bottom += 2;
                            }
                            else if (bounds.top !== this.minYClamp &&
                                bounds.bottom === this.maxYClamp &&
                                bounds.left !== this.minXClamp &&
                                bounds.right !== this.maxXClamp) {
                                // bottom
                                bounds.top -= 2;
                                bounds.left -= 1;
                                bounds.right += 1;
                            }
                            else if (bounds.top === this.minYClamp &&
                                bounds.bottom !== this.maxYClamp &&
                                bounds.left === this.minXClamp &&
                                bounds.right !== this.maxXClamp) {
                                // top left
                                bounds.right += 2;
                                bounds.bottom += 2;
                            }
                            else if (bounds.top === this.minYClamp &&
                                bounds.bottom !== this.maxYClamp &&
                                bounds.left !== this.minXClamp &&
                                bounds.right === this.maxXClamp) {
                                // top right
                                bounds.left -= 2;
                                bounds.bottom += 2;
                            }
                            else if (bounds.top !== this.minYClamp &&
                                bounds.bottom === this.maxYClamp &&
                                bounds.left === this.minXClamp &&
                                bounds.right !== this.maxXClamp) {
                                // bottom left
                                bounds.top -= 2;
                                bounds.right += 2;
                            }
                            else if (bounds.top !== this.minYClamp &&
                                bounds.bottom === this.maxYClamp &&
                                bounds.left !== this.minXClamp &&
                                bounds.right === this.maxXClamp) {
                                // bottom right
                                bounds.top -= 2;
                                bounds.left -= 2;
                            }
                        }
                        if (bounds.top < this.minYClamp) {
                            bounds.top = this.minYClamp;
                        }
                        if (bounds.bottom > this.maxYClamp) {
                            bounds.bottom = this.maxYClamp;
                        }
                        if (bounds.left < this.minXClamp) {
                            bounds.left = this.minXClamp;
                        }
                        if (bounds.right > this.maxXClamp) {
                            bounds.right = this.maxXClamp;
                        }
                        this.setBounds(bounds);
                    }
                    this.previousDistance = distance;
                }
            }
            this.draw(this.ctx);
        }
    }
    onMouseMove(e) {
        if (this.crop.isImageSet() && this.isMouseDown) {
            const mousePosition = this.getMousePos(this.canvas, e);
            this.move(new CropTouch(mousePosition.x, mousePosition.y, 0));
            let dragTouch = this.getDragTouchForID(0);
            if (dragTouch) {
                dragTouch.x = mousePosition.x;
                dragTouch.y = mousePosition.y;
            }
            else {
                dragTouch = new CropTouch(mousePosition.x, mousePosition.y, 0);
            }
            new PointPool().instance.returnPoint(mousePosition);
            this.drawCursors(dragTouch);
            this.draw(this.ctx);
        }
    }
    move(cropTouch) {
        if (this.isMouseDown) {
            this.handleMove(cropTouch);
        }
    }
    getDragTouchForID(id) {
        // tslint:disable-next-line:prefer-for-of
        for (let i = 0; i < this.currentDragTouches.length; i++) {
            if (id === this.currentDragTouches[i].id) {
                return this.currentDragTouches[i];
            }
        }
        return undefined;
    }
    drawCursors(cropTouch) {
        let cursorDrawn = false;
        if (cropTouch != null) {
            if (cropTouch.dragHandle === this.center) {
                this.imageCropperDataShare.setStyle(this.canvas, 'move');
                cursorDrawn = true;
            }
            if (cropTouch.dragHandle !== null &&
                cropTouch.dragHandle instanceof CornerMarker) {
                this.drawCornerCursor(cropTouch.dragHandle, cropTouch.dragHandle.position.x, cropTouch.dragHandle.position.y);
                cursorDrawn = true;
            }
        }
        let didDraw = false;
        if (!cursorDrawn) {
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < this.markers.length; i++) {
                didDraw =
                    didDraw ||
                        this.drawCornerCursor(this.markers[i], cropTouch.x, cropTouch.y);
            }
            if (!didDraw) {
                this.imageCropperDataShare.setStyle(this.canvas, 'initial');
            }
        }
        if (!didDraw &&
            !cursorDrawn &&
            this.center.touchInBounds(cropTouch.x, cropTouch.y)) {
            this.center.setOver(true);
            this.imageCropperDataShare.setOver(this.canvas);
            this.imageCropperDataShare.setStyle(this.canvas, 'move');
        }
        else {
            this.center.setOver(false);
        }
    }
    drawCornerCursor(marker, x, y) {
        if (marker.touchInBounds(x, y)) {
            marker.setOver(true);
            if (marker.getHorizontalNeighbour().position.x > marker.position.x) {
                if (marker.getVerticalNeighbour().position.y > marker.position.y) {
                    this.imageCropperDataShare.setOver(this.canvas);
                    this.imageCropperDataShare.setStyle(this.canvas, 'nwse-resize');
                }
                else {
                    this.imageCropperDataShare.setOver(this.canvas);
                    this.imageCropperDataShare.setStyle(this.canvas, 'nesw-resize');
                }
            }
            else {
                if (marker.getVerticalNeighbour().position.y > marker.position.y) {
                    this.imageCropperDataShare.setOver(this.canvas);
                    this.imageCropperDataShare.setStyle(this.canvas, 'nesw-resize');
                }
                else {
                    this.imageCropperDataShare.setOver(this.canvas);
                    this.imageCropperDataShare.setStyle(this.canvas, 'nwse-resize');
                }
            }
            return true;
        }
        marker.setOver(false);
        return false;
    }
    onTouchStart(event) {
        if (this.crop.isImageSet()) {
            const touch = event.touches[0];
            const touchPosition = this.getTouchPos(this.canvas, touch);
            const cropTouch = new CropTouch(touchPosition.x, touchPosition.y, touch.identifier);
            new PointPool().instance.returnPoint(touchPosition);
            this.isMouseDown = false;
            for (const marker of this.markers) {
                if (marker.touchInBounds(cropTouch.x, cropTouch.y)) {
                    this.isMouseDown = true;
                }
            }
            if (this.center.touchInBounds(cropTouch.x, cropTouch.y)) {
                this.isMouseDown = true;
            }
        }
    }
    onTouchEnd(event) {
        if (this.crop.isImageSet()) {
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < event.changedTouches.length; i++) {
                const touch = event.changedTouches[i];
                const dragTouch = this.getDragTouchForID(touch.identifier);
                if (dragTouch && dragTouch !== undefined) {
                    if (dragTouch.dragHandle instanceof CornerMarker ||
                        dragTouch.dragHandle instanceof DragMarker) {
                        dragTouch.dragHandle.setOver(false);
                    }
                    this.handleRelease(dragTouch);
                }
            }
            if (this.currentDragTouches.length === 0) {
                this.isMouseDown = false;
                this.currentlyInteracting = false;
            }
        }
    }
    // http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios
    drawImageIOSFix(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {
        // Works only if whole image is displayed:
        // ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);
        // The following works correct also when only a part of the image is displayed:
        // ctx.drawImage(img, sx * this.vertSquashRatio, sy * this.vertSquashRatio, sw * this.vertSquashRatio, sh *
        // this.vertSquashRatio, dx, dy, dw, dh);
        ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);
    }
    onMouseDown(event) {
        if (this.crop.isImageSet()) {
            this.isMouseDown = true;
        }
    }
    onMouseUp(event) {
        if (this.crop.isImageSet()) {
            this.imageCropperDataShare.setReleased(this.canvas);
            this.isMouseDown = false;
            this.handleRelease(new CropTouch(0, 0, 0));
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1hZ2VDcm9wcGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LWltZy1jcm9wcGVyLyIsInNvdXJjZXMiOlsibGliL2ltYWdlLWNyb3BwZXIvaW1hZ2VDcm9wcGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRTlDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUM5RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFJOUMsTUFBTSxPQUFPLFlBQWEsU0FBUSxpQkFBaUI7SUFNakQsWUFBWSxlQUFnQztRQUMxQyxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLHFCQUFxQixFQUFFLENBQUM7UUFDekQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1osTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1osTUFBTSxLQUFLLEdBQVcsZUFBZSxDQUFDLEtBQUssQ0FBQztRQUM1QyxNQUFNLE1BQU0sR0FBVyxlQUFlLENBQUMsTUFBTSxDQUFDO1FBQzlDLE1BQU0sVUFBVSxHQUFZLGVBQWUsQ0FBQyxVQUFVLENBQUM7UUFDdkQsTUFBTSxXQUFXLEdBQVcsZUFBZSxDQUFDLFdBQVcsQ0FBQztRQUN4RCxNQUFNLGlCQUFpQixHQUFXLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQztRQUNwRSxNQUFNLFFBQVEsR0FBVyxlQUFlLENBQUMsUUFBUSxDQUFDO1FBQ2xELE1BQU0sU0FBUyxHQUFXLGVBQWUsQ0FBQyxTQUFTLENBQUM7UUFDcEQsTUFBTSxZQUFZLEdBQVcsZUFBZSxDQUFDLFlBQVksQ0FBQztRQUMxRCxNQUFNLGFBQWEsR0FBVyxlQUFlLENBQUMsYUFBYSxDQUFDO1FBRTVELElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO1FBRXZDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFWCxJQUFJLENBQUMsWUFBWSxHQUFHLGVBQWUsQ0FBQyxZQUFZLENBQUM7UUFDakQsSUFBSSxDQUFDLFdBQVcsR0FBRyxlQUFlLENBQUMsV0FBVyxDQUFDO1FBRS9DLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksS0FBSyxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO1NBQ2xCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxNQUFNLEtBQUssS0FBSyxDQUFDLEVBQUU7WUFDckIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7U0FDbEI7UUFDRCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLFVBQVUsS0FBSyxLQUFLLENBQUMsRUFBRTtZQUN6QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUN4QjtRQUNELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksV0FBVyxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQzFCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNoQixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNoQixJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FBQyxRQUFRLENBQUM7UUFDekMsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVwQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNwRSxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLFlBQVksQ0FDeEIsQ0FBQyxFQUNELENBQUMsR0FBRyxNQUFNLEVBQ1YsV0FBVyxFQUNYLElBQUksQ0FBQyxlQUFlLENBQ3JCLENBQUM7UUFDRixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksWUFBWSxDQUN4QixDQUFDLEdBQUcsS0FBSyxFQUNULENBQUMsR0FBRyxNQUFNLEVBQ1YsV0FBVyxFQUNYLElBQUksQ0FBQyxlQUFlLENBQ3JCLENBQUM7UUFFRixJQUFJLENBQUMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsRUFBRSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsRUFBRSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsRUFBRSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsRUFBRSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsRUFBRSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXBELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxVQUFVLENBQzFCLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUNiLENBQUMsR0FBRyxNQUFNLEdBQUcsQ0FBQyxFQUNkLGlCQUFpQixFQUNqQixJQUFJLENBQUMsZUFBZSxDQUNyQixDQUFDO1FBQ0YsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsS0FBSyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDO1FBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDO0lBQ2xDLENBQUM7SUFFTyxJQUFJLENBQUMsQ0FBUztRQUNwQixJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JDO1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDO0lBRU8sV0FBVyxDQUFDLE1BQXlCLEVBQUUsR0FBZTtRQUM1RCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM1QyxPQUFPLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FDcEMsR0FBRyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxFQUN2QixHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQ3ZCLENBQUM7SUFDSixDQUFDO0lBRU8sV0FBVyxDQUFDLE1BQXlCLEVBQUUsS0FBWTtRQUN6RCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM1QyxPQUFPLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FDcEMsS0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxFQUN6QixLQUFLLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQ3pCLENBQUM7SUFDSixDQUFDO0lBRU8sb0JBQW9CLENBQzFCLEdBQTREO1FBRTVELE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7UUFDdEIsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoRCxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNqQixNQUFNLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNuQixNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBNkIsQ0FBQztRQUNoRSxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekIsTUFBTSxTQUFTLEdBQVEsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNyRCxJQUFJLFNBQVMsRUFBRTtZQUNiLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7WUFDNUIsc0VBQXNFO1lBQ3RFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNYLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQztZQUNaLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQztZQUNaLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRTtnQkFDZCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxJQUFJLEtBQUssS0FBSyxDQUFDLEVBQUU7b0JBQ2YsRUFBRSxHQUFHLEVBQUUsQ0FBQztpQkFDVDtxQkFBTTtvQkFDTCxFQUFFLEdBQUcsRUFBRSxDQUFDO2lCQUNUO2dCQUNELHNDQUFzQztnQkFDdEMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNyQjtZQUNELE1BQU0sS0FBSyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7WUFDdEIsT0FBTyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztTQUNoQzthQUFNO1lBQ0wsT0FBTyxDQUFDLENBQUM7U0FDVjtJQUNILENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxPQUFlO1FBQ3hDLGlGQUFpRjtRQUNqRiwyREFBMkQ7UUFDM0QsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsRCxJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUM7UUFDM0Isa0JBQWtCO1FBQ2xCLGdFQUFnRTtRQUNoRSxNQUFNLEtBQUssR0FBRyxNQUFNLENBQ2xCLHNEQUFzRCxDQUN2RCxDQUFDO1FBQ0YsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzdDLElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN6QixRQUFRLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLElBQUksUUFBUSxLQUFLLFdBQVcsRUFBRTtnQkFDNUIsUUFBUSxHQUFHLFlBQVksQ0FBQzthQUN6QjtTQUNGO1FBQ0QsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztJQUVNLE9BQU8sQ0FBQyxNQUF5QjtRQUN0QyxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRW5ELDZDQUE2QztRQUM3QyxNQUFNLGVBQWUsR0FBVyxNQUFNLENBQUMsYUFBYTtZQUNsRCxDQUFDLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXO1lBQ2xDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDTixJQUFJLGVBQWUsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhLEVBQUU7WUFDN0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsZUFBZSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQztZQUNwQyxNQUFNLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQztTQUNoQzthQUFNO1lBQ0wsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO1NBQ2xDO1FBRUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ25DLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUE2QixDQUFDO1FBRXBFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFTSxjQUFjLENBQUMsZUFBZ0M7UUFDcEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7SUFDekMsQ0FBQztJQUVNLFlBQVksQ0FDakIsS0FBYSxFQUNiLE1BQWMsRUFDZCxXQUFvQixLQUFLO1FBRXpCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDdEcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUM1RyxJQUFJLFFBQVEsRUFBRTtZQUNaLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQzlCO0lBQ0gsQ0FBQztJQUVNLEtBQUs7UUFDVixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFFTSxJQUFJLENBQUMsR0FBNkI7UUFDdkMsTUFBTSxNQUFNLEdBQVcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3hDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDekQsTUFBTSxZQUFZLEdBQVcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDeEUsTUFBTSxZQUFZLEdBQVcsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1lBQ2xFLElBQUksQ0FBQyxHQUFXLElBQUksQ0FBQyxXQUFXLENBQUM7WUFDakMsSUFBSSxDQUFDLEdBQVcsSUFBSSxDQUFDLFlBQVksQ0FBQztZQUNsQyxJQUFJLFlBQVksR0FBRyxZQUFZLEVBQUU7Z0JBQy9CLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2dCQUNyQixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUM7YUFDckM7aUJBQU07Z0JBQ0wsQ0FBQyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7Z0JBQ3RCLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQzthQUN0QztZQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQ3ZDLElBQUksWUFBWSxHQUFHLFlBQVksRUFBRTtnQkFDL0IsSUFBSSxDQUFDLGVBQWUsQ0FDbEIsR0FBRyxFQUNILElBQUksQ0FBQyxRQUFRLEVBQ2IsQ0FBQyxFQUNELENBQUMsRUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUM3QixDQUFDLEVBQ0QsQ0FBQyxFQUNELENBQUMsQ0FDRixDQUFDO2FBQ0g7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLGVBQWUsQ0FDbEIsR0FBRyxFQUNILElBQUksQ0FBQyxRQUFRLEVBQ2IsQ0FBQyxFQUNELENBQUMsRUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQ3BCLENBQUMsRUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFDOUIsQ0FBQyxFQUNELENBQUMsQ0FDRixDQUFDO2FBQ0g7WUFDQSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQThCLENBQUMsU0FBUyxDQUNsRSxJQUFJLENBQUMsTUFBTSxFQUNYLENBQUMsRUFDRCxDQUFDLEVBQ0QsSUFBSSxDQUFDLFdBQVcsRUFDaEIsSUFBSSxDQUFDLFlBQVksQ0FDbEIsQ0FBQztZQUVGLEdBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUM7WUFDckUsR0FBRyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQztZQUV2RSxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsbUJBQW1CLENBQUMsbUJBQW1CLENBQUM7WUFDN0UsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFO2dCQUNqQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ3hELEdBQUcsQ0FBQyxTQUFTLENBQ1gsSUFBSSxDQUFDLE1BQU0sRUFDWCxNQUFNLENBQUMsSUFBSSxFQUNYLE1BQU0sQ0FBQyxHQUFHLEVBQ1YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQzFCLE1BQU0sQ0FBQyxJQUFJLEVBQ1gsTUFBTSxDQUFDLEdBQUcsRUFDVixNQUFNLENBQUMsS0FBSyxFQUNaLE1BQU0sQ0FBQyxNQUFNLENBQ2QsQ0FBQztnQkFDRixHQUFHLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUN0RTtpQkFBTTtnQkFDTCxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDMUQsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNYLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFDaEIsR0FBRyxDQUFDLEdBQUcsQ0FDTCxNQUFNLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUM5QixNQUFNLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUM5QixNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDaEIsQ0FBQyxFQUNELENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUNaLENBQUM7Z0JBQ0YsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUNiLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDWCxJQUFJLFlBQVksR0FBRyxZQUFZLEVBQUU7b0JBQy9CLElBQUksQ0FBQyxlQUFlLENBQ2xCLEdBQUcsRUFDSCxJQUFJLENBQUMsUUFBUSxFQUNiLENBQUMsRUFDRCxDQUFDLEVBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQ25CLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFDN0IsQ0FBQyxFQUNELENBQUMsRUFDRCxDQUFDLENBQ0YsQ0FBQztpQkFDSDtxQkFBTTtvQkFDTCxJQUFJLENBQUMsZUFBZSxDQUNsQixHQUFHLEVBQ0gsSUFBSSxDQUFDLFFBQVEsRUFDYixDQUFDLEVBQ0QsQ0FBQyxFQUNELElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUNuQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFDcEIsQ0FBQyxFQUNELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUM5QixDQUFDLEVBQ0QsQ0FBQyxDQUNGLENBQUM7aUJBQ0g7Z0JBQ0QsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQ2Y7WUFFRCxJQUFJLE1BQW9CLENBQUM7WUFFekIseUNBQXlDO1lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDNUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDbEI7WUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN2QjthQUFNO1lBQ0wsR0FBRyxDQUFDLFNBQVMsR0FBRyxxQkFBcUIsQ0FBQztZQUN0QyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUMzRDtJQUNILENBQUM7SUFFTSxVQUFVLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxNQUFrQjtRQUN4RCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDaEMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sS0FBSyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNuQyxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDbEMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ3JDLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDM0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7U0FDdkM7UUFDRCxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQzFCLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1NBQ3ZDO1FBQ0QsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUN4QixDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztTQUN4QztRQUNELElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDNUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7U0FDeEM7UUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNyQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRU0sY0FBYyxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsTUFBb0I7UUFDOUQsTUFBTSxPQUFPLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDL0QsTUFBTSxPQUFPLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDN0QsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUVqRCxJQUFJLE9BQU8sS0FBSyxDQUFDLElBQUksT0FBTyxLQUFLLENBQUMsRUFBRTtZQUNsQyxDQUFDLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDdEIsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBRXRCLE9BQU8sSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUM5QztRQUVELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUFFO2dCQUM3QyxJQUFJLEtBQUssR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRTtvQkFDcEMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFO3dCQUNmLENBQUMsSUFBSSxLQUFLLENBQUM7d0JBRVgsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFOzRCQUNmLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt5QkFDL0I7NkJBQU07NEJBQ0wsQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO3lCQUMvQjtxQkFDRjt5QkFBTTt3QkFDTCxDQUFDLElBQUksS0FBSyxDQUFDO3dCQUNYLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTs0QkFDZixDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7eUJBQy9COzZCQUFNOzRCQUNMLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt5QkFDL0I7cUJBQ0Y7aUJBQ0Y7cUJBQU07b0JBQ0wsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFO3dCQUNmLENBQUMsSUFBSSxLQUFLLENBQUM7d0JBRVgsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFOzRCQUNmLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt5QkFDL0I7NkJBQU07NEJBQ0wsQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO3lCQUMvQjtxQkFDRjt5QkFBTTt3QkFDTCxDQUFDLElBQUksS0FBSyxDQUFDO3dCQUNYLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTs0QkFDZixDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7eUJBQy9COzZCQUFNOzRCQUNMLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt5QkFDL0I7cUJBQ0Y7aUJBQ0Y7YUFDRjtpQkFBTTtnQkFDTCxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUU7b0JBQ2IsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFO3dCQUNmLENBQUMsSUFBSSxLQUFLLENBQUM7d0JBQ1gsSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFOzRCQUNmLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt5QkFDL0I7NkJBQU07NEJBQ0wsQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO3lCQUMvQjtxQkFDRjt5QkFBTTt3QkFDTCxDQUFDLElBQUksS0FBSyxDQUFDO3dCQUNYLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTs0QkFDZixDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7eUJBQy9COzZCQUFNOzRCQUNMLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt5QkFDL0I7cUJBQ0Y7aUJBQ0Y7cUJBQU07b0JBQ0wsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO3dCQUNiLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTs0QkFDZixDQUFDLElBQUksS0FBSyxDQUFDOzRCQUVYLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTtnQ0FDZixDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7NkJBQy9CO2lDQUFNO2dDQUNMLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzs2QkFDL0I7eUJBQ0Y7NkJBQU07NEJBQ0wsQ0FBQyxJQUFJLEtBQUssQ0FBQzs0QkFDWCxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUU7Z0NBQ2YsQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDOzZCQUMvQjtpQ0FBTTtnQ0FDTCxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7NkJBQy9CO3lCQUNGO3FCQUNGO2lCQUNGO2FBQ0Y7U0FDRjthQUFNO1lBQ0wsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO2dCQUNiLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTtvQkFDZixDQUFDLElBQUksS0FBSyxDQUFDO2lCQUNaO3FCQUFNO29CQUNMLENBQUMsSUFBSSxLQUFLLENBQUM7aUJBQ1o7YUFDRjtZQUNELElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtnQkFDYixJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUU7b0JBQ2YsQ0FBQyxJQUFJLEtBQUssQ0FBQztpQkFDWjtxQkFBTTtvQkFDTCxDQUFDLElBQUksS0FBSyxDQUFDO2lCQUNaO2FBQ0Y7U0FDRjtRQUVELElBQ0UsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTO1lBQ2xCLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUztZQUNsQixDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVM7WUFDbEIsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQ2xCO1lBQ0EsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLENBQUMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztTQUN2QjtRQUVELE9BQU8sSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRU0sVUFBVSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsTUFBb0I7UUFDMUQsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNqQixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7UUFDYixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7UUFDYixJQUFJLFlBQTBCLENBQUM7UUFDL0IsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBRWIsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLFlBQVksR0FBRyxNQUFNLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBQ3RFLEVBQUUsR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUM3QixFQUFFLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDN0IsSUFBSSxDQUFDLElBQUksWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2hDLElBQUksQ0FBQyxJQUFJLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFO29CQUNoQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO29CQUNqQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO29CQUN0RCxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FDakIsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDdkMsWUFBWSxDQUFDLFFBQVEsRUFDckIsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FDdEMsQ0FBQztvQkFDRixJQUFJLElBQUksR0FBRyxDQUFDLEVBQUU7d0JBQ1osU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7d0JBQ2xELFFBQVEsR0FBRyxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt3QkFDeEMsSUFBSSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQzt3QkFDM0MsSUFBSSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQzt3QkFDMUMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO3dCQUNwRCxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUMxQixJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7cUJBQzNDO3lCQUFNO3dCQUNMLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTs0QkFDWixRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFDakQsU0FBUyxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDOzRCQUN4QyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDOzRCQUMzQyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDOzRCQUMxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7NEJBQ3BELE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQzFCLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQzt5QkFDM0M7cUJBQ0Y7aUJBQ0Y7cUJBQU07b0JBQ0wsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztvQkFDakMsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztvQkFDdEQsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQ2pCLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQ3ZDLFlBQVksQ0FBQyxRQUFRLEVBQ3JCLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQ3RDLENBQUM7b0JBQ0YsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFO3dCQUNaLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUNqRCxTQUFTLEdBQUcsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7d0JBQ3hDLElBQUksR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUM7d0JBQzNDLElBQUksR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7d0JBQzFDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQzt3QkFDcEQsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDMUIsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUMzQzt5QkFBTTt3QkFDTCxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUU7NEJBQ1osU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7NEJBQ2xELFFBQVEsR0FBRyxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzs0QkFDeEMsSUFBSSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQzs0QkFDM0MsSUFBSSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQzs0QkFDMUMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDOzRCQUNwRCxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUMxQixJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7eUJBQzNDO3FCQUNGO2lCQUNGO2FBQ0Y7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLElBQUksWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUU7b0JBQ2hDLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7b0JBQ2pDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7b0JBQ3RELElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUNqQixJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUN2QyxZQUFZLENBQUMsUUFBUSxFQUNyQixJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUN0QyxDQUFDO29CQUNGLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTt3QkFDWixTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFDbEQsUUFBUSxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO3dCQUN4QyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDO3dCQUMzQyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO3dCQUMxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7d0JBQ3BELE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQzFCLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztxQkFDM0M7eUJBQU07d0JBQ0wsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFOzRCQUNaLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUNqRCxTQUFTLEdBQUcsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7NEJBQ3hDLElBQUksR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUM7NEJBQzNDLElBQUksR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7NEJBQzFDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQzs0QkFDcEQsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDMUIsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3lCQUMzQztxQkFDRjtpQkFDRjtxQkFBTTtvQkFDTCxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO29CQUNqQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO29CQUN0RCxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FDakIsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDdkMsWUFBWSxDQUFDLFFBQVEsRUFDckIsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FDdEMsQ0FBQztvQkFDRixJQUFJLElBQUksR0FBRyxDQUFDLEVBQUU7d0JBQ1osUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7d0JBQ2pELFNBQVMsR0FBRyxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt3QkFDeEMsSUFBSSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQzt3QkFDM0MsSUFBSSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQzt3QkFDMUMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO3dCQUNwRCxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUMxQixJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7cUJBQzNDO3lCQUFNO3dCQUNMLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTs0QkFDWixTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFDbEQsUUFBUSxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDOzRCQUN4QyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDOzRCQUMzQyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDOzRCQUMxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7NEJBQ3BELE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQzFCLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQzt5QkFDM0M7cUJBQ0Y7aUJBQ0Y7YUFDRjtTQUNGO2FBQU07WUFDTCxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDM0M7UUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFTSxPQUFPLENBQUMsQ0FBUSxFQUFFLENBQVEsRUFBRSxDQUFRO1FBQ3pDLE1BQU0sQ0FBQyxHQUFXLElBQUksQ0FBQyxJQUFJLENBQ3pCLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ3RELENBQUM7UUFFRixnRUFBZ0U7UUFDaEUsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFTSxhQUFhLENBQUMsWUFBdUI7UUFDMUMsSUFBSSxZQUFZLElBQUksSUFBSSxFQUFFO1lBQ3hCLE9BQU87U0FDUjtRQUNELElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNkLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZELElBQUksWUFBWSxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUNyRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckQsS0FBSyxHQUFHLENBQUMsQ0FBQzthQUNYO1NBQ0Y7UUFDRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRU0sVUFBVSxDQUFDLFlBQXVCO1FBQ3ZDLElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQztRQUNwQix5Q0FBeUM7UUFDekMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdkQsSUFDRSxZQUFZLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNqRCxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxJQUFJLElBQUksRUFDN0M7Z0JBQ0EsTUFBTSxTQUFTLEdBQWMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN4RCxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQ3pDLFlBQVksQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUM5QyxZQUFZLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FDL0MsQ0FBQztnQkFDRixZQUFZLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQztnQkFDcEMsWUFBWSxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BDLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUN2RCxJQUFJLFNBQVMsQ0FBQyxVQUFVLFlBQVksWUFBWSxFQUFFO29CQUNoRCxJQUFJLENBQUMsVUFBVSxDQUNiLFlBQVksQ0FBQyxDQUFDLEVBQ2QsWUFBWSxDQUFDLENBQUMsRUFDZCxTQUFTLENBQUMsVUFBMEIsQ0FDckMsQ0FBQztpQkFDSDtxQkFBTTtvQkFDTCxJQUFJLENBQUMsVUFBVSxDQUNiLFlBQVksQ0FBQyxDQUFDLEVBQ2QsWUFBWSxDQUFDLENBQUMsRUFDZCxTQUFTLENBQUMsVUFBd0IsQ0FDbkMsQ0FBQztpQkFDSDtnQkFDRCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO2dCQUNqQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2dCQUNmLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNuRCxNQUFNO2FBQ1A7U0FDRjtRQUNELElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDWixLQUFLLE1BQU0sTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQ2pDLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDeEQsWUFBWSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7b0JBQ2pDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7b0JBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3JCLFlBQVksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQzlCLFlBQVksQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUN0RCxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUM5QixZQUFZLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztvQkFDdEQsSUFBSSxDQUFDLFVBQVUsQ0FDYixZQUFZLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsRUFDakQsWUFBWSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQ2pELFlBQVksQ0FBQyxVQUEwQixDQUN4QyxDQUFDO29CQUNGLE1BQU07aUJBQ1A7YUFDRjtZQUNELElBQ0UsWUFBWSxDQUFDLFVBQVUsS0FBSyxJQUFJO2dCQUNoQyxPQUFPLFlBQVksQ0FBQyxVQUFVLEtBQUssV0FBVyxFQUM5QztnQkFDQSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFO29CQUM3RCxZQUFZLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7b0JBQ3RDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7b0JBQzNDLFlBQVksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN0QyxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUM5QixZQUFZLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztvQkFDdEQsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQzt3QkFDOUIsWUFBWSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ3RELElBQUksQ0FBQyxVQUFVLENBQ2IsWUFBWSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQ2pELFlBQVksQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUNqRCxZQUFZLENBQUMsVUFBd0IsQ0FDdEMsQ0FBQztpQkFDSDthQUNGO1NBQ0Y7SUFDSCxDQUFDO0lBRU0saUJBQWlCO1FBQ3RCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1FBQ2hFLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQzVELElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQzFCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQzNCLElBQUksWUFBWSxHQUFHLFlBQVksRUFBRTtZQUMvQixDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDdEIsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQztTQUN0QzthQUFNO1lBQ0wsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1lBQ3ZCLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUM7U0FDdkM7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEQsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFTSxhQUFhO1FBQ2xCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNoQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckUsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RSxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDekUsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVNLGFBQWEsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUN2QyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ3RCLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1NBQ3BCO1FBQ0QsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUN0QixDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztTQUNwQjtRQUNELElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDdEIsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7U0FDcEI7UUFDRCxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ3RCLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1NBQ3BCO1FBQ0QsT0FBTyxJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFTSxVQUFVO1FBQ2YsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxRQUFRLENBQUMsR0FBUTtRQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztRQUNwQixJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDckI7YUFBTTtZQUNMLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FDMUMsSUFBSSxDQUN1QixDQUFDO1lBQzlCLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXJFLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsRUFBRTtnQkFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2xEO1lBRUQsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLDJCQUEyQixFQUFFO2dCQUNwRCxJQUFJLENBQUMsUUFBUTtvQkFDWCxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDO3dCQUNuRCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztnQkFDdEIsSUFBSSxDQUFDLFNBQVM7b0JBQ1osQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQzt3QkFDckQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7YUFDeEI7WUFFRCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFFdkMsTUFBTSxZQUFZLEdBQVksSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUM7WUFDaEUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUNwQztJQUNILENBQUM7SUFFTSxrQkFBa0IsQ0FBQyxVQUFrQjtRQUMxQyxNQUFNLFlBQVksR0FBWSxJQUFJLENBQUMseUJBQXlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU8sZUFBZSxDQUFDLFlBQXFCO1FBQzNDLElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTlELEtBQUssTUFBTSxRQUFRLElBQUksWUFBWSxFQUFFO1lBQ25DLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNoRDtRQUVELElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FDNUMsS0FBSyxFQUNMLElBQUksQ0FBQyxTQUFTLEVBQ2QsSUFBSSxDQUFDLFVBQVUsQ0FDaEIsQ0FBQztJQUNKLENBQUM7SUFFTywwQkFBMEI7UUFDaEMsTUFBTSxDQUFDLEdBQVcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDcEMsTUFBTSxDQUFDLEdBQVcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDckMsSUFBSSxLQUFZLENBQUM7UUFDakIsSUFBSSxLQUFZLENBQUM7UUFDakIsSUFBSSxLQUFZLENBQUM7UUFDakIsSUFBSSxLQUFZLENBQUM7UUFDakIsSUFBSSxNQUFhLENBQUM7UUFDbEIsTUFBTSxZQUFZLEdBQVcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDeEUsTUFBTSxVQUFVLEdBQVcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzVDLE1BQU0sVUFBVSxHQUFXLFVBQVUsQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQztRQUNoRSxNQUFNLEVBQUUsR0FBVyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDekMsTUFBTSxFQUFFLEdBQVcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRTFDLElBQUksVUFBVSxHQUFHLFlBQVksRUFBRTtZQUM3QixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDN0MsTUFBTSxLQUFLLEdBQUcsTUFBTSxHQUFHLFVBQVUsQ0FBQztZQUNsQyxLQUFLLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDekUsS0FBSyxHQUFHLElBQUksU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEdBQUcsS0FBSyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3pFLEtBQUssR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxHQUFHLEtBQUssR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztZQUN6RSxLQUFLLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDMUU7YUFBTTtZQUNMLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM3QyxNQUFNLEtBQUssR0FBRyxNQUFNLEdBQUcsVUFBVSxDQUFDO1lBQ2xDLEtBQUssR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxHQUFHLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztZ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LFNBQVM7Z0NBQzdCLE1BQU0sQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQ2hDLE1BQU0sQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQzlCLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLFNBQVMsRUFDL0I7Z0NBQ0EsUUFBUTtnQ0FDUixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztnQ0FDaEIsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7Z0NBQ2pCLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDOzZCQUNwQjtpQ0FBTSxJQUNMLE1BQU0sQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQzdCLE1BQU0sQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQ2hDLE1BQU0sQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQzlCLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLFNBQVMsRUFDL0I7Z0NBQ0EsTUFBTTtnQ0FDTixNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQztnQ0FDakIsTUFBTSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7Z0NBQ2xCLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDOzZCQUNwQjtpQ0FBTSxJQUNMLE1BQU0sQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQzdCLE1BQU0sQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQ2hDLE1BQU0sQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0NBQzlCLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLFNBQVMsRUFDL0I7Z0NBQ0EsU0FBUztnQ0FDVCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztnQ0FDaEIsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7Z0NBQ2pCLE1BQU0sQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDOzZCQUNuQjtpQ0FBTSxJQUNMLE1BQU0sQ0FBQyxH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QUM7U0FDNUM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3VuZHMgfSBmcm9tICcuL21vZGVsL2JvdW5kcyc7XHJcbmltcG9ydCB7IENvcm5lck1hcmtlciB9IGZyb20gJy4vbW9kZWwvY29ybmVyTWFya2VyJztcclxuaW1wb3J0IHsgQ3JvcFRvdWNoIH0gZnJvbSAnLi9tb2RlbC9jcm9wVG91Y2gnO1xyXG5pbXBvcnQgeyBDcm9wcGVyU2V0dGluZ3MgfSBmcm9tICcuL2Nyb3BwZXItc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBEcmFnTWFya2VyIH0gZnJvbSAnLi9tb2RlbC9kcmFnTWFya2VyJztcclxuaW1wb3J0IHsgSW1hZ2VDcm9wcGVyTW9kZWwgfSBmcm9tICcuL21vZGVsL2ltYWdlQ3JvcHBlck1vZGVsJztcclxuaW1wb3J0IHsgSW1hZ2VDcm9wcGVyRGF0YVNoYXJlIH0gZnJvbSAnLi9pbWFnZUNyb3BwZXJEYXRhU2hhcmUnO1xyXG5pbXBvcnQgeyBQb2ludFBvb2wgfSBmcm9tICcuL21vZGVsL3BvaW50UG9vbCc7XHJcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi9tb2RlbC9wb2ludCc7XHJcbmltcG9ydCB7IElDb3JuZXJNYXJrZXIgfSBmcm9tICcuL21vZGVsL2Nvcm5lck1hcmtlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgSW1hZ2VDcm9wcGVyIGV4dGVuZHMgSW1hZ2VDcm9wcGVyTW9kZWwge1xyXG4gIHByaXZhdGUgY3JvcDogSW1hZ2VDcm9wcGVyO1xyXG4gIHByaXZhdGUgY3JvcHBlclNldHRpbmdzOiBDcm9wcGVyU2V0dGluZ3M7XHJcbiAgcHJpdmF0ZSBwcmV2aW91c0Rpc3RhbmNlOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBpbWFnZUNyb3BwZXJEYXRhU2hhcmU6IEltYWdlQ3JvcHBlckRhdGFTaGFyZTtcclxuXHJcbiAgY29uc3RydWN0b3IoY3JvcHBlclNldHRpbmdzOiBDcm9wcGVyU2V0dGluZ3MpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmltYWdlQ3JvcHBlckRhdGFTaGFyZSA9IG5ldyBJbWFnZUNyb3BwZXJEYXRhU2hhcmUoKTtcclxuICAgIGNvbnN0IHggPSAwO1xyXG4gICAgY29uc3QgeSA9IDA7XHJcbiAgICBjb25zdCB3aWR0aDogbnVtYmVyID0gY3JvcHBlclNldHRpbmdzLndpZHRoO1xyXG4gICAgY29uc3QgaGVpZ2h0OiBudW1iZXIgPSBjcm9wcGVyU2V0dGluZ3MuaGVpZ2h0O1xyXG4gICAgY29uc3Qga2VlcEFzcGVjdDogYm9vbGVhbiA9IGNyb3BwZXJTZXR0aW5ncy5rZWVwQXNwZWN0O1xyXG4gICAgY29uc3QgdG91Y2hSYWRpdXM6IG51bWJlciA9IGNyb3BwZXJTZXR0aW5ncy50b3VjaFJhZGl1cztcclxuICAgIGNvbnN0IGNlbnRlclRvdWNoUmFkaXVzOiBudW1iZXIgPSBjcm9wcGVyU2V0dGluZ3MuY2VudGVyVG91Y2hSYWRpdXM7XHJcbiAgICBjb25zdCBtaW5XaWR0aDogbnVtYmVyID0gY3JvcHBlclNldHRpbmdzLm1pbldpZHRoO1xyXG4gICAgY29uc3QgbWluSGVpZ2h0OiBudW1iZXIgPSBjcm9wcGVyU2V0dGluZ3MubWluSGVpZ2h0O1xyXG4gICAgY29uc3QgY3JvcHBlZFdpZHRoOiBudW1iZXIgPSBjcm9wcGVyU2V0dGluZ3MuY3JvcHBlZFdpZHRoO1xyXG4gICAgY29uc3QgY3JvcHBlZEhlaWdodDogbnVtYmVyID0gY3JvcHBlclNldHRpbmdzLmNyb3BwZWRIZWlnaHQ7XHJcblxyXG4gICAgdGhpcy5jcm9wcGVyU2V0dGluZ3MgPSBjcm9wcGVyU2V0dGluZ3M7XHJcblxyXG4gICAgdGhpcy5jcm9wID0gdGhpcztcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG5cclxuICAgIHRoaXMuY2FudmFzSGVpZ2h0ID0gY3JvcHBlclNldHRpbmdzLmNhbnZhc0hlaWdodDtcclxuICAgIHRoaXMuY2FudmFzV2lkdGggPSBjcm9wcGVyU2V0dGluZ3MuY2FudmFzV2lkdGg7XHJcblxyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgaWYgKHdpZHRoID09PSB2b2lkIDApIHtcclxuICAgICAgdGhpcy53aWR0aCA9IDEwMDtcclxuICAgIH1cclxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgIHRoaXMuaGVpZ2h0ID0gNTA7XHJcbiAgICB9XHJcbiAgICB0aGlzLmtlZXBBc3BlY3QgPSBrZWVwQXNwZWN0O1xyXG4gICAgaWYgKGtlZXBBc3BlY3QgPT09IHZvaWQgMCkge1xyXG4gICAgICB0aGlzLmtlZXBBc3BlY3QgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy50b3VjaFJhZGl1cyA9IHRvdWNoUmFkaXVzO1xyXG4gICAgaWYgKHRvdWNoUmFkaXVzID09PSB2b2lkIDApIHtcclxuICAgICAgdGhpcy50b3VjaFJhZGl1cyA9IDIwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5taW5XaWR0aCA9IG1pbldpZHRoO1xyXG4gICAgdGhpcy5taW5IZWlnaHQgPSBtaW5IZWlnaHQ7XHJcbiAgICB0aGlzLmFzcGVjdFJhdGlvID0gMDtcclxuICAgIHRoaXMuY3VycmVudERyYWdUb3VjaGVzID0gW107XHJcbiAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICB0aGlzLnJhdGlvVyA9IDE7XHJcbiAgICB0aGlzLnJhdGlvSCA9IDE7XHJcbiAgICB0aGlzLmZpbGVUeXBlID0gY3JvcHBlclNldHRpbmdzLmZpbGVUeXBlO1xyXG4gICAgdGhpcy5pbWFnZVNldCA9IGZhbHNlO1xyXG4gICAgdGhpcy5wb2ludFBvb2wgPSBuZXcgUG9pbnRQb29sKDIwMCk7XHJcblxyXG4gICAgdGhpcy50bCA9IG5ldyBDb3JuZXJNYXJrZXIoeCwgeSwgdG91Y2hSYWRpdXMsIHRoaXMuY3JvcHBlclNldHRpbmdzKTtcclxuICAgIHRoaXMudHIgPSBuZXcgQ29ybmVyTWFya2VyKHggKyB3aWR0aCwgeSwgdG91Y2hSYWRpdXMsIHRoaXMuY3JvcHBlclNldHRpbmdzKTtcclxuICAgIHRoaXMuYmwgPSBuZXcgQ29ybmVyTWFya2VyKFxyXG4gICAgICB4LFxyXG4gICAgICB5ICsgaGVpZ2h0LFxyXG4gICAgICB0b3VjaFJhZGl1cyxcclxuICAgICAgdGhpcy5jcm9wcGVyU2V0dGluZ3NcclxuICAgICk7XHJcbiAgICB0aGlzLmJyID0gbmV3IENvcm5lck1hcmtlcihcclxuICAgICAgeCArIHdpZHRoLFxyXG4gICAgICB5ICsgaGVpZ2h0LFxyXG4gICAgICB0b3VjaFJhZGl1cyxcclxuICAgICAgdGhpcy5jcm9wcGVyU2V0dGluZ3NcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy50bC5hZGRIb3Jpem9udGFsTmVpZ2hib3VyKHRoaXMudHIpO1xyXG4gICAgdGhpcy50bC5hZGRWZXJ0aWNhbE5laWdoYm91cih0aGlzLmJsKTtcclxuICAgIHRoaXMudHIuYWRkSG9yaXpvbnRhbE5laWdoYm91cih0aGlzLnRsKTtcclxuICAgIHRoaXMudHIuYWRkVmVydGljYWxOZWlnaGJvdXIodGhpcy5icik7XHJcbiAgICB0aGlzLmJsLmFkZEhvcml6b250YWxOZWlnaGJvdXIodGhpcy5icik7XHJcbiAgICB0aGlzLmJsLmFkZFZlcnRpY2FsTmVpZ2hib3VyKHRoaXMudGwpO1xyXG4gICAgdGhpcy5ici5hZGRIb3Jpem9udGFsTmVpZ2hib3VyKHRoaXMuYmwpO1xyXG4gICAgdGhpcy5ici5hZGRWZXJ0aWNhbE5laWdoYm91cih0aGlzLnRyKTtcclxuICAgIHRoaXMubWFya2VycyA9IFt0aGlzLnRsLCB0aGlzLnRyLCB0aGlzLmJsLCB0aGlzLmJyXTtcclxuXHJcbiAgICB0aGlzLmNlbnRlciA9IG5ldyBEcmFnTWFya2VyKFxyXG4gICAgICB4ICsgd2lkdGggLyAyLFxyXG4gICAgICB5ICsgaGVpZ2h0IC8gMixcclxuICAgICAgY2VudGVyVG91Y2hSYWRpdXMsXHJcbiAgICAgIHRoaXMuY3JvcHBlclNldHRpbmdzXHJcbiAgICApO1xyXG4gICAgdGhpcy5hc3BlY3RSYXRpbyA9IGhlaWdodCAvIHdpZHRoO1xyXG4gICAgdGhpcy5jcm9wcGVkSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuY3VycmVudGx5SW50ZXJhY3RpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuY3JvcFdpZHRoID0gY3JvcHBlZFdpZHRoO1xyXG4gICAgdGhpcy5jcm9wSGVpZ2h0ID0gY3JvcHBlZEhlaWdodDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2lnbih4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKCt4ID09PSB4KSB7XHJcbiAgICAgIHJldHVybiB4ID09PSAwID8geCA6IHggPiAwID8gMSA6IC0xO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE5hTjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0TW91c2VQb3MoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZXZ0OiBNb3VzZUV2ZW50KTogUG9pbnQge1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KFxyXG4gICAgICBldnQuY2xpZW50WCAtIHJlY3QubGVmdCxcclxuICAgICAgZXZ0LmNsaWVudFkgLSByZWN0LnRvcFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VG91Y2hQb3MoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgdG91Y2g6IFRvdWNoKTogUG9pbnQge1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KFxyXG4gICAgICB0b3VjaC5jbGllbnRYIC0gcmVjdC5sZWZ0LFxyXG4gICAgICB0b3VjaC5jbGllbnRZIC0gcmVjdC50b3BcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRldGVjdFZlcnRpY2FsU3F1YXNoKFxyXG4gICAgaW1nOiBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTENhbnZhc0VsZW1lbnQgfCBIVE1MVmlkZW9FbGVtZW50XHJcbiAgKSB7XHJcbiAgICBjb25zdCBpaCA9IGltZy5oZWlnaHQ7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIGNhbnZhcy53aWR0aCA9IDE7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaWg7XHJcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XHJcbiAgICBjb25zdCBpbWFnZURhdGE6IGFueSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMSwgaWgpO1xyXG4gICAgaWYgKGltYWdlRGF0YSkge1xyXG4gICAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGE7XHJcbiAgICAgIC8vIHNlYXJjaCBpbWFnZSBlZGdlIHBpeGVsIHBvc2l0aW9uIGluIGNhc2UgaXQgaXMgc3F1YXNoZWQgdmVydGljYWxseS5cclxuICAgICAgbGV0IHN5ID0gMDtcclxuICAgICAgbGV0IGV5ID0gaWg7XHJcbiAgICAgIGxldCBweSA9IGloO1xyXG4gICAgICB3aGlsZSAocHkgPiBzeSkge1xyXG4gICAgICAgIGNvbnN0IGFscGhhID0gZGF0YVsocHkgLSAxKSAqIDQgKyAzXTtcclxuICAgICAgICBpZiAoYWxwaGEgPT09IDApIHtcclxuICAgICAgICAgIGV5ID0gcHk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN5ID0gcHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXHJcbiAgICAgICAgcHkgPSAoZXkgKyBzeSkgPj4gMTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByYXRpbyA9IHB5IC8gaWg7XHJcbiAgICAgIHJldHVybiByYXRpbyA9PT0gMCA/IDEgOiByYXRpbztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXREYXRhVXJpTWltZVR5cGUoZGF0YVVyaTogc3RyaW5nKSB7XHJcbiAgICAvLyBHZXQgYSBzdWJzdHJpbmcgYmVjYXVzZSB0aGUgcmVnZXggZG9lcyBub3QgcGVyZm9ybSB3ZWxsIG9uIHZlcnkgbGFyZ2Ugc3RyaW5ncy5cclxuICAgIC8vIENhdGVyIGZvciBvcHRpb25hbCBjaGFyc2V0LiBMZW5ndGggNTAgc2hvb3VsZCBiZSBlbm91Z2guXHJcbiAgICBjb25zdCBkYXRhVXJpU3Vic3RyaW5nID0gZGF0YVVyaS5zdWJzdHJpbmcoMCwgNTApO1xyXG4gICAgbGV0IG1pbWVUeXBlID0gJ2ltYWdlL3BuZyc7XHJcbiAgICAvLyBkYXRhLXVyaSBzY2hlbWVcclxuICAgIC8vIGRhdGE6WzxtZWRpYSB0eXBlPl1bO2NoYXJzZXQ9PGNoYXJhY3RlciBzZXQ+XVs7YmFzZTY0XSw8ZGF0YT5cclxuICAgIGNvbnN0IHJlZ0V4ID0gUmVnRXhwKFxyXG4gICAgICAvXihkYXRhOikoW1xcd1xcL1xcK10rKTsoY2hhcnNldD1bXFx3LV0rfGJhc2U2NCkuKiwoLiopL2dpXHJcbiAgICApO1xyXG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlZ0V4LmV4ZWMoZGF0YVVyaVN1YnN0cmluZyk7XHJcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzWzJdKSB7XHJcbiAgICAgIG1pbWVUeXBlID0gbWF0Y2hlc1syXTtcclxuICAgICAgaWYgKG1pbWVUeXBlID09PSAnaW1hZ2UvanBnJykge1xyXG4gICAgICAgIG1pbWVUeXBlID0gJ2ltYWdlL2pwZWcnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWltZVR5cGU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcHJlcGFyZShjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLmJ1ZmZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgdGhpcy5jcm9wQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblxyXG4gICAgLy8gdG9kbyBnZXQgbW9yZSByZWxpYWJsZSBwYXJlbnQgd2lkdGggdmFsdWUuXHJcbiAgICBjb25zdCByZXNwb25zaXZlV2lkdGg6IG51bWJlciA9IGNhbnZhcy5wYXJlbnRFbGVtZW50XHJcbiAgICAgID8gY2FudmFzLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGhcclxuICAgICAgOiAwO1xyXG4gICAgaWYgKHJlc3BvbnNpdmVXaWR0aCA+IDAgJiYgdGhpcy5jcm9wcGVyU2V0dGluZ3MuZHluYW1pY1NpemluZykge1xyXG4gICAgICB0aGlzLmNyb3BDYW52YXMud2lkdGggPSByZXNwb25zaXZlV2lkdGg7XHJcbiAgICAgIHRoaXMuYnVmZmVyLndpZHRoID0gcmVzcG9uc2l2ZVdpZHRoO1xyXG4gICAgICBjYW52YXMud2lkdGggPSByZXNwb25zaXZlV2lkdGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNyb3BDYW52YXMud2lkdGggPSB0aGlzLmNyb3BXaWR0aDtcclxuICAgICAgdGhpcy5idWZmZXIud2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcm9wQ2FudmFzLmhlaWdodCA9IHRoaXMuY3JvcEhlaWdodDtcclxuICAgIHRoaXMuYnVmZmVyLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgdGhpcy5kcmF3KHRoaXMuY3R4KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVTZXR0aW5ncyhjcm9wcGVyU2V0dGluZ3M6IENyb3BwZXJTZXR0aW5ncykge1xyXG4gICAgdGhpcy5jcm9wcGVyU2V0dGluZ3MgPSBjcm9wcGVyU2V0dGluZ3M7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzaXplQ2FudmFzKFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgc2V0SW1hZ2U6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNyb3BDYW52YXMud2lkdGggPSB0aGlzLndpZHRoID0gdGhpcy5jYW52YXNXaWR0aCA9IHRoaXMuYnVmZmVyLndpZHRoID0gd2lkdGg7XHJcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNyb3BDYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgPSB0aGlzLmNhbnZhc0hlaWdodCA9IHRoaXMuYnVmZmVyLmhlaWdodCA9IGhlaWdodDtcclxuICAgIGlmIChzZXRJbWFnZSkge1xyXG4gICAgICB0aGlzLnNldEltYWdlKHRoaXMuc3JjSW1hZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZXRJbWFnZSh1bmRlZmluZWQpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGJvdW5kczogQm91bmRzID0gdGhpcy5nZXRCb3VuZHMoKTtcclxuICAgIGlmICh0aGlzLnNyY0ltYWdlKSB7XHJcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQpO1xyXG4gICAgICBjb25zdCBzb3VyY2VBc3BlY3Q6IG51bWJlciA9IHRoaXMuc3JjSW1hZ2UuaGVpZ2h0IC8gdGhpcy5zcmNJbWFnZS53aWR0aDtcclxuICAgICAgY29uc3QgY2FudmFzQXNwZWN0OiBudW1iZXIgPSB0aGlzLmNhbnZhc0hlaWdodCAvIHRoaXMuY2FudmFzV2lkdGg7XHJcbiAgICAgIGxldCB3OiBudW1iZXIgPSB0aGlzLmNhbnZhc1dpZHRoO1xyXG4gICAgICBsZXQgaDogbnVtYmVyID0gdGhpcy5jYW52YXNIZWlnaHQ7XHJcbiAgICAgIGlmIChjYW52YXNBc3BlY3QgPiBzb3VyY2VBc3BlY3QpIHtcclxuICAgICAgICB3ID0gdGhpcy5jYW52YXNXaWR0aDtcclxuICAgICAgICBoID0gdGhpcy5jYW52YXNXaWR0aCAqIHNvdXJjZUFzcGVjdDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBoID0gdGhpcy5jYW52YXNIZWlnaHQ7XHJcbiAgICAgICAgdyA9IHRoaXMuY2FudmFzSGVpZ2h0IC8gc291cmNlQXNwZWN0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmF0aW9XID0gdyAvIHRoaXMuc3JjSW1hZ2Uud2lkdGg7XHJcbiAgICAgIHRoaXMucmF0aW9IID0gaCAvIHRoaXMuc3JjSW1hZ2UuaGVpZ2h0O1xyXG4gICAgICBpZiAoY2FudmFzQXNwZWN0IDwgc291cmNlQXNwZWN0KSB7XHJcbiAgICAgICAgdGhpcy5kcmF3SW1hZ2VJT1NGaXgoXHJcbiAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICB0aGlzLnNyY0ltYWdlLFxyXG4gICAgICAgICAgMCxcclxuICAgICAgICAgIDAsXHJcbiAgICAgICAgICB0aGlzLnNyY0ltYWdlLndpZHRoLFxyXG4gICAgICAgICAgdGhpcy5zcmNJbWFnZS5oZWlnaHQsXHJcbiAgICAgICAgICB0aGlzLmJ1ZmZlci53aWR0aCAvIDIgLSB3IC8gMixcclxuICAgICAgICAgIDAsXHJcbiAgICAgICAgICB3LFxyXG4gICAgICAgICAgaFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kcmF3SW1hZ2VJT1NGaXgoXHJcbiAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICB0aGlzLnNyY0ltYWdlLFxyXG4gICAgICAgICAgMCxcclxuICAgICAgICAgIDAsXHJcbiAgICAgICAgICB0aGlzLnNyY0ltYWdlLndpZHRoLFxyXG4gICAgICAgICAgdGhpcy5zcmNJbWFnZS5oZWlnaHQsXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgdGhpcy5idWZmZXIuaGVpZ2h0IC8gMiAtIGggLyAyLFxyXG4gICAgICAgICAgdyxcclxuICAgICAgICAgIGhcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgICh0aGlzLmJ1ZmZlci5nZXRDb250ZXh0KCcyZCcpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkuZHJhd0ltYWdlKFxyXG4gICAgICAgIHRoaXMuY2FudmFzLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgMCxcclxuICAgICAgICB0aGlzLmNhbnZhc1dpZHRoLFxyXG4gICAgICAgIHRoaXMuY2FudmFzSGVpZ2h0XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjdHgubGluZVdpZHRoID0gdGhpcy5jcm9wcGVyU2V0dGluZ3MuY3JvcHBlckRyYXdTZXR0aW5ncy5zdHJva2VXaWR0aDtcclxuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jcm9wcGVyU2V0dGluZ3MuY3JvcHBlckRyYXdTZXR0aW5ncy5zdHJva2VDb2xvcjtcclxuXHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNyb3BwZXJTZXR0aW5ncy5jcm9wcGVyRHJhd1NldHRpbmdzLmJhY2tncm91bmRGaWxsQ29sb3I7XHJcbiAgICAgIGlmICghdGhpcy5jcm9wcGVyU2V0dGluZ3Mucm91bmRlZCkge1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhc1dpZHRoLCB0aGlzLmNhbnZhc0hlaWdodCk7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShcclxuICAgICAgICAgIHRoaXMuYnVmZmVyLFxyXG4gICAgICAgICAgYm91bmRzLmxlZnQsXHJcbiAgICAgICAgICBib3VuZHMudG9wLFxyXG4gICAgICAgICAgTWF0aC5tYXgoYm91bmRzLndpZHRoLCAxKSxcclxuICAgICAgICAgIE1hdGgubWF4KGJvdW5kcy5oZWlnaHQsIDEpLFxyXG4gICAgICAgICAgYm91bmRzLmxlZnQsXHJcbiAgICAgICAgICBib3VuZHMudG9wLFxyXG4gICAgICAgICAgYm91bmRzLndpZHRoLFxyXG4gICAgICAgICAgYm91bmRzLmhlaWdodFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY3R4LnN0cm9rZVJlY3QoYm91bmRzLmxlZnQsIGJvdW5kcy50b3AsIGJvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5hcmMoXHJcbiAgICAgICAgICBib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAvIDIsXHJcbiAgICAgICAgICBib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAvIDIsXHJcbiAgICAgICAgICBib3VuZHMud2lkdGggLyAyLFxyXG4gICAgICAgICAgMCxcclxuICAgICAgICAgIDIgKiBNYXRoLlBJXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgY3R4LmNsaXAoKTtcclxuICAgICAgICBpZiAoY2FudmFzQXNwZWN0IDwgc291cmNlQXNwZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLmRyYXdJbWFnZUlPU0ZpeChcclxuICAgICAgICAgICAgY3R4LFxyXG4gICAgICAgICAgICB0aGlzLnNyY0ltYWdlLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLnNyY0ltYWdlLndpZHRoLFxyXG4gICAgICAgICAgICB0aGlzLnNyY0ltYWdlLmhlaWdodCxcclxuICAgICAgICAgICAgdGhpcy5idWZmZXIud2lkdGggLyAyIC0gdyAvIDIsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIHcsXHJcbiAgICAgICAgICAgIGhcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZHJhd0ltYWdlSU9TRml4KFxyXG4gICAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICAgIHRoaXMuc3JjSW1hZ2UsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIHRoaXMuc3JjSW1hZ2Uud2lkdGgsXHJcbiAgICAgICAgICAgIHRoaXMuc3JjSW1hZ2UuaGVpZ2h0LFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5oZWlnaHQgLyAyIC0gaCAvIDIsXHJcbiAgICAgICAgICAgIHcsXHJcbiAgICAgICAgICAgIGhcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBtYXJrZXI6IENvcm5lck1hcmtlcjtcclxuXHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbWFya2VyID0gdGhpcy5tYXJrZXJzW2ldO1xyXG4gICAgICAgIG1hcmtlci5kcmF3KGN0eCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jZW50ZXIuZHJhdyhjdHgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDE5MiwxOTIsMTkyLDEpJztcclxuICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYWdDZW50ZXIoeDogbnVtYmVyLCB5OiBudW1iZXIsIG1hcmtlcjogRHJhZ01hcmtlcikge1xyXG4gICAgY29uc3QgYm91bmRzID0gdGhpcy5nZXRCb3VuZHMoKTtcclxuICAgIGNvbnN0IGxlZnQgPSB4IC0gYm91bmRzLndpZHRoIC8gMjtcclxuICAgIGNvbnN0IHJpZ2h0ID0geCArIGJvdW5kcy53aWR0aCAvIDI7XHJcbiAgICBjb25zdCB0b3AgPSB5IC0gYm91bmRzLmhlaWdodCAvIDI7XHJcbiAgICBjb25zdCBib3R0b20gPSB5ICsgYm91bmRzLmhlaWdodCAvIDI7XHJcbiAgICBpZiAocmlnaHQgPj0gdGhpcy5tYXhYQ2xhbXApIHtcclxuICAgICAgeCA9IHRoaXMubWF4WENsYW1wIC0gYm91bmRzLndpZHRoIC8gMjtcclxuICAgIH1cclxuICAgIGlmIChsZWZ0IDw9IHRoaXMubWluWENsYW1wKSB7XHJcbiAgICAgIHggPSBib3VuZHMud2lkdGggLyAyICsgdGhpcy5taW5YQ2xhbXA7XHJcbiAgICB9XHJcbiAgICBpZiAodG9wIDwgdGhpcy5taW5ZQ2xhbXApIHtcclxuICAgICAgeSA9IGJvdW5kcy5oZWlnaHQgLyAyICsgdGhpcy5taW5ZQ2xhbXA7XHJcbiAgICB9XHJcbiAgICBpZiAoYm90dG9tID49IHRoaXMubWF4WUNsYW1wKSB7XHJcbiAgICAgIHkgPSB0aGlzLm1heFlDbGFtcCAtIGJvdW5kcy5oZWlnaHQgLyAyO1xyXG4gICAgfVxyXG4gICAgdGhpcy50bC5tb3ZlWCh4IC0gYm91bmRzLndpZHRoIC8gMik7XHJcbiAgICB0aGlzLnRsLm1vdmVZKHkgLSBib3VuZHMuaGVpZ2h0IC8gMik7XHJcbiAgICB0aGlzLnRyLm1vdmVYKHggKyBib3VuZHMud2lkdGggLyAyKTtcclxuICAgIHRoaXMudHIubW92ZVkoeSAtIGJvdW5kcy5oZWlnaHQgLyAyKTtcclxuICAgIHRoaXMuYmwubW92ZVgoeCAtIGJvdW5kcy53aWR0aCAvIDIpO1xyXG4gICAgdGhpcy5ibC5tb3ZlWSh5ICsgYm91bmRzLmhlaWdodCAvIDIpO1xyXG4gICAgdGhpcy5ici5tb3ZlWCh4ICsgYm91bmRzLndpZHRoIC8gMik7XHJcbiAgICB0aGlzLmJyLm1vdmVZKHkgKyBib3VuZHMuaGVpZ2h0IC8gMik7XHJcbiAgICBtYXJrZXIuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZW5mb3JjZU1pblNpemUoeDogbnVtYmVyLCB5OiBudW1iZXIsIG1hcmtlcjogQ29ybmVyTWFya2VyKSB7XHJcbiAgICBjb25zdCB4TGVuZ3RoID0geCAtIG1hcmtlci5nZXRIb3Jpem9udGFsTmVpZ2hib3VyKCkucG9zaXRpb24ueDtcclxuICAgIGNvbnN0IHlMZW5ndGggPSB5IC0gbWFya2VyLmdldFZlcnRpY2FsTmVpZ2hib3VyKCkucG9zaXRpb24ueTtcclxuICAgIGNvbnN0IHhPdmVyID0gdGhpcy5taW5XaWR0aCAtIE1hdGguYWJzKHhMZW5ndGgpO1xyXG4gICAgY29uc3QgeU92ZXIgPSB0aGlzLm1pbkhlaWdodCAtIE1hdGguYWJzKHlMZW5ndGgpO1xyXG5cclxuICAgIGlmICh4TGVuZ3RoID09PSAwIHx8IHlMZW5ndGggPT09IDApIHtcclxuICAgICAgeCA9IG1hcmtlci5wb3NpdGlvbi54O1xyXG4gICAgICB5ID0gbWFya2VyLnBvc2l0aW9uLnk7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyh4LCB5KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5rZWVwQXNwZWN0KSB7XHJcbiAgICAgIGlmICh4T3ZlciA+IDAgJiYgeU92ZXIgLyB0aGlzLmFzcGVjdFJhdGlvID4gMCkge1xyXG4gICAgICAgIGlmICh4T3ZlciA+IHlPdmVyIC8gdGhpcy5hc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgaWYgKHhMZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgIHggLT0geE92ZXI7XHJcblxyXG4gICAgICAgICAgICBpZiAoeUxlbmd0aCA8IDApIHtcclxuICAgICAgICAgICAgICB5IC09IHhPdmVyICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB5ICs9IHhPdmVyICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeCArPSB4T3ZlcjtcclxuICAgICAgICAgICAgaWYgKHlMZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgeSAtPSB4T3ZlciAqIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgeSArPSB4T3ZlciAqIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHlMZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgIHkgLT0geU92ZXI7XHJcblxyXG4gICAgICAgICAgICBpZiAoeExlbmd0aCA8IDApIHtcclxuICAgICAgICAgICAgICB4IC09IHlPdmVyIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB4ICs9IHlPdmVyIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeSArPSB5T3ZlcjtcclxuICAgICAgICAgICAgaWYgKHhMZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgeCAtPSB5T3ZlciAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgeCArPSB5T3ZlciAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHhPdmVyID4gMCkge1xyXG4gICAgICAgICAgaWYgKHhMZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgIHggLT0geE92ZXI7XHJcbiAgICAgICAgICAgIGlmICh5TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgIHkgLT0geE92ZXIgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHkgKz0geE92ZXIgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB4ICs9IHhPdmVyO1xyXG4gICAgICAgICAgICBpZiAoeUxlbmd0aCA8IDApIHtcclxuICAgICAgICAgICAgICB5IC09IHhPdmVyICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB5ICs9IHhPdmVyICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoeU92ZXIgPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICh5TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgIHkgLT0geU92ZXI7XHJcblxyXG4gICAgICAgICAgICAgIGlmICh4TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgeCAtPSB5T3ZlciAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHggKz0geU92ZXIgLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB5ICs9IHlPdmVyO1xyXG4gICAgICAgICAgICAgIGlmICh4TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgeCAtPSB5T3ZlciAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHggKz0geU92ZXIgLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHhPdmVyID4gMCkge1xyXG4gICAgICAgIGlmICh4TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgeCAtPSB4T3ZlcjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgeCArPSB4T3ZlcjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHlPdmVyID4gMCkge1xyXG4gICAgICAgIGlmICh5TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgeSAtPSB5T3ZlcjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgeSArPSB5T3ZlcjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHggPCB0aGlzLm1pblhDbGFtcCB8fFxyXG4gICAgICB4ID4gdGhpcy5tYXhYQ2xhbXAgfHxcclxuICAgICAgeSA8IHRoaXMubWluWUNsYW1wIHx8XHJcbiAgICAgIHkgPiB0aGlzLm1heFlDbGFtcFxyXG4gICAgKSB7XHJcbiAgICAgIHggPSBtYXJrZXIucG9zaXRpb24ueDtcclxuICAgICAgeSA9IG1hcmtlci5wb3NpdGlvbi55O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KHgsIHkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRyYWdDb3JuZXIoeDogbnVtYmVyLCB5OiBudW1iZXIsIG1hcmtlcjogQ29ybmVyTWFya2VyKSB7XHJcbiAgICBsZXQgaVggPSAwO1xyXG4gICAgbGV0IGlZID0gMDtcclxuICAgIGxldCBheCA9IDA7XHJcbiAgICBsZXQgYXkgPSAwO1xyXG4gICAgbGV0IG5ld0hlaWdodCA9IDA7XHJcbiAgICBsZXQgbmV3V2lkdGggPSAwO1xyXG4gICAgbGV0IG5ld1kgPSAwO1xyXG4gICAgbGV0IG5ld1ggPSAwO1xyXG4gICAgbGV0IGFuY2hvck1hcmtlcjogQ29ybmVyTWFya2VyO1xyXG4gICAgbGV0IGZvbGQgPSAwO1xyXG5cclxuICAgIGlmICh0aGlzLmtlZXBBc3BlY3QpIHtcclxuICAgICAgYW5jaG9yTWFya2VyID0gbWFya2VyLmdldEhvcml6b250YWxOZWlnaGJvdXIoKS5nZXRWZXJ0aWNhbE5laWdoYm91cigpO1xyXG4gICAgICBheCA9IGFuY2hvck1hcmtlci5wb3NpdGlvbi54O1xyXG4gICAgICBheSA9IGFuY2hvck1hcmtlci5wb3NpdGlvbi55O1xyXG4gICAgICBpZiAoeCA8PSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCkge1xyXG4gICAgICAgIGlmICh5IDw9IGFuY2hvck1hcmtlci5wb3NpdGlvbi55KSB7XHJcbiAgICAgICAgICBpWCA9IGF4IC0gMTAwIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgIGlZID0gYXkgLSAoMTAwIC8gdGhpcy5hc3BlY3RSYXRpbykgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgZm9sZCA9IHRoaXMuZ2V0U2lkZShcclxuICAgICAgICAgICAgbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyhpWCwgaVkpLFxyXG4gICAgICAgICAgICBhbmNob3JNYXJrZXIucG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coeCwgeSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBpZiAoZm9sZCA+IDApIHtcclxuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5hYnMoYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSB5KTtcclxuICAgICAgICAgICAgbmV3V2lkdGggPSBuZXdIZWlnaHQgLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICBuZXdZID0gYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIG5ld1ggPSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCAtIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBtaW4gPSB0aGlzLmVuZm9yY2VNaW5TaXplKG5ld1gsIG5ld1ksIG1hcmtlcik7XHJcbiAgICAgICAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGZvbGQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgbmV3V2lkdGggPSBNYXRoLmFicyhhbmNob3JNYXJrZXIucG9zaXRpb24ueCAtIHgpO1xyXG4gICAgICAgICAgICAgIG5ld0hlaWdodCA9IG5ld1dpZHRoICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgICBuZXdZID0gYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgbmV3WCA9IGFuY2hvck1hcmtlci5wb3NpdGlvbi54IC0gbmV3V2lkdGg7XHJcbiAgICAgICAgICAgICAgY29uc3QgbWluID0gdGhpcy5lbmZvcmNlTWluU2l6ZShuZXdYLCBuZXdZLCBtYXJrZXIpO1xyXG4gICAgICAgICAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgICAgICAgICAgbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLnJldHVyblBvaW50KG1pbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaVggPSBheCAtIDEwMCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICBpWSA9IGF5ICsgKDEwMCAvIHRoaXMuYXNwZWN0UmF0aW8pICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgIGZvbGQgPSB0aGlzLmdldFNpZGUoXHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coaVgsIGlZKSxcclxuICAgICAgICAgICAgYW5jaG9yTWFya2VyLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KHgsIHkpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKGZvbGQgPiAwKSB7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gTWF0aC5hYnMoYW5jaG9yTWFya2VyLnBvc2l0aW9uLnggLSB4KTtcclxuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICBuZXdZID0gYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgKyBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIG5ld1ggPSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCAtIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBtaW4gPSB0aGlzLmVuZm9yY2VNaW5TaXplKG5ld1gsIG5ld1ksIG1hcmtlcik7XHJcbiAgICAgICAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGZvbGQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5hYnMoYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSB5KTtcclxuICAgICAgICAgICAgICBuZXdXaWR0aCA9IG5ld0hlaWdodCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgbmV3WSA9IGFuY2hvck1hcmtlci5wb3NpdGlvbi55ICsgbmV3SGVpZ2h0O1xyXG4gICAgICAgICAgICAgIG5ld1ggPSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCAtIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICAgIGNvbnN0IG1pbiA9IHRoaXMuZW5mb3JjZU1pblNpemUobmV3WCwgbmV3WSwgbWFya2VyKTtcclxuICAgICAgICAgICAgICBtYXJrZXIubW92ZShtaW4ueCwgbWluLnkpO1xyXG4gICAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh5IDw9IGFuY2hvck1hcmtlci5wb3NpdGlvbi55KSB7XHJcbiAgICAgICAgICBpWCA9IGF4ICsgMTAwIC8gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgIGlZID0gYXkgLSAoMTAwIC8gdGhpcy5hc3BlY3RSYXRpbykgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgZm9sZCA9IHRoaXMuZ2V0U2lkZShcclxuICAgICAgICAgICAgbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyhpWCwgaVkpLFxyXG4gICAgICAgICAgICBhbmNob3JNYXJrZXIucG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coeCwgeSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBpZiAoZm9sZCA8IDApIHtcclxuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5hYnMoYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSB5KTtcclxuICAgICAgICAgICAgbmV3V2lkdGggPSBuZXdIZWlnaHQgLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICBuZXdZID0gYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIG5ld1ggPSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCArIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBtaW4gPSB0aGlzLmVuZm9yY2VNaW5TaXplKG5ld1gsIG5ld1ksIG1hcmtlcik7XHJcbiAgICAgICAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGZvbGQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgbmV3V2lkdGggPSBNYXRoLmFicyhhbmNob3JNYXJrZXIucG9zaXRpb24ueCAtIHgpO1xyXG4gICAgICAgICAgICAgIG5ld0hlaWdodCA9IG5ld1dpZHRoICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgICBuZXdZID0gYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgbmV3WCA9IGFuY2hvck1hcmtlci5wb3NpdGlvbi54ICsgbmV3V2lkdGg7XHJcbiAgICAgICAgICAgICAgY29uc3QgbWluID0gdGhpcy5lbmZvcmNlTWluU2l6ZShuZXdYLCBuZXdZLCBtYXJrZXIpO1xyXG4gICAgICAgICAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgICAgICAgICAgbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLnJldHVyblBvaW50KG1pbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaVggPSBheCArIDEwMCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICBpWSA9IGF5ICsgKDEwMCAvIHRoaXMuYXNwZWN0UmF0aW8pICogdGhpcy5hc3BlY3RSYXRpbztcclxuICAgICAgICAgIGZvbGQgPSB0aGlzLmdldFNpZGUoXHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coaVgsIGlZKSxcclxuICAgICAgICAgICAgYW5jaG9yTWFya2VyLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KHgsIHkpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKGZvbGQgPCAwKSB7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gTWF0aC5hYnMoYW5jaG9yTWFya2VyLnBvc2l0aW9uLnggLSB4KTtcclxuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICBuZXdZID0gYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgKyBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIG5ld1ggPSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCArIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBtaW4gPSB0aGlzLmVuZm9yY2VNaW5TaXplKG5ld1gsIG5ld1ksIG1hcmtlcik7XHJcbiAgICAgICAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGZvbGQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5hYnMoYW5jaG9yTWFya2VyLnBvc2l0aW9uLnkgLSB5KTtcclxuICAgICAgICAgICAgICBuZXdXaWR0aCA9IG5ld0hlaWdodCAvIHRoaXMuYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgbmV3WSA9IGFuY2hvck1hcmtlci5wb3NpdGlvbi55ICsgbmV3SGVpZ2h0O1xyXG4gICAgICAgICAgICAgIG5ld1ggPSBhbmNob3JNYXJrZXIucG9zaXRpb24ueCArIG5ld1dpZHRoO1xyXG4gICAgICAgICAgICAgIGNvbnN0IG1pbiA9IHRoaXMuZW5mb3JjZU1pblNpemUobmV3WCwgbmV3WSwgbWFya2VyKTtcclxuICAgICAgICAgICAgICBtYXJrZXIubW92ZShtaW4ueCwgbWluLnkpO1xyXG4gICAgICAgICAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBtaW4gPSB0aGlzLmVuZm9yY2VNaW5TaXplKHgsIHksIG1hcmtlcik7XHJcbiAgICAgIG1hcmtlci5tb3ZlKG1pbi54LCBtaW4ueSk7XHJcbiAgICAgIG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5yZXR1cm5Qb2ludChtaW4pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jZW50ZXIucmVjYWxjdWxhdGVQb3NpdGlvbih0aGlzLmdldEJvdW5kcygpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTaWRlKGE6IFBvaW50LCBiOiBQb2ludCwgYzogUG9pbnQpOiBudW1iZXIge1xyXG4gICAgY29uc3QgbjogbnVtYmVyID0gdGhpcy5zaWduKFxyXG4gICAgICAoYi54IC0gYS54KSAqIChjLnkgLSBhLnkpIC0gKGIueSAtIGEueSkgKiAoYy54IC0gYS54KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBUT0RPIG1vdmUgdGhlIHJldHVybiBvZiB0aGUgcG9vbHMgdG8gb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uXHJcbiAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UucmV0dXJuUG9pbnQoYSk7XHJcbiAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UucmV0dXJuUG9pbnQoYyk7XHJcbiAgICByZXR1cm4gbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBoYW5kbGVSZWxlYXNlKG5ld0Nyb3BUb3VjaDogQ3JvcFRvdWNoKSB7XHJcbiAgICBpZiAobmV3Q3JvcFRvdWNoID09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgaWYgKG5ld0Nyb3BUb3VjaC5pZCA9PT0gdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXNba10uaWQpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnREcmFnVG91Y2hlc1trXS5kcmFnSGFuZGxlLnNldERyYWcoZmFsc2UpO1xyXG4gICAgICAgIGluZGV4ID0gaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMuZHJhdyh0aGlzLmN0eCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlTW92ZShuZXdDcm9wVG91Y2g6IENyb3BUb3VjaCkge1xyXG4gICAgbGV0IG1hdGNoZWQgPSBmYWxzZTtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMuY3VycmVudERyYWdUb3VjaGVzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBuZXdDcm9wVG91Y2guaWQgPT09IHRoaXMuY3VycmVudERyYWdUb3VjaGVzW2tdLmlkICYmXHJcbiAgICAgICAgdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXNba10uZHJhZ0hhbmRsZSAhPSBudWxsXHJcbiAgICAgICkge1xyXG4gICAgICAgIGNvbnN0IGRyYWdUb3VjaDogQ3JvcFRvdWNoID0gdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXNba107XHJcbiAgICAgICAgY29uc3QgY2xhbXBlZFBvc2l0aW9ucyA9IHRoaXMuY2xhbXBQb3NpdGlvbihcclxuICAgICAgICAgIG5ld0Nyb3BUb3VjaC54IC0gZHJhZ1RvdWNoLmRyYWdIYW5kbGUub2Zmc2V0LngsXHJcbiAgICAgICAgICBuZXdDcm9wVG91Y2gueSAtIGRyYWdUb3VjaC5kcmFnSGFuZGxlLm9mZnNldC55XHJcbiAgICAgICAgKTtcclxuICAgICAgICBuZXdDcm9wVG91Y2gueCA9IGNsYW1wZWRQb3NpdGlvbnMueDtcclxuICAgICAgICBuZXdDcm9wVG91Y2gueSA9IGNsYW1wZWRQb3NpdGlvbnMueTtcclxuICAgICAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UucmV0dXJuUG9pbnQoY2xhbXBlZFBvc2l0aW9ucyk7XHJcbiAgICAgICAgaWYgKGRyYWdUb3VjaC5kcmFnSGFuZGxlIGluc3RhbmNlb2YgQ29ybmVyTWFya2VyKSB7XHJcbiAgICAgICAgICB0aGlzLmRyYWdDb3JuZXIoXHJcbiAgICAgICAgICAgIG5ld0Nyb3BUb3VjaC54LFxyXG4gICAgICAgICAgICBuZXdDcm9wVG91Y2gueSxcclxuICAgICAgICAgICAgZHJhZ1RvdWNoLmRyYWdIYW5kbGUgYXMgQ29ybmVyTWFya2VyXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRyYWdDZW50ZXIoXHJcbiAgICAgICAgICAgIG5ld0Nyb3BUb3VjaC54LFxyXG4gICAgICAgICAgICBuZXdDcm9wVG91Y2gueSxcclxuICAgICAgICAgICAgZHJhZ1RvdWNoLmRyYWdIYW5kbGUgYXMgRHJhZ01hcmtlclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50bHlJbnRlcmFjdGluZyA9IHRydWU7XHJcbiAgICAgICAgbWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pbWFnZUNyb3BwZXJEYXRhU2hhcmUuc2V0UHJlc3NlZCh0aGlzLmNhbnZhcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghbWF0Y2hlZCkge1xyXG4gICAgICBmb3IgKGNvbnN0IG1hcmtlciBvZiB0aGlzLm1hcmtlcnMpIHtcclxuICAgICAgICBpZiAobWFya2VyLnRvdWNoSW5Cb3VuZHMobmV3Q3JvcFRvdWNoLngsIG5ld0Nyb3BUb3VjaC55KSkge1xyXG4gICAgICAgICAgbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUgPSBtYXJrZXI7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnREcmFnVG91Y2hlcy5wdXNoKG5ld0Nyb3BUb3VjaCk7XHJcbiAgICAgICAgICBtYXJrZXIuc2V0RHJhZyh0cnVlKTtcclxuICAgICAgICAgIG5ld0Nyb3BUb3VjaC5kcmFnSGFuZGxlLm9mZnNldC54ID1cclxuICAgICAgICAgICAgbmV3Q3JvcFRvdWNoLnggLSBuZXdDcm9wVG91Y2guZHJhZ0hhbmRsZS5wb3NpdGlvbi54O1xyXG4gICAgICAgICAgbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUub2Zmc2V0LnkgPVxyXG4gICAgICAgICAgICBuZXdDcm9wVG91Y2gueSAtIG5ld0Nyb3BUb3VjaC5kcmFnSGFuZGxlLnBvc2l0aW9uLnk7XHJcbiAgICAgICAgICB0aGlzLmRyYWdDb3JuZXIoXHJcbiAgICAgICAgICAgIG5ld0Nyb3BUb3VjaC54IC0gbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUub2Zmc2V0LngsXHJcbiAgICAgICAgICAgIG5ld0Nyb3BUb3VjaC55IC0gbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUub2Zmc2V0LnksXHJcbiAgICAgICAgICAgIG5ld0Nyb3BUb3VjaC5kcmFnSGFuZGxlIGFzIENvcm5lck1hcmtlclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUgPT09IG51bGwgfHxcclxuICAgICAgICB0eXBlb2YgbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUgPT09ICd1bmRlZmluZWQnXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmICh0aGlzLmNlbnRlci50b3VjaEluQm91bmRzKG5ld0Nyb3BUb3VjaC54LCBuZXdDcm9wVG91Y2gueSkpIHtcclxuICAgICAgICAgIG5ld0Nyb3BUb3VjaC5kcmFnSGFuZGxlID0gdGhpcy5jZW50ZXI7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnREcmFnVG91Y2hlcy5wdXNoKG5ld0Nyb3BUb3VjaCk7XHJcbiAgICAgICAgICBuZXdDcm9wVG91Y2guZHJhZ0hhbmRsZS5zZXREcmFnKHRydWUpO1xyXG4gICAgICAgICAgbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUub2Zmc2V0LnggPVxyXG4gICAgICAgICAgICBuZXdDcm9wVG91Y2gueCAtIG5ld0Nyb3BUb3VjaC5kcmFnSGFuZGxlLnBvc2l0aW9uLng7XHJcbiAgICAgICAgICBuZXdDcm9wVG91Y2guZHJhZ0hhbmRsZS5vZmZzZXQueSA9XHJcbiAgICAgICAgICAgIG5ld0Nyb3BUb3VjaC55IC0gbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUucG9zaXRpb24ueTtcclxuICAgICAgICAgIHRoaXMuZHJhZ0NlbnRlcihcclxuICAgICAgICAgICAgbmV3Q3JvcFRvdWNoLnggLSBuZXdDcm9wVG91Y2guZHJhZ0hhbmRsZS5vZmZzZXQueCxcclxuICAgICAgICAgICAgbmV3Q3JvcFRvdWNoLnkgLSBuZXdDcm9wVG91Y2guZHJhZ0hhbmRsZS5vZmZzZXQueSxcclxuICAgICAgICAgICAgbmV3Q3JvcFRvdWNoLmRyYWdIYW5kbGUgYXMgRHJhZ01hcmtlclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyB1cGRhdGVDbGFtcEJvdW5kcygpIHtcclxuICAgIGNvbnN0IHNvdXJjZUFzcGVjdCA9IHRoaXMuc3JjSW1hZ2UuaGVpZ2h0IC8gdGhpcy5zcmNJbWFnZS53aWR0aDtcclxuICAgIGNvbnN0IGNhbnZhc0FzcGVjdCA9IHRoaXMuY2FudmFzLmhlaWdodCAvIHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICAgbGV0IHcgPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgIGxldCBoID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICAgaWYgKGNhbnZhc0FzcGVjdCA+IHNvdXJjZUFzcGVjdCkge1xyXG4gICAgICB3ID0gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICAgIGggPSB0aGlzLmNhbnZhcy53aWR0aCAqIHNvdXJjZUFzcGVjdDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGggPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIHcgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyBzb3VyY2VBc3BlY3Q7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1pblhDbGFtcCA9IHRoaXMuY2FudmFzLndpZHRoIC8gMiAtIHcgLyAyO1xyXG4gICAgdGhpcy5taW5ZQ2xhbXAgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gaCAvIDI7XHJcbiAgICB0aGlzLm1heFhDbGFtcCA9IHRoaXMuY2FudmFzLndpZHRoIC8gMiArIHcgLyAyO1xyXG4gICAgdGhpcy5tYXhZQ2xhbXAgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyICsgaCAvIDI7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Q3JvcEJvdW5kcygpIHtcclxuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XHJcbiAgICBib3VuZHMudG9wID0gTWF0aC5yb3VuZCgoYm91bmRzLnRvcCAtIHRoaXMubWluWUNsYW1wKSAvIHRoaXMucmF0aW9IKTtcclxuICAgIGJvdW5kcy5ib3R0b20gPSBNYXRoLnJvdW5kKChib3VuZHMuYm90dG9tIC0gdGhpcy5taW5ZQ2xhbXApIC8gdGhpcy5yYXRpb0gpO1xyXG4gICAgYm91bmRzLmxlZnQgPSBNYXRoLnJvdW5kKChib3VuZHMubGVmdCAtIHRoaXMubWluWENsYW1wKSAvIHRoaXMucmF0aW9XKTtcclxuICAgIGJvdW5kcy5yaWdodCA9IE1hdGgucm91bmQoKGJvdW5kcy5yaWdodCAtIHRoaXMubWluWENsYW1wKSAvIHRoaXMucmF0aW9XKTtcclxuICAgIHJldHVybiBib3VuZHM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2xhbXBQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgaWYgKHggPCB0aGlzLm1pblhDbGFtcCkge1xyXG4gICAgICB4ID0gdGhpcy5taW5YQ2xhbXA7XHJcbiAgICB9XHJcbiAgICBpZiAoeCA+IHRoaXMubWF4WENsYW1wKSB7XHJcbiAgICAgIHggPSB0aGlzLm1heFhDbGFtcDtcclxuICAgIH1cclxuICAgIGlmICh5IDwgdGhpcy5taW5ZQ2xhbXApIHtcclxuICAgICAgeSA9IHRoaXMubWluWUNsYW1wO1xyXG4gICAgfVxyXG4gICAgaWYgKHkgPiB0aGlzLm1heFlDbGFtcCkge1xyXG4gICAgICB5ID0gdGhpcy5tYXhZQ2xhbXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyh4LCB5KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc0ltYWdlU2V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VTZXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0SW1hZ2UoaW1nOiBhbnkpIHtcclxuICAgIHRoaXMuc3JjSW1hZ2UgPSBpbWc7XHJcbiAgICBpZiAoIWltZykge1xyXG4gICAgICB0aGlzLmltYWdlU2V0ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZHJhdyh0aGlzLmN0eCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmltYWdlU2V0ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICBjb25zdCBidWZmZXJDb250ZXh0ID0gdGhpcy5idWZmZXIuZ2V0Q29udGV4dChcclxuICAgICAgICAnMmQnXHJcbiAgICAgICkgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgICBidWZmZXJDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmJ1ZmZlci53aWR0aCwgdGhpcy5idWZmZXIuaGVpZ2h0KTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5jcm9wcGVyU2V0dGluZ3MuZmlsZVR5cGUpIHtcclxuICAgICAgICB0aGlzLmZpbGVUeXBlID0gdGhpcy5nZXREYXRhVXJpTWltZVR5cGUoaW1nLnNyYyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmNyb3BwZXJTZXR0aW5ncy5taW5XaXRoUmVsYXRpdmVUb1Jlc29sdXRpb24pIHtcclxuICAgICAgICB0aGlzLm1pbldpZHRoID1cclxuICAgICAgICAgICh0aGlzLmNhbnZhcy53aWR0aCAqIHRoaXMuY3JvcHBlclNldHRpbmdzLm1pbldpZHRoKSAvXHJcbiAgICAgICAgICB0aGlzLnNyY0ltYWdlLndpZHRoO1xyXG4gICAgICAgIHRoaXMubWluSGVpZ2h0ID1cclxuICAgICAgICAgICh0aGlzLmNhbnZhcy5oZWlnaHQgKiB0aGlzLmNyb3BwZXJTZXR0aW5ncy5taW5IZWlnaHQpIC9cclxuICAgICAgICAgIHRoaXMuc3JjSW1hZ2UuaGVpZ2h0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnVwZGF0ZUNsYW1wQm91bmRzKCk7XHJcbiAgICAgIHRoaXMuY2FudmFzV2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgICAgdGhpcy5jYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcblxyXG4gICAgICBjb25zdCBjcm9wUG9zaXRpb246IFBvaW50W10gPSB0aGlzLmdldENyb3BQb3NpdGlvbkZyb21NYXJrZXJzKCk7XHJcbiAgICAgIHRoaXMuc2V0Q3JvcFBvc2l0aW9uKGNyb3BQb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlQ3JvcFBvc2l0aW9uKGNyb3BCb3VuZHM6IEJvdW5kcyk6IHZvaWQge1xyXG4gICAgY29uc3QgY3JvcFBvc2l0aW9uOiBQb2ludFtdID0gdGhpcy5nZXRDcm9wUG9zaXRpb25Gcm9tQm91bmRzKGNyb3BCb3VuZHMpO1xyXG4gICAgdGhpcy5zZXRDcm9wUG9zaXRpb24oY3JvcFBvc2l0aW9uKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Q3JvcFBvc2l0aW9uKGNyb3BQb3NpdGlvbjogUG9pbnRbXSk6IHZvaWQge1xyXG4gICAgdGhpcy50bC5zZXRQb3NpdGlvbihjcm9wUG9zaXRpb25bMF0ueCwgY3JvcFBvc2l0aW9uWzBdLnkpO1xyXG4gICAgdGhpcy50ci5zZXRQb3NpdGlvbihjcm9wUG9zaXRpb25bMV0ueCwgY3JvcFBvc2l0aW9uWzFdLnkpO1xyXG4gICAgdGhpcy5ibC5zZXRQb3NpdGlvbihjcm9wUG9zaXRpb25bMl0ueCwgY3JvcFBvc2l0aW9uWzJdLnkpO1xyXG4gICAgdGhpcy5ici5zZXRQb3NpdGlvbihjcm9wUG9zaXRpb25bM10ueCwgY3JvcFBvc2l0aW9uWzNdLnkpO1xyXG4gICAgdGhpcy5jZW50ZXIuc2V0UG9zaXRpb24oY3JvcFBvc2l0aW9uWzRdLngsIGNyb3BQb3NpdGlvbls0XS55KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIGNyb3BQb3NpdGlvbikge1xyXG4gICAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UucmV0dXJuUG9pbnQocG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmVydFNxdWFzaFJhdGlvID0gdGhpcy5kZXRlY3RWZXJ0aWNhbFNxdWFzaCh0aGlzLnNyY0ltYWdlKTtcclxuICAgIHRoaXMuZHJhdyh0aGlzLmN0eCk7XHJcbiAgICB0aGlzLmNyb3BwZWRJbWFnZSA9IHRoaXMuZ2V0Q3JvcHBlZEltYWdlSGVscGVyKFxyXG4gICAgICBmYWxzZSxcclxuICAgICAgdGhpcy5jcm9wV2lkdGgsXHJcbiAgICAgIHRoaXMuY3JvcEhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q3JvcFBvc2l0aW9uRnJvbU1hcmtlcnMoKTogUG9pbnRbXSB7XHJcbiAgICBjb25zdCB3OiBudW1iZXIgPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgIGNvbnN0IGg6IG51bWJlciA9IHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgIGxldCB0bFBvczogUG9pbnQ7XHJcbiAgICBsZXQgdHJQb3M6IFBvaW50O1xyXG4gICAgbGV0IGJsUG9zOiBQb2ludDtcclxuICAgIGxldCBiclBvczogUG9pbnQ7XHJcbiAgICBsZXQgY2VudGVyOiBQb2ludDtcclxuICAgIGNvbnN0IHNvdXJjZUFzcGVjdDogbnVtYmVyID0gdGhpcy5zcmNJbWFnZS5oZWlnaHQgLyB0aGlzLnNyY0ltYWdlLndpZHRoO1xyXG4gICAgY29uc3QgY3JvcEJvdW5kczogQm91bmRzID0gdGhpcy5nZXRCb3VuZHMoKTtcclxuICAgIGNvbnN0IGNyb3BBc3BlY3Q6IG51bWJlciA9IGNyb3BCb3VuZHMuaGVpZ2h0IC8gY3JvcEJvdW5kcy53aWR0aDtcclxuICAgIGNvbnN0IGNYOiBudW1iZXIgPSB0aGlzLmNhbnZhcy53aWR0aCAvIDI7XHJcbiAgICBjb25zdCBjWTogbnVtYmVyID0gdGhpcy5jYW52YXMuaGVpZ2h0IC8gMjtcclxuXHJcbiAgICBpZiAoY3JvcEFzcGVjdCA+IHNvdXJjZUFzcGVjdCkge1xyXG4gICAgICBjb25zdCBpbWFnZUggPSBNYXRoLm1pbih3ICogc291cmNlQXNwZWN0LCBoKTtcclxuICAgICAgY29uc3QgY3JvcFcgPSBpbWFnZUggLyBjcm9wQXNwZWN0O1xyXG4gICAgICB0bFBvcyA9IG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coY1ggLSBjcm9wVyAvIDIsIGNZICsgaW1hZ2VIIC8gMik7XHJcbiAgICAgIHRyUG9zID0gbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyhjWCArIGNyb3BXIC8gMiwgY1kgKyBpbWFnZUggLyAyKTtcclxuICAgICAgYmxQb3MgPSBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KGNYIC0gY3JvcFcgLyAyLCBjWSAtIGltYWdlSCAvIDIpO1xyXG4gICAgICBiclBvcyA9IG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coY1ggKyBjcm9wVyAvIDIsIGNZIC0gaW1hZ2VIIC8gMik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBpbWFnZVcgPSBNYXRoLm1pbihoIC8gc291cmNlQXNwZWN0LCB3KTtcclxuICAgICAgY29uc3QgY3JvcEggPSBpbWFnZVcgKiBjcm9wQXNwZWN0O1xyXG4gICAgICB0bFBvcyA9IG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coY1ggLSBpbWFnZVcgLyAyLCBjWSArIGNyb3BIIC8gMik7XHJcbiAgICAgIHRyUG9zID0gbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyhjWCArIGltYWdlVyAvIDIsIGNZICsgY3JvcEggLyAyKTtcclxuICAgICAgYmxQb3MgPSBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KGNYIC0gaW1hZ2VXIC8gMiwgY1kgLSBjcm9wSCAvIDIpO1xyXG4gICAgICBiclBvcyA9IG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coY1ggKyBpbWFnZVcgLyAyLCBjWSAtIGNyb3BIIC8gMik7XHJcbiAgICB9XHJcblxyXG4gICAgY2VudGVyID0gbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLmJvcnJvdyhjWCwgY1kpO1xyXG4gICAgY29uc3QgcG9zaXRpb25zOiBQb2ludFtdID0gW3RsUG9zLCB0clBvcywgYmxQb3MsIGJyUG9zLCBjZW50ZXJdO1xyXG4gICAgcmV0dXJuIHBvc2l0aW9ucztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q3JvcFBvc2l0aW9uRnJvbUJvdW5kcyhjcm9wUG9zaXRpb246IEJvdW5kcyk6IFBvaW50W10ge1xyXG4gICAgbGV0IG1hcmdpblRvcCA9IDA7XHJcbiAgICBsZXQgbWFyZ2luTGVmdCA9IDA7XHJcbiAgICBjb25zdCBjYW52YXNBc3BlY3Q6IG51bWJlciA9IHRoaXMuY2FudmFzSGVpZ2h0IC8gdGhpcy5jYW52YXNXaWR0aDtcclxuICAgIGNvbnN0IHNvdXJjZUFzcGVjdDogbnVtYmVyID0gdGhpcy5zcmNJbWFnZS5oZWlnaHQgLyB0aGlzLnNyY0ltYWdlLndpZHRoO1xyXG5cclxuICAgIGlmIChjYW52YXNBc3BlY3QgPiBzb3VyY2VBc3BlY3QpIHtcclxuICAgICAgbWFyZ2luVG9wID1cclxuICAgICAgICB0aGlzLmJ1ZmZlci5oZWlnaHQgLyAyIC0gKHRoaXMuY2FudmFzV2lkdGggKiBzb3VyY2VBc3BlY3QpIC8gMjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1hcmdpbkxlZnQgPSB0aGlzLmJ1ZmZlci53aWR0aCAvIDIgLSB0aGlzLmNhbnZhc0hlaWdodCAvIHNvdXJjZUFzcGVjdCAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmF0aW9XOiBudW1iZXIgPVxyXG4gICAgICAodGhpcy5jYW52YXNXaWR0aCAtIG1hcmdpbkxlZnQgKiAyKSAvIHRoaXMuc3JjSW1hZ2Uud2lkdGg7XHJcbiAgICBjb25zdCByYXRpb0g6IG51bWJlciA9XHJcbiAgICAgICh0aGlzLmNhbnZhc0hlaWdodCAtIG1hcmdpblRvcCAqIDIpIC8gdGhpcy5zcmNJbWFnZS5oZWlnaHQ7XHJcblxyXG4gICAgbGV0IGFjdHVhbEg6IG51bWJlciA9IGNyb3BQb3NpdGlvbi5oZWlnaHQgKiByYXRpb0g7XHJcbiAgICBsZXQgYWN0dWFsVzogbnVtYmVyID0gY3JvcFBvc2l0aW9uLndpZHRoICogcmF0aW9XO1xyXG4gICAgY29uc3QgYWN0dWFsWDogbnVtYmVyID0gY3JvcFBvc2l0aW9uLmxlZnQgKiByYXRpb1cgKyBtYXJnaW5MZWZ0O1xyXG4gICAgY29uc3QgYWN0dWFsWTogbnVtYmVyID0gY3JvcFBvc2l0aW9uLnRvcCAqIHJhdGlvSCArIG1hcmdpblRvcDtcclxuXHJcbiAgICBpZiAodGhpcy5rZWVwQXNwZWN0KSB7XHJcbiAgICAgIGNvbnN0IHNjYWxlZFc6IG51bWJlciA9IGFjdHVhbEggLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICBjb25zdCBzY2FsZWRIOiBudW1iZXIgPSBhY3R1YWxXICogdGhpcy5hc3BlY3RSYXRpbztcclxuXHJcbiAgICAgIGlmICh0aGlzLmdldENyb3BCb3VuZHMoKS5oZWlnaHQgPT09IGNyb3BQb3NpdGlvbi5oZWlnaHQpIHtcclxuICAgICAgICAvLyBvbmx5IHdpZHRoIGNoYW5nZWRcclxuICAgICAgICBhY3R1YWxIID0gc2NhbGVkSDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmdldENyb3BCb3VuZHMoKS53aWR0aCA9PT0gY3JvcFBvc2l0aW9uLndpZHRoKSB7XHJcbiAgICAgICAgLy8gb25seSBoZWlnaHQgY2hhbmdlZFxyXG4gICAgICAgIGFjdHVhbFcgPSBzY2FsZWRXO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGhlaWdodCBhbmQgd2lkdGggY2hhbmdlZFxyXG4gICAgICAgIGlmIChNYXRoLmFicyhzY2FsZWRIIC0gYWN0dWFsSCkgPCBNYXRoLmFicyhzY2FsZWRXIC0gYWN0dWFsVykpIHtcclxuICAgICAgICAgIGFjdHVhbFcgPSBzY2FsZWRXO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhY3R1YWxIID0gc2NhbGVkSDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0bFBvczogUG9pbnQgPSBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KFxyXG4gICAgICBhY3R1YWxYLFxyXG4gICAgICBhY3R1YWxZICsgYWN0dWFsSFxyXG4gICAgKTtcclxuICAgIGNvbnN0IHRyUG9zOiBQb2ludCA9IG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coXHJcbiAgICAgIGFjdHVhbFggKyBhY3R1YWxXLFxyXG4gICAgICBhY3R1YWxZICsgYWN0dWFsSFxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJsUG9zOiBQb2ludCA9IG5ldyBQb2ludFBvb2woKS5pbnN0YW5jZS5ib3Jyb3coYWN0dWFsWCwgYWN0dWFsWSk7XHJcbiAgICBjb25zdCBiclBvczogUG9pbnQgPSBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KFxyXG4gICAgICBhY3R1YWxYICsgYWN0dWFsVyxcclxuICAgICAgYWN0dWFsWVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGNlbnRlcjogUG9pbnQgPSBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UuYm9ycm93KFxyXG4gICAgICBhY3R1YWxYICsgYWN0dWFsVyAvIDIsXHJcbiAgICAgIGFjdHVhbFkgKyBhY3R1YWxIIC8gMlxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBwb3NpdGlvbnM6IFBvaW50W10gPSBbdGxQb3MsIHRyUG9zLCBibFBvcywgYnJQb3MsIGNlbnRlcl07XHJcbiAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldENyb3BwZWRJbWFnZUhlbHBlcihcclxuICAgIHByZXNlcnZlU2l6ZT86IGJvb2xlYW4sXHJcbiAgICBmaWxsV2lkdGg/OiBudW1iZXIsXHJcbiAgICBmaWxsSGVpZ2h0PzogbnVtYmVyXHJcbiAgKTogSFRNTEltYWdlRWxlbWVudCB7XHJcbiAgICBpZiAodGhpcy5jcm9wcGVyU2V0dGluZ3MuY3JvcE9uUmVzaXplKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldENyb3BwZWRJbWFnZShwcmVzZXJ2ZVNpemUsIGZpbGxXaWR0aCwgZmlsbEhlaWdodCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jcm9wcGVkSW1hZ2VcclxuICAgICAgPyB0aGlzLmNyb3BwZWRJbWFnZVxyXG4gICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gIH1cclxuXHJcbiAgLy8gdG9kbzogVW51c2VkIHBhcmFtZXRlcnM/XHJcbiAgcHVibGljIGdldENyb3BwZWRJbWFnZShcclxuICAgIHByZXNlcnZlU2l6ZT86IGJvb2xlYW4sXHJcbiAgICBmaWxsV2lkdGg/OiBudW1iZXIsXHJcbiAgICBmaWxsSGVpZ2h0PzogbnVtYmVyXHJcbiAgKTogSFRNTEltYWdlRWxlbWVudCB7XHJcbiAgICBjb25zdCBib3VuZHM6IEJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XHJcbiAgICBpZiAoIXRoaXMuc3JjSW1hZ2UpIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc291cmNlQXNwZWN0OiBudW1iZXIgPSB0aGlzLnNyY0ltYWdlLmhlaWdodCAvIHRoaXMuc3JjSW1hZ2Uud2lkdGg7XHJcbiAgICAgIGNvbnN0IGNhbnZhc0FzcGVjdDogbnVtYmVyID0gdGhpcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICAgIGxldCB3OiBudW1iZXIgPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgICAgbGV0IGg6IG51bWJlciA9IHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgICAgaWYgKGNhbnZhc0FzcGVjdCA+IHNvdXJjZUFzcGVjdCkge1xyXG4gICAgICAgIHcgPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBoID0gdGhpcy5jYW52YXMud2lkdGggKiBzb3VyY2VBc3BlY3Q7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGNhbnZhc0FzcGVjdCA8IHNvdXJjZUFzcGVjdCkge1xyXG4gICAgICAgICAgaCA9IHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgICAgICAgIHcgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyBzb3VyY2VBc3BlY3Q7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGggPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgICB3ID0gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmF0aW9XID0gdyAvIHRoaXMuc3JjSW1hZ2Uud2lkdGg7XHJcbiAgICAgIHRoaXMucmF0aW9IID0gaCAvIHRoaXMuc3JjSW1hZ2UuaGVpZ2h0O1xyXG4gICAgICBjb25zdCBvZmZzZXRIOiBudW1iZXIgPSAodGhpcy5idWZmZXIuaGVpZ2h0IC0gaCkgLyAyIC8gdGhpcy5yYXRpb0g7XHJcbiAgICAgIGNvbnN0IG9mZnNldFc6IG51bWJlciA9ICh0aGlzLmJ1ZmZlci53aWR0aCAtIHcpIC8gMiAvIHRoaXMucmF0aW9XO1xyXG5cclxuICAgICAgY29uc3QgY3R4ID0gdGhpcy5jcm9wQ2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY3JvcHBlclNldHRpbmdzLnByZXNlcnZlU2l6ZSB8fCBwcmVzZXJ2ZVNpemUpIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoXHJcbiAgICAgICAgICBib3VuZHMucmlnaHQgLyB0aGlzLnJhdGlvVyAtIGJvdW5kcy5sZWZ0IC8gdGhpcy5yYXRpb1dcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgucm91bmQoXHJcbiAgICAgICAgICBib3VuZHMuYm90dG9tIC8gdGhpcy5yYXRpb0ggLSBib3VuZHMudG9wIC8gdGhpcy5yYXRpb0hcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmNyb3BDYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmNyb3BDYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLmNyb3BwZXJTZXR0aW5ncy5jcm9wcGVkV2lkdGggPSB0aGlzLmNyb3BDYW52YXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5jcm9wcGVyU2V0dGluZ3MuY3JvcHBlZEhlaWdodCA9IHRoaXMuY3JvcENhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jcm9wQ2FudmFzLndpZHRoID0gdGhpcy5jcm9wV2lkdGg7XHJcbiAgICAgICAgdGhpcy5jcm9wQ2FudmFzLmhlaWdodCA9IHRoaXMuY3JvcEhlaWdodDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNyb3BDYW52YXMud2lkdGgsIHRoaXMuY3JvcENhbnZhcy5oZWlnaHQpO1xyXG4gICAgICB0aGlzLmRyYXdJbWFnZUlPU0ZpeChcclxuICAgICAgICBjdHgsXHJcbiAgICAgICAgdGhpcy5zcmNJbWFnZSxcclxuICAgICAgICBNYXRoLm1heChNYXRoLnJvdW5kKGJvdW5kcy5sZWZ0IC8gdGhpcy5yYXRpb1cgLSBvZmZzZXRXKSwgMCksXHJcbiAgICAgICAgTWF0aC5tYXgoTWF0aC5yb3VuZChib3VuZHMudG9wIC8gdGhpcy5yYXRpb0ggLSBvZmZzZXRIKSwgMCksXHJcbiAgICAgICAgTWF0aC5tYXgoTWF0aC5yb3VuZChib3VuZHMud2lkdGggLyB0aGlzLnJhdGlvVyksIDEpLFxyXG4gICAgICAgIE1hdGgubWF4KE1hdGgucm91bmQoYm91bmRzLmhlaWdodCAvIHRoaXMucmF0aW9IKSwgMSksXHJcbiAgICAgICAgMCxcclxuICAgICAgICAwLFxyXG4gICAgICAgIHRoaXMuY3JvcENhbnZhcy53aWR0aCxcclxuICAgICAgICB0aGlzLmNyb3BDYW52YXMuaGVpZ2h0XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAodGhpcy5jcm9wcGVyU2V0dGluZ3MucmVzYW1wbGVGbikge1xyXG4gICAgICAgIHRoaXMuY3JvcHBlclNldHRpbmdzLnJlc2FtcGxlRm4odGhpcy5jcm9wQ2FudmFzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jcm9wcGVkSW1hZ2Uud2lkdGggPSB0aGlzLmNyb3BDYW52YXMud2lkdGg7XHJcbiAgICAgIHRoaXMuY3JvcHBlZEltYWdlLmhlaWdodCA9IHRoaXMuY3JvcENhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIHRoaXMuY3JvcHBlZEltYWdlLnNyYyA9IHRoaXMuY3JvcENhbnZhcy50b0RhdGFVUkwoXHJcbiAgICAgICAgdGhpcy5maWxlVHlwZSxcclxuICAgICAgICB0aGlzLmNyb3BwZXJTZXR0aW5ncy5jb21wcmVzc1JhdGlvXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiB0aGlzLmNyb3BwZWRJbWFnZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCb3VuZHMoKTogQm91bmRzIHtcclxuICAgIGxldCBtaW5YID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgIGxldCBtaW5ZID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgIGxldCBtYXhYID0gLU51bWJlci5NQVhfVkFMVUU7XHJcbiAgICBsZXQgbWF4WSA9IC1OdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgZm9yIChjb25zdCBtYXJrZXIgb2YgdGhpcy5tYXJrZXJzKSB7XHJcbiAgICAgIGlmIChtYXJrZXIucG9zaXRpb24ueCA8IG1pblgpIHtcclxuICAgICAgICBtaW5YID0gbWFya2VyLnBvc2l0aW9uLng7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1hcmtlci5wb3NpdGlvbi54ID4gbWF4WCkge1xyXG4gICAgICAgIG1heFggPSBtYXJrZXIucG9zaXRpb24ueDtcclxuICAgICAgfVxyXG4gICAgICBpZiAobWFya2VyLnBvc2l0aW9uLnkgPCBtaW5ZKSB7XHJcbiAgICAgICAgbWluWSA9IG1hcmtlci5wb3NpdGlvbi55O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChtYXJrZXIucG9zaXRpb24ueSA+IG1heFkpIHtcclxuICAgICAgICBtYXhZID0gbWFya2VyLnBvc2l0aW9uLnk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGJvdW5kczogQm91bmRzID0gbmV3IEJvdW5kcygpO1xyXG4gICAgYm91bmRzLmxlZnQgPSBtaW5YO1xyXG4gICAgYm91bmRzLnJpZ2h0ID0gbWF4WDtcclxuICAgIGJvdW5kcy50b3AgPSBtaW5ZO1xyXG4gICAgYm91bmRzLmJvdHRvbSA9IG1heFk7XHJcbiAgICByZXR1cm4gYm91bmRzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldEJvdW5kcyhib3VuZHM6IGFueSkge1xyXG4gICAgLy8gY29uc3QgdG9wTGVmdDogQ29ybmVyTWFya2VyO1xyXG4gICAgLy8gY29uc3QgdG9wUmlnaHQ6IENvcm5lck1hcmtlcjtcclxuICAgIC8vIGNvbnN0IGJvdHRvbUxlZnQ6IENvcm5lck1hcmtlcjtcclxuICAgIC8vIGNvbnN0IGJvdHRvbVJpZ2h0OiBDb3JuZXJNYXJrZXI7XHJcblxyXG4gICAgY29uc3QgY3VycmVudEJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XHJcbiAgICBmb3IgKGNvbnN0IG1hcmtlciBvZiB0aGlzLm1hcmtlcnMpIHtcclxuICAgICAgaWYgKG1hcmtlci5wb3NpdGlvbi54ID09PSBjdXJyZW50Qm91bmRzLmxlZnQpIHtcclxuICAgICAgICBpZiAobWFya2VyLnBvc2l0aW9uLnkgPT09IGN1cnJlbnRCb3VuZHMudG9wKSB7XHJcbiAgICAgICAgICBtYXJrZXIuc2V0UG9zaXRpb24oYm91bmRzLmxlZnQsIGJvdW5kcy50b3ApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBtYXJrZXIuc2V0UG9zaXRpb24oYm91bmRzLmxlZnQsIGJvdW5kcy5ib3R0b20pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAobWFya2VyLnBvc2l0aW9uLnkgPT09IGN1cnJlbnRCb3VuZHMudG9wKSB7XHJcbiAgICAgICAgICBtYXJrZXIuc2V0UG9zaXRpb24oYm91bmRzLnJpZ2h0LCBib3VuZHMudG9wKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbWFya2VyLnNldFBvc2l0aW9uKGJvdW5kcy5yaWdodCwgYm91bmRzLmJvdHRvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jZW50ZXIucmVjYWxjdWxhdGVQb3NpdGlvbihib3VuZHMpO1xyXG4gICAgdGhpcy5jZW50ZXIuZHJhdyh0aGlzLmN0eCk7XHJcbiAgICB0aGlzLmRyYXcodGhpcy5jdHgpOyAvLyB3ZSBuZWVkIHRvIHJlZHJhdyBhbGwgY2FudmFzIGlmIHdlIGhhdmUgY2hhbmdlZCBib3VuZHNcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvblRvdWNoTW92ZShldmVudDogVG91Y2hFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuY3JvcC5pc0ltYWdlU2V0KCkpIHtcclxuICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb3VzZURvd24pIHtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudC50b3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdWNoID0gZXZlbnQudG91Y2hlc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgdG91Y2hQb3NpdGlvbiA9IHRoaXMuZ2V0VG91Y2hQb3ModGhpcy5jYW52YXMsIHRvdWNoKTtcclxuICAgICAgICAgICAgY29uc3QgY3JvcFRvdWNoID0gbmV3IENyb3BUb3VjaChcclxuICAgICAgICAgICAgICB0b3VjaFBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgdG91Y2hQb3NpdGlvbi55LFxyXG4gICAgICAgICAgICAgIHRvdWNoLmlkZW50aWZpZXJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbmV3IFBvaW50UG9vbCgpLmluc3RhbmNlLnJldHVyblBvaW50KHRvdWNoUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUoY3JvcFRvdWNoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID1cclxuICAgICAgICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WCkgKlxyXG4gICAgICAgICAgICAgIChldmVudC50b3VjaGVzWzBdLmNsaWVudFggLSBldmVudC50b3VjaGVzWzFdLmNsaWVudFgpICtcclxuICAgICAgICAgICAgKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSAtIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WSkgKlxyXG4gICAgICAgICAgICAgIChldmVudC50b3VjaGVzWzBdLmNsaWVudFkgLSBldmVudC50b3VjaGVzWzFdLmNsaWVudFkpO1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNEaXN0YW5jZSAmJiB0aGlzLnByZXZpb3VzRGlzdGFuY2UgIT09IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCB0aGlzLnByZXZpb3VzRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICBib3VuZHMudG9wICs9IDE7XHJcbiAgICAgICAgICAgICAgYm91bmRzLmxlZnQgKz0gMTtcclxuICAgICAgICAgICAgICBib3VuZHMucmlnaHQgLT0gMTtcclxuICAgICAgICAgICAgICBib3VuZHMuYm90dG9tIC09IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IHRoaXMucHJldmlvdXNEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGJvdW5kcy50b3AgIT09IHRoaXMubWluWUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMuYm90dG9tICE9PSB0aGlzLm1heFlDbGFtcCAmJlxyXG4gICAgICAgICAgICAgICAgYm91bmRzLmxlZnQgIT09IHRoaXMubWluWENsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgIT09IHRoaXMubWF4WENsYW1wXHJcbiAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBub25lXHJcbiAgICAgICAgICAgICAgICBib3VuZHMudG9wIC09IDE7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgYm91bmRzLnJpZ2h0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMuYm90dG9tICs9IDE7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGJvdW5kcy50b3AgIT09IHRoaXMubWluWUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMuYm90dG9tICE9PSB0aGlzLm1heFlDbGFtcCAmJlxyXG4gICAgICAgICAgICAgICAgYm91bmRzLmxlZnQgPT09IHRoaXMubWluWENsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgIT09IHRoaXMubWF4WENsYW1wXHJcbiAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZWZ0XHJcbiAgICAgICAgICAgICAgICBib3VuZHMudG9wIC09IDE7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgKz0gMjtcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gKz0gMTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnRvcCAhPT0gdGhpcy5taW5ZQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gIT09IHRoaXMubWF4WUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCAhPT0gdGhpcy5taW5YQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5yaWdodCA9PT0gdGhpcy5tYXhYQ2xhbXBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICBib3VuZHMudG9wIC09IDE7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCAtPSAyO1xyXG4gICAgICAgICAgICAgICAgYm91bmRzLmJvdHRvbSArPSAxO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICBib3VuZHMudG9wID09PSB0aGlzLm1pbllDbGFtcCAmJlxyXG4gICAgICAgICAgICAgICAgYm91bmRzLmJvdHRvbSAhPT0gdGhpcy5tYXhZQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5sZWZ0ICE9PSB0aGlzLm1pblhDbGFtcCAmJlxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnJpZ2h0ICE9PSB0aGlzLm1heFhDbGFtcFxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgLy8gdG9wXHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgYm91bmRzLnJpZ2h0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMuYm90dG9tICs9IDI7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGJvdW5kcy50b3AgIT09IHRoaXMubWluWUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMuYm90dG9tID09PSB0aGlzLm1heFlDbGFtcCAmJlxyXG4gICAgICAgICAgICAgICAgYm91bmRzLmxlZnQgIT09IHRoaXMubWluWENsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgIT09IHRoaXMubWF4WENsYW1wXHJcbiAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3R0b21cclxuICAgICAgICAgICAgICAgIGJvdW5kcy50b3AgLT0gMjtcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5sZWZ0IC09IDE7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgKz0gMTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnRvcCA9PT0gdGhpcy5taW5ZQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gIT09IHRoaXMubWF4WUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCA9PT0gdGhpcy5taW5YQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5yaWdodCAhPT0gdGhpcy5tYXhYQ2xhbXBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIHRvcCBsZWZ0XHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgKz0gMjtcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gKz0gMjtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnRvcCA9PT0gdGhpcy5taW5ZQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gIT09IHRoaXMubWF4WUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCAhPT0gdGhpcy5taW5YQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5yaWdodCA9PT0gdGhpcy5tYXhYQ2xhbXBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIHRvcCByaWdodFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLmxlZnQgLT0gMjtcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gKz0gMjtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnRvcCAhPT0gdGhpcy5taW5ZQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gPT09IHRoaXMubWF4WUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCA9PT0gdGhpcy5taW5YQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5yaWdodCAhPT0gdGhpcy5tYXhYQ2xhbXBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIGJvdHRvbSBsZWZ0XHJcbiAgICAgICAgICAgICAgICBib3VuZHMudG9wIC09IDI7XHJcbiAgICAgICAgICAgICAgICBib3VuZHMucmlnaHQgKz0gMjtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnRvcCAhPT0gdGhpcy5taW5ZQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gPT09IHRoaXMubWF4WUNsYW1wICYmXHJcbiAgICAgICAgICAgICAgICBib3VuZHMubGVmdCAhPT0gdGhpcy5taW5YQ2xhbXAgJiZcclxuICAgICAgICAgICAgICAgIGJvdW5kcy5yaWdodCA9PT0gdGhpcy5tYXhYQ2xhbXBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIGJvdHRvbSByaWdodFxyXG4gICAgICAgICAgICAgICAgYm91bmRzLnRvcCAtPSAyO1xyXG4gICAgICAgICAgICAgICAgYm91bmRzLmxlZnQgLT0gMjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChib3VuZHMudG9wIDwgdGhpcy5taW5ZQ2xhbXApIHtcclxuICAgICAgICAgICAgICBib3VuZHMudG9wID0gdGhpcy5taW5ZQ2xhbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvdW5kcy5ib3R0b20gPiB0aGlzLm1heFlDbGFtcCkge1xyXG4gICAgICAgICAgICAgIGJvdW5kcy5ib3R0b20gPSB0aGlzLm1heFlDbGFtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYm91bmRzLmxlZnQgPCB0aGlzLm1pblhDbGFtcCkge1xyXG4gICAgICAgICAgICAgIGJvdW5kcy5sZWZ0ID0gdGhpcy5taW5YQ2xhbXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvdW5kcy5yaWdodCA+IHRoaXMubWF4WENsYW1wKSB7XHJcbiAgICAgICAgICAgICAgYm91bmRzLnJpZ2h0ID0gdGhpcy5tYXhYQ2xhbXA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Qm91bmRzKGJvdW5kcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnByZXZpb3VzRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kcmF3KHRoaXMuY3R4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbk1vdXNlTW92ZShlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5jcm9wLmlzSW1hZ2VTZXQoKSAmJiB0aGlzLmlzTW91c2VEb3duKSB7XHJcbiAgICAgIGNvbnN0IG1vdXNlUG9zaXRpb24gPSB0aGlzLmdldE1vdXNlUG9zKHRoaXMuY2FudmFzLCBlKTtcclxuICAgICAgdGhpcy5tb3ZlKG5ldyBDcm9wVG91Y2gobW91c2VQb3NpdGlvbi54LCBtb3VzZVBvc2l0aW9uLnksIDApKTtcclxuICAgICAgbGV0IGRyYWdUb3VjaCA9IHRoaXMuZ2V0RHJhZ1RvdWNoRm9ySUQoMCk7XHJcbiAgICAgIGlmIChkcmFnVG91Y2gpIHtcclxuICAgICAgICBkcmFnVG91Y2gueCA9IG1vdXNlUG9zaXRpb24ueDtcclxuICAgICAgICBkcmFnVG91Y2gueSA9IG1vdXNlUG9zaXRpb24ueTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkcmFnVG91Y2ggPSBuZXcgQ3JvcFRvdWNoKG1vdXNlUG9zaXRpb24ueCwgbW91c2VQb3NpdGlvbi55LCAwKTtcclxuICAgICAgfVxyXG4gICAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UucmV0dXJuUG9pbnQobW91c2VQb3NpdGlvbik7XHJcbiAgICAgIHRoaXMuZHJhd0N1cnNvcnMoZHJhZ1RvdWNoKTtcclxuICAgICAgdGhpcy5kcmF3KHRoaXMuY3R4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBtb3ZlKGNyb3BUb3VjaDogQ3JvcFRvdWNoKSB7XHJcbiAgICBpZiAodGhpcy5pc01vdXNlRG93bikge1xyXG4gICAgICB0aGlzLmhhbmRsZU1vdmUoY3JvcFRvdWNoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXREcmFnVG91Y2hGb3JJRChpZDogYW55KTogQ3JvcFRvdWNoIHwgdW5kZWZpbmVkIHtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudERyYWdUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChpZCA9PT0gdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXNbaV0uaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RHJhZ1RvdWNoZXNbaV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhd0N1cnNvcnMoY3JvcFRvdWNoOiBDcm9wVG91Y2gpIHtcclxuICAgIGxldCBjdXJzb3JEcmF3biA9IGZhbHNlO1xyXG4gICAgaWYgKGNyb3BUb3VjaCAhPSBudWxsKSB7XHJcbiAgICAgIGlmIChjcm9wVG91Y2guZHJhZ0hhbmRsZSA9PT0gdGhpcy5jZW50ZXIpIHtcclxuICAgICAgICB0aGlzLmltYWdlQ3JvcHBlckRhdGFTaGFyZS5zZXRTdHlsZSh0aGlzLmNhbnZhcywgJ21vdmUnKTtcclxuICAgICAgICBjdXJzb3JEcmF3biA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGNyb3BUb3VjaC5kcmFnSGFuZGxlICE9PSBudWxsICYmXHJcbiAgICAgICAgY3JvcFRvdWNoLmRyYWdIYW5kbGUgaW5zdGFuY2VvZiBDb3JuZXJNYXJrZXJcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3Q29ybmVyQ3Vyc29yKFxyXG4gICAgICAgICAgY3JvcFRvdWNoLmRyYWdIYW5kbGUsXHJcbiAgICAgICAgICBjcm9wVG91Y2guZHJhZ0hhbmRsZS5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgY3JvcFRvdWNoLmRyYWdIYW5kbGUucG9zaXRpb24ueVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY3Vyc29yRHJhd24gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgZGlkRHJhdyA9IGZhbHNlO1xyXG4gICAgaWYgKCFjdXJzb3JEcmF3bikge1xyXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGRpZERyYXcgPVxyXG4gICAgICAgICAgZGlkRHJhdyB8fFxyXG4gICAgICAgICAgdGhpcy5kcmF3Q29ybmVyQ3Vyc29yKHRoaXMubWFya2Vyc1tpXSwgY3JvcFRvdWNoLngsIGNyb3BUb3VjaC55KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWRpZERyYXcpIHtcclxuICAgICAgICB0aGlzLmltYWdlQ3JvcHBlckRhdGFTaGFyZS5zZXRTdHlsZSh0aGlzLmNhbnZhcywgJ2luaXRpYWwnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICAhZGlkRHJhdyAmJlxyXG4gICAgICAhY3Vyc29yRHJhd24gJiZcclxuICAgICAgdGhpcy5jZW50ZXIudG91Y2hJbkJvdW5kcyhjcm9wVG91Y2gueCwgY3JvcFRvdWNoLnkpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jZW50ZXIuc2V0T3Zlcih0cnVlKTtcclxuICAgICAgdGhpcy5pbWFnZUNyb3BwZXJEYXRhU2hhcmUuc2V0T3Zlcih0aGlzLmNhbnZhcyk7XHJcbiAgICAgIHRoaXMuaW1hZ2VDcm9wcGVyRGF0YVNoYXJlLnNldFN0eWxlKHRoaXMuY2FudmFzLCAnbW92ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jZW50ZXIuc2V0T3ZlcihmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZHJhd0Nvcm5lckN1cnNvcihtYXJrZXI6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGlmIChtYXJrZXIudG91Y2hJbkJvdW5kcyh4LCB5KSkge1xyXG4gICAgICBtYXJrZXIuc2V0T3Zlcih0cnVlKTtcclxuICAgICAgaWYgKG1hcmtlci5nZXRIb3Jpem9udGFsTmVpZ2hib3VyKCkucG9zaXRpb24ueCA+IG1hcmtlci5wb3NpdGlvbi54KSB7XHJcbiAgICAgICAgaWYgKG1hcmtlci5nZXRWZXJ0aWNhbE5laWdoYm91cigpLnBvc2l0aW9uLnkgPiBtYXJrZXIucG9zaXRpb24ueSkge1xyXG4gICAgICAgICAgdGhpcy5pbWFnZUNyb3BwZXJEYXRhU2hhcmUuc2V0T3Zlcih0aGlzLmNhbnZhcyk7XHJcbiAgICAgICAgICB0aGlzLmltYWdlQ3JvcHBlckRhdGFTaGFyZS5zZXRTdHlsZSh0aGlzLmNhbnZhcywgJ253c2UtcmVzaXplJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuaW1hZ2VDcm9wcGVyRGF0YVNoYXJlLnNldE92ZXIodGhpcy5jYW52YXMpO1xyXG4gICAgICAgICAgdGhpcy5pbWFnZUNyb3BwZXJEYXRhU2hhcmUuc2V0U3R5bGUodGhpcy5jYW52YXMsICduZXN3LXJlc2l6ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAobWFya2VyLmdldFZlcnRpY2FsTmVpZ2hib3VyKCkucG9zaXRpb24ueSA+IG1hcmtlci5wb3NpdGlvbi55KSB7XHJcbiAgICAgICAgICB0aGlzLmltYWdlQ3JvcHBlckRhdGFTaGFyZS5zZXRPdmVyKHRoaXMuY2FudmFzKTtcclxuICAgICAgICAgIHRoaXMuaW1hZ2VDcm9wcGVyRGF0YVNoYXJlLnNldFN0eWxlKHRoaXMuY2FudmFzLCAnbmVzdy1yZXNpemUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5pbWFnZUNyb3BwZXJEYXRhU2hhcmUuc2V0T3Zlcih0aGlzLmNhbnZhcyk7XHJcbiAgICAgICAgICB0aGlzLmltYWdlQ3JvcHBlckRhdGFTaGFyZS5zZXRTdHlsZSh0aGlzLmNhbnZhcywgJ253c2UtcmVzaXplJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgbWFya2VyLnNldE92ZXIoZmFsc2UpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uVG91Y2hTdGFydChldmVudDogVG91Y2hFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuY3JvcC5pc0ltYWdlU2V0KCkpIHtcclxuICAgICAgY29uc3QgdG91Y2ggPSBldmVudC50b3VjaGVzWzBdO1xyXG4gICAgICBjb25zdCB0b3VjaFBvc2l0aW9uID0gdGhpcy5nZXRUb3VjaFBvcyh0aGlzLmNhbnZhcywgdG91Y2gpO1xyXG4gICAgICBjb25zdCBjcm9wVG91Y2ggPSBuZXcgQ3JvcFRvdWNoKFxyXG4gICAgICAgIHRvdWNoUG9zaXRpb24ueCxcclxuICAgICAgICB0b3VjaFBvc2l0aW9uLnksXHJcbiAgICAgICAgdG91Y2guaWRlbnRpZmllclxyXG4gICAgICApO1xyXG4gICAgICBuZXcgUG9pbnRQb29sKCkuaW5zdGFuY2UucmV0dXJuUG9pbnQodG91Y2hQb3NpdGlvbik7XHJcblxyXG4gICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgIGZvciAoY29uc3QgbWFya2VyIG9mIHRoaXMubWFya2Vycykge1xyXG4gICAgICAgIGlmIChtYXJrZXIudG91Y2hJbkJvdW5kcyhjcm9wVG91Y2gueCwgY3JvcFRvdWNoLnkpKSB7XHJcbiAgICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuY2VudGVyLnRvdWNoSW5Cb3VuZHMoY3JvcFRvdWNoLngsIGNyb3BUb3VjaC55KSkge1xyXG4gICAgICAgIHRoaXMuaXNNb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Ub3VjaEVuZChldmVudDogVG91Y2hFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuY3JvcC5pc0ltYWdlU2V0KCkpIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XHJcbiAgICAgICAgY29uc3QgZHJhZ1RvdWNoID0gdGhpcy5nZXREcmFnVG91Y2hGb3JJRCh0b3VjaC5pZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZHJhZ1RvdWNoICYmIGRyYWdUb3VjaCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGRyYWdUb3VjaC5kcmFnSGFuZGxlIGluc3RhbmNlb2YgQ29ybmVyTWFya2VyIHx8XHJcbiAgICAgICAgICAgIGRyYWdUb3VjaC5kcmFnSGFuZGxlIGluc3RhbmNlb2YgRHJhZ01hcmtlclxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGRyYWdUb3VjaC5kcmFnSGFuZGxlLnNldE92ZXIoZmFsc2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5oYW5kbGVSZWxlYXNlKGRyYWdUb3VjaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5jdXJyZW50RHJhZ1RvdWNoZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudGx5SW50ZXJhY3RpbmcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTkyOTA5OS9odG1sNS1jYW52YXMtZHJhd2ltYWdlLXJhdGlvLWJ1Zy1pb3NcclxuICBwdWJsaWMgZHJhd0ltYWdlSU9TRml4KFxyXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgICBpbWc6IEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MQ2FudmFzRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQsXHJcbiAgICBzeDogbnVtYmVyLFxyXG4gICAgc3k6IG51bWJlcixcclxuICAgIHN3OiBudW1iZXIsXHJcbiAgICBzaDogbnVtYmVyLFxyXG4gICAgZHg6IG51bWJlcixcclxuICAgIGR5OiBudW1iZXIsXHJcbiAgICBkdzogbnVtYmVyLFxyXG4gICAgZGg6IG51bWJlclxyXG4gICkge1xyXG4gICAgLy8gV29ya3Mgb25seSBpZiB3aG9sZSBpbWFnZSBpcyBkaXNwbGF5ZWQ6XHJcbiAgICAvLyBjdHguZHJhd0ltYWdlKGltZywgc3gsIHN5LCBzdywgc2gsIGR4LCBkeSwgZHcsIGRoIC8gdmVydFNxdWFzaFJhdGlvKTtcclxuICAgIC8vIFRoZSBmb2xsb3dpbmcgd29ya3MgY29ycmVjdCBhbHNvIHdoZW4gb25seSBhIHBhcnQgb2YgdGhlIGltYWdlIGlzIGRpc3BsYXllZDpcclxuICAgIC8vIGN0eC5kcmF3SW1hZ2UoaW1nLCBzeCAqIHRoaXMudmVydFNxdWFzaFJhdGlvLCBzeSAqIHRoaXMudmVydFNxdWFzaFJhdGlvLCBzdyAqIHRoaXMudmVydFNxdWFzaFJhdGlvLCBzaCAqXHJcbiAgICAvLyB0aGlzLnZlcnRTcXVhc2hSYXRpbywgZHgsIGR5LCBkdywgZGgpO1xyXG4gICAgY3R4LmRyYXdJbWFnZShpbWcsIHN4LCBzeSwgc3csIHNoLCBkeCwgZHksIGR3LCBkaCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIGlmICh0aGlzLmNyb3AuaXNJbWFnZVNldCgpKSB7XHJcbiAgICAgIHRoaXMuaXNNb3VzZURvd24gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uTW91c2VVcChldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuY3JvcC5pc0ltYWdlU2V0KCkpIHtcclxuICAgICAgdGhpcy5pbWFnZUNyb3BwZXJEYXRhU2hhcmUuc2V0UmVsZWFzZWQodGhpcy5jYW52YXMpO1xyXG4gICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaGFuZGxlUmVsZWFzZShuZXcgQ3JvcFRvdWNoKDAsIDAsIDApKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19