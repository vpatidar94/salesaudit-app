export class Fraction extends Number {
}
export class Exif {
    constructor() {
        this.debug = false;
        this.IptcFieldMap = {
            0x78: 'caption',
            0x6e: 'credit',
            0x19: 'keywords',
            0x37: 'dateCreated',
            0x50: 'byline',
            0x55: 'bylineTitle',
            0x7a: 'captionWriter',
            0x69: 'headline',
            0x74: 'copyright',
            0x0f: 'category'
        };
        this.Tags = {
            // version tags
            0x9000: 'ExifVersion',
            0xa000: 'FlashpixVersion',
            // colorspace tags
            0xa001: 'ColorSpace',
            // image configuration
            0xa002: 'PixelXDimension',
            0xa003: 'PixelYDimension',
            0x9101: 'ComponentsConfiguration',
            0x9102: 'CompressedBitsPerPixel',
            // user information
            0x927c: 'MakerNote',
            0x9286: 'UserComment',
            // related file
            0xa004: 'RelatedSoundFile',
            // date and time
            0x9003: 'DateTimeOriginal',
            0x9004: 'DateTimeDigitized',
            0x9290: 'SubsecTime',
            0x9291: 'SubsecTimeOriginal',
            0x9292: 'SubsecTimeDigitized',
            // picture-taking conditions
            0x829a: 'ExposureTime',
            0x829d: 'FNumber',
            0x8822: 'ExposureProgram',
            0x8824: 'SpectralSensitivity',
            0x8827: 'ISOSpeedRatings',
            0x8828: 'OECF',
            0x9201: 'ShutterSpeedValue',
            0x9202: 'ApertureValue',
            0x9203: 'BrightnessValue',
            0x9204: 'ExposureBias',
            0x9205: 'MaxApertureValue',
            0x9206: 'SubjectDistance',
            0x9207: 'MeteringMode',
            0x9208: 'LightSource',
            0x9209: 'Flash',
            0x9214: 'SubjectArea',
            0x920a: 'FocalLength',
            0xa20b: 'FlashEnergy',
            0xa20c: 'SpatialFrequencyResponse',
            0xa20e: 'FocalPlaneXResolution',
            0xa20f: 'FocalPlaneYResolution',
            0xa210: 'FocalPlaneResolutionUnit',
            0xa214: 'SubjectLocation',
            0xa215: 'ExposureIndex',
            0xa217: 'SensingMethod',
            0xa300: 'FileSource',
            0xa301: 'SceneType',
            0xa302: 'CFAPattern',
            0xa401: 'CustomRendered',
            0xa402: 'ExposureMode',
            0xa403: 'WhiteBalance',
            0xa404: 'DigitalZoomRation',
            0xa405: 'FocalLengthIn35mmFilm',
            0xa406: 'SceneCaptureType',
            0xa407: 'GainControl',
            0xa408: 'Contrast',
            0xa409: 'Saturation',
            0xa40a: 'Sharpness',
            0xa40b: 'DeviceSettingDescription',
            0xa40c: 'SubjectDistanceRange',
            // other tags
            0xa005: 'InteroperabilityIFDPointer',
            0xa420: 'ImageUniqueID' // Identifier assigned uniquely to each image
        };
        this.TiffTags = {
            0x0100: 'ImageWidth',
            0x0101: 'ImageHeight',
            0x8769: 'ExifIFDPointer',
            0x8825: 'GPSInfoIFDPointer',
            0xa005: 'InteroperabilityIFDPointer',
            0x0102: 'BitsPerSample',
            0x0103: 'Compression',
            0x0106: 'PhotometricInterpretation',
            0x0112: 'Orientation',
            0x0115: 'SamplesPerPixel',
            0x011c: 'PlanarConfiguration',
            0x0212: 'YCbCrSubSampling',
            0x0213: 'YCbCrPositioning',
            0x011a: 'XResolution',
            0x011b: 'YResolution',
            0x0128: 'ResolutionUnit',
            0x0111: 'StripOffsets',
            0x0116: 'RowsPerStrip',
            0x0117: 'StripByteCounts',
            0x0201: 'JPEGInterchangeFormat',
            0x0202: 'JPEGInterchangeFormatLength',
            0x012d: 'TransferFunction',
            0x013e: 'WhitePoint',
            0x013f: 'PrimaryChromaticities',
            0x0211: 'YCbCrCoefficients',
            0x0214: 'ReferenceBlackWhite',
            0x0132: 'DateTime',
            0x010e: 'ImageDescription',
            0x010f: 'Make',
            0x0110: 'Model',
            0x0131: 'Software',
            0x013b: 'Artist',
            0x8298: 'Copyright'
        };
        this.GPSTags = {
            0x0000: 'GPSVersionID',
            0x0001: 'GPSLatitudeRef',
            0x0002: 'GPSLatitude',
            0x0003: 'GPSLongitudeRef',
            0x0004: 'GPSLongitude',
            0x0005: 'GPSAltitudeRef',
            0x0006: 'GPSAltitude',
            0x0007: 'GPSTimeStamp',
            0x0008: 'GPSSatellites',
            0x0009: 'GPSStatus',
            0x000a: 'GPSMeasureMode',
            0x000b: 'GPSDOP',
            0x000c: 'GPSSpeedRef',
            0x000d: 'GPSSpeed',
            0x000e: 'GPSTrackRef',
            0x000f: 'GPSTrack',
            0x0010: 'GPSImgDirectionRef',
            0x0011: 'GPSImgDirection',
            0x0012: 'GPSMapDatum',
            0x0013: 'GPSDestLatitudeRef',
            0x0014: 'GPSDestLatitude',
            0x0015: 'GPSDestLongitudeRef',
            0x0016: 'GPSDestLongitude',
            0x0017: 'GPSDestBearingRef',
            0x0018: 'GPSDestBearing',
            0x0019: 'GPSDestDistanceRef',
            0x001a: 'GPSDestDistance',
            0x001b: 'GPSProcessingMethod',
            0x001c: 'GPSAreaInformation',
            0x001d: 'GPSDateStamp',
            0x001e: 'GPSDifferential'
        };
        this.StringValues = {
            ExposureProgram: {
                0: 'Not defined',
                1: 'Manual',
                2: 'Normal program',
                3: 'Aperture priority',
                4: 'Shutter priority',
                5: 'Creative program',
                6: 'Action program',
                7: 'Portrait mode',
                8: 'Landscape mode'
            },
            MeteringMode: {
                0: 'Unknown',
                1: 'Average',
                2: 'CenterWeightedAverage',
                3: 'Spot',
                4: 'MultiSpot',
                5: 'Pattern',
                6: 'Partial',
                255: 'Other'
            },
            LightSource: {
                0: 'Unknown',
                1: 'Daylight',
                2: 'Fluorescent',
                3: 'Tungsten (incandescent light)',
                4: 'Flash',
                9: 'Fine weather',
                10: 'Cloudy weather',
                11: 'Shade',
                12: 'Daylight fluorescent (D 5700 - 7100K)',
                13: 'Day white fluorescent (N 4600 - 5400K)',
                14: 'Cool white fluorescent (W 3900 - 4500K)',
                15: 'White fluorescent (WW 3200 - 3700K)',
                17: 'Standard light A',
                18: 'Standard light B',
                19: 'Standard light C',
                20: 'D55',
                21: 'D65',
                22: 'D75',
                23: 'D50',
                24: 'ISO studio tungsten',
                255: 'Other'
            },
            Flash: {
                0x0000: 'Flash did not fire',
                0x0001: 'Flash fired',
                0x0005: 'Strobe return light not detected',
                0x0007: 'Strobe return light detected',
                0x0009: 'Flash fired, compulsory flash mode',
                0x000d: 'Flash fired, compulsory flash mode, return light not detected',
                0x000f: 'Flash fired, compulsory flash mode, return light detected',
                0x0010: 'Flash did not fire, compulsory flash mode',
                0x0018: 'Flash did not fire, auto mode',
                0x0019: 'Flash fired, auto mode',
                0x001d: 'Flash fired, auto mode, return light not detected',
                0x001f: 'Flash fired, auto mode, return light detected',
                0x0020: 'No flash function',
                0x0041: 'Flash fired, red-eye reduction mode',
                0x0045: 'Flash fired, red-eye reduction mode, return light not detected',
                0x0047: 'Flash fired, red-eye reduction mode, return light detected',
                0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',
                0x004d: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',
                0x004f: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',
                0x0059: 'Flash fired, auto mode, red-eye reduction mode',
                0x005d: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',
                0x005f: 'Flash fired, auto mode, return light detected, red-eye reduction mode'
            },
            SensingMethod: {
                1: 'Not defined',
                2: 'One-chip color area sensor',
                3: 'Two-chip color area sensor',
                4: 'Three-chip color area sensor',
                5: 'Color sequential area sensor',
                7: 'Trilinear sensor',
                8: 'Color sequential linear sensor'
            },
            SceneCaptureType: {
                0: 'Standard',
                1: 'Landscape',
                2: 'Portrait',
                3: 'Night scene'
            },
            SceneType: {
                1: 'Directly photographed'
            },
            CustomRendered: {
                0: 'Normal process',
                1: 'Custom process'
            },
            WhiteBalance: {
                0: 'Auto white balance',
                1: 'Manual white balance'
            },
            GainControl: {
                0: 'None',
                1: 'Low gain up',
                2: 'High gain up',
                3: 'Low gain down',
                4: 'High gain down'
            },
            Contrast: {
                0: 'Normal',
                1: 'Soft',
                2: 'Hard'
            },
            Saturation: {
                0: 'Normal',
                1: 'Low saturation',
                2: 'High saturation'
            },
            Sharpness: {
                0: 'Normal',
                1: 'Soft',
                2: 'Hard'
            },
            SubjectDistanceRange: {
                0: 'Unknown',
                1: 'Macro',
                2: 'Close view',
                3: 'Distant view'
            },
            FileSource: {
                3: 'DSC'
            },
            Components: {
                0: '',
                1: 'Y',
                2: 'Cb',
                3: 'Cr',
                4: 'R',
                5: 'G',
                6: 'B'
            }
        };
    }
    addEvent(element, event, handler) {
        if (element.addEventListener) {
            element.addEventListener(event, handler, false);
        }
        else {
            // Hello, IE!
            if (element.attachEvent) {
                element.attachEvent('on' + event, handler);
            }
        }
    }
    imageHasData(img) {
        return !!img.exifdata;
    }
    base64ToArrayBuffer(base64) {
        base64 = base64.replace(/^data:([^;]+);base64,/gim, '');
        const binary = atob(base64);
        const len = binary.length;
        const buffer = new ArrayBuffer(len);
        const view = new Uint8Array(buffer);
        for (let i = 0; i < len; i++) {
            view[i] = binary.charCodeAt(i);
        }
        return buffer;
    }
    objectURLToBlob(url, callback) {
        const http = new XMLHttpRequest();
        http.open('GET', url, true);
        http.responseType = 'blob';
        http.onload = () => {
            if (http.status === 200 || http.status === 0) {
                callback(http.response);
            }
        };
        http.send();
    }
    getImageData(img, callback) {
        const handleBinaryFile = (binFile) => {
            const data = this.findEXIFinJPEG(binFile);
            const iptcdata = this.findIPTCinJPEG(binFile);
            img.exifdata = data || {};
            img.iptcdata = iptcdata || {};
            if (callback) {
                callback.call(img);
            }
        };
        if ('src' in img && img.src) {
            if (/^data:/i.test(img.src)) {
                // Data URI
                const arrayBuffer = this.base64ToArrayBuffer(img.src);
                handleBinaryFile(arrayBuffer);
            }
            else {
                if (/^blob:/i.test(img.src)) {
                    // Object URL
                    const fileReader = new FileReader();
                    fileReader.onload = (e) => {
                        handleBinaryFile(e.target.result);
                    };
                    this.objectURLToBlob(img.src, (blob) => {
                        fileReader.readAsArrayBuffer(blob);
                    });
                }
                else {
                    const http = new XMLHttpRequest();
                    http.onload = () => {
                        if (http.status === 200 || http.status === 0) {
                            handleBinaryFile(http.response);
                        }
                        else {
                            throw new Error('Could not load image');
                        }
                    };
                    http.open('GET', img.src, true);
                    http.responseType = 'arraybuffer';
                    http.send(null);
                }
            }
        }
        else {
            if (FileReader && (img instanceof Blob || img instanceof File)) {
                const fileReader = new FileReader();
                fileReader.onload = (e) => {
                    this.log('Got file of length ' + e.target.result.byteLength);
                    handleBinaryFile(e.target.result);
                };
                fileReader.readAsArrayBuffer(img);
            }
        }
    }
    findEXIFinJPEG(file) {
        const dataView = new DataView(file);
        this.log('Got file of length ' + file.byteLength);
        if (dataView.getUint8(0) !== 0xff || dataView.getUint8(1) !== 0xd8) {
            this.log('Not a valid JPEG');
            return false; // not a valid jpeg
        }
        let offset = 2;
        const length = file.byteLength;
        let marker;
        while (offset < length) {
            if (dataView.getUint8(offset) !== 0xff) {
                this.log('Not a valid marker at offset ' +
                    offset +
                    ', found: ' +
                    dataView.getUint8(offset));
                return false; // not a valid marker, something is wrong
            }
            marker = dataView.getUint8(offset + 1);
            this.log(marker);
            // we could implement handling for other markers here,
            // but we're only looking for 0xFFE1 for EXIF data
            if (marker === 225) {
                this.log('Found 0xFFE1 marker');
                return this.readEXIFData(dataView, offset + 4); // , dataView.getUint16(offset + 2) - 2);
                // offset += 2 + file.getShortAt(offset+2, true);
            }
            else {
                offset += 2 + dataView.getUint16(offset + 2);
            }
        }
    }
    findIPTCinJPEG(file) {
        const dataView = new DataView(file);
        this.log('Got file of length ' + file.byteLength);
        if (dataView.getUint8(0) !== 0xff || dataView.getUint8(1) !== 0xd8) {
            this.log('Not a valid JPEG');
            return false; // not a valid jpeg
        }
        let offset = 2;
        const length = file.byteLength;
        // tslint:disable-next-line:variable-name
        const isFieldSegmentStart = (_dataView, _offset) => {
            return (_dataView.getUint8(_offset) === 0x38 &&
                _dataView.getUint8(_offset + 1) === 0x42 &&
                _dataView.getUint8(_offset + 2) === 0x49 &&
                _dataView.getUint8(_offset + 3) === 0x4d &&
                _dataView.getUint8(_offset + 4) === 0x04 &&
                _dataView.getUint8(_offset + 5) === 0x04);
        };
        while (offset < length) {
            if (isFieldSegmentStart(dataView, offset)) {
                // Get the length of the name header (which is padded to an even number of bytes)
                let nameHeaderLength = dataView.getUint8(offset + 7);
                if (nameHeaderLength % 2 !== 0) {
                    nameHeaderLength += 1;
                }
                // Check for pre photoshop 6 format
                if (nameHeaderLength === 0) {
                    // Always 4
                    nameHeaderLength = 4;
                }
                const startOffset = offset + 8 + nameHeaderLength;
                const sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);
                return this.readIPTCData(file, startOffset, sectionLength);
            }
            // Not the marker, continue searching
            offset++;
        }
    }
    readIPTCData(file, startOffset, sectionLength) {
        const dataView = new DataView(file);
        const data = {};
        let fieldValue;
        let fieldName;
        let dataSize;
        let segmentType;
        let segmentSize;
        let segmentStartPos = startOffset;
        while (segmentStartPos < startOffset + sectionLength) {
            if (dataView.getUint8(segmentStartPos) === 0x1c &&
                dataView.getUint8(segmentStartPos + 1) === 0x02) {
                segmentType = dataView.getUint8(segmentStartPos + 2);
                if (segmentType in this.IptcFieldMap) {
                    dataSize = dataView.getInt16(segmentStartPos + 3);
                    segmentSize = dataSize + 5;
                    fieldName = this.IptcFieldMap[segmentType];
                    fieldValue = this.getStringFromDB(dataView, segmentStartPos + 5, dataSize);
                    // Check if we already stored a value with this name
                    if (data.hasOwnProperty(fieldName)) {
                        // Value already stored with this name, create multivalue field
                        if (data[fieldName] instanceof Array) {
                            data[fieldName].push(fieldValue);
                        }
                        else {
                            data[fieldName] = [data[fieldName], fieldValue];
                        }
                    }
                    else {
                        data[fieldName] = fieldValue;
                    }
                }
            }
            segmentStartPos++;
        }
        return data;
    }
    readTags(file, tiffStart, dirStart, strings, bigEnd) {
        const entries = file.getUint16(dirStart, !bigEnd);
        const tags = {};
        let entryOffset;
        let tag;
        for (let i = 0; i < entries; i++) {
            entryOffset = dirStart + i * 12 + 2;
            tag = strings[file.getUint16(entryOffset, !bigEnd)];
            if (!tag) {
                this.log('Unknown tag: ' + file.getUint16(entryOffset, !bigEnd));
            }
            tags[tag] = this.readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);
        }
        return tags;
    }
    readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {
        const type = file.getUint16(entryOffset + 2, !bigEnd);
        const numValues = file.getUint32(entryOffset + 4, !bigEnd);
        const valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart;
        let offset;
        let vals;
        let val;
        let n;
        let numerator;
        let denominator;
        switch (type) {
            case 1: // byte, 8-bit unsigned int
            case 7: // undefined, 8-bit byte, value depending on field
                if (numValues === 1) {
                    return file.getUint8(entryOffset + 8, !bigEnd);
                }
                else {
                    offset = numValues > 4 ? valueOffset : entryOffset + 8;
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getUint8(offset + n);
                    }
                    return vals;
                }
            case 2: // ascii, 8-bit byte
                offset = numValues > 4 ? valueOffset : entryOffset + 8;
                return this.getStringFromDB(file, offset, numValues - 1);
            case 3: // short, 16 bit int
                if (numValues === 1) {
                    return file.getUint16(entryOffset + 8, !bigEnd);
                }
                else {
                    offset = numValues > 2 ? valueOffset : entryOffset + 8;
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getUint16(offset + 2 * n, !bigEnd);
                    }
                    return vals;
                }
            case 4: // long, 32 bit int
                if (numValues === 1) {
                    return file.getUint32(entryOffset + 8, !bigEnd);
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);
                    }
                    return vals;
                }
            case 5: // rational = two long values, first is numerator, second is denominator
                if (numValues === 1) {
                    numerator = file.getUint32(valueOffset, !bigEnd);
                    denominator = file.getUint32(valueOffset + 4, !bigEnd);
                    val = new Fraction(numerator / denominator);
                    val.numerator = numerator;
                    val.denominator = denominator;
                    return val;
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);
                        denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);
                        vals[n] = new Fraction(numerator / denominator);
                        vals[n].numerator = numerator;
                        vals[n].denominator = denominator;
                    }
                    return vals;
                }
            case 9: // slong, 32 bit signed int
                if (numValues === 1) {
                    return file.getInt32(entryOffset + 8, !bigEnd);
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);
                    }
                    return vals;
                }
            case 10: // signed rational, two slongs, first is numerator, second is denominator
                if (numValues === 1) {
                    return (file.getInt32(valueOffset, !bigEnd) /
                        file.getInt32(valueOffset + 4, !bigEnd));
                }
                else {
                    vals = [];
                    for (n = 0; n < numValues; n++) {
                        vals[n] =
                            file.getInt32(valueOffset + 8 * n, !bigEnd) /
                                file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);
                    }
                    return vals;
                }
            default:
                break;
        }
    }
    getStringFromDB(buffer, start, length) {
        let outstr = '';
        for (let n = start; n < start + length; n++) {
            outstr += String.fromCharCode(buffer.getUint8(n));
        }
        return outstr;
    }
    readEXIFData(file, start) {
        if (this.getStringFromDB(file, start, 4) !== 'Exif') {
            this.log('Not valid EXIF data! ' + this.getStringFromDB(file, start, 4));
            return false;
        }
        let bigEnd;
        let tags;
        let tag;
        let exifData;
        let gpsData;
        const tiffOffset = start + 6;
        // test for TIFF validity and endianness
        if (file.getUint16(tiffOffset) === 0x4949) {
            bigEnd = false;
        }
        else {
            if (file.getUint16(tiffOffset) === 0x4d4d) {
                bigEnd = true;
            }
            else {
                this.log('Not valid TIFF data! (no 0x4949 or 0x4D4D)');
                return false;
            }
        }
        if (file.getUint16(tiffOffset + 2, !bigEnd) !== 0x002a) {
            this.log('Not valid TIFF data! (no 0x002A)');
            return false;
        }
        const firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);
        if (firstIFDOffset < 0x00000008) {
            this.log('Not valid TIFF data! (First offset less than 8)', file.getUint32(tiffOffset + 4, !bigEnd));
            return false;
        }
        tags = this.readTags(file, tiffOffset, tiffOffset + firstIFDOffset, this.TiffTags, bigEnd);
        if (tags.ExifIFDPointer) {
            exifData = this.readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, this.Tags, bigEnd);
            for (tag in exifData) {
                if ({}.hasOwnProperty.call(exifData, tag)) {
                    switch (tag) {
                        case 'LightSource':
                        case 'Flash':
                        case 'MeteringMode':
                        case 'ExposureProgram':
                        case 'SensingMethod':
                        case 'SceneCaptureType':
                        case 'SceneType':
                        case 'CustomRendered':
                        case 'WhiteBalance':
                        case 'GainControl':
                        case 'Contrast':
                        case 'Saturation':
                        case 'Sharpness':
                        case 'SubjectDistanceRange':
                        case 'FileSource':
                            exifData[tag] = this.StringValues[tag][exifData[tag]];
                            break;
                        case 'ExifVersion':
                        case 'FlashpixVersion':
                            exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);
                            break;
                        case 'ComponentsConfiguration':
                            const compopents = 'Components';
                            exifData[tag] =
                                this.StringValues[compopents][exifData[tag][0]] +
                                    this.StringValues[compopents][exifData[tag][1]] +
                                    this.StringValues[compopents][exifData[tag][2]] +
                                    this.StringValues[compopents][exifData[tag][3]];
                            break;
                        default:
                            break;
                    }
                    tags[tag] = exifData[tag];
                }
            }
        }
        if (tags.GPSInfoIFDPointer) {
            gpsData = this.readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, this.GPSTags, bigEnd);
            for (tag in gpsData) {
                if ({}.hasOwnProperty.call(gpsData, tag)) {
                    switch (tag) {
                        case 'GPSVersionID':
                            gpsData[tag] =
                                gpsData[tag][0] +
                                    '.' +
                                    gpsData[tag][1] +
                                    '.' +
                                    gpsData[tag][2] +
                                    '.' +
                                    gpsData[tag][3];
                            break;
                        default:
                            break;
                    }
                    tags[tag] = gpsData[tag];
                }
            }
        }
        return tags;
    }
    //   get rid of this silly issue
    checkImageType(img) {
        return img instanceof Image || img instanceof HTMLImageElement;
    }
    getData(img, callback) {
        if (this.checkImageType(img) && !img.complete) {
            return false;
        }
        if (!this.imageHasData(img)) {
            this.getImageData(img, callback);
        }
        else {
            if (callback) {
                callback.call(img);
            }
        }
        return true;
    }
    getTag(img, tag) {
        if (!this.imageHasData(img)) {
            return;
        }
        return img.exifdata[tag];
    }
    getAllTags(img) {
        if (!this.imageHasData(img)) {
            return {};
        }
        let a;
        const data = img.exifdata;
        const tags = {};
        for (a in data) {
            if (data.hasOwnProperty(a)) {
                tags[a] = data[a];
            }
        }
        return tags;
    }
    pretty(img) {
        if (!this.imageHasData(img)) {
            return '';
        }
        let a;
        const data = img.exifdata;
        let strPretty = '';
        for (a in data) {
            if (data.hasOwnProperty(a)) {
                if (typeof data[a] === 'object') {
                    if (data[a] instanceof Number) {
                        strPretty += `${a} : ${data[a]} [${data[a].numerator}/${data[a].denominator}]\r\n`;
                    }
                    else {
                        strPretty += `${a} : [${data[a].length} values]\r\n`;
                    }
                }
                else {
                    strPretty += `${a} : ${data[a]}\r\n`;
                }
            }
        }
        return strPretty;
    }
    readFromBinaryFile(file) {
        return this.findEXIFinJPEG(file);
    }
    log(...args) {
        if (this.debug) {
            console.log(args);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhpZi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1pbWctY3JvcHBlci8iLCJzb3VyY2VzIjpbImxpYi9pbWFnZS1jcm9wcGVyL2V4aWYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxPQUFPLFFBQVMsU0FBUSxNQUFNO0NBR25DO0FBT0QsTUFBTSxPQUFPLElBQUk7SUFBakI7UUFDUyxVQUFLLEdBQUcsS0FBSyxDQUFDO1FBRWQsaUJBQVksR0FBUTtZQUN6QixJQUFJLEVBQUUsU0FBUztZQUNmLElBQUksRUFBRSxRQUFRO1lBQ2QsSUFBSSxFQUFFLFVBQVU7WUFDaEIsSUFBSSxFQUFFLGFBQWE7WUFDbkIsSUFBSSxFQUFFLFFBQVE7WUFDZCxJQUFJLEVBQUUsYUFBYTtZQUNuQixJQUFJLEVBQUUsZUFBZTtZQUNyQixJQUFJLEVBQUUsVUFBVTtZQUNoQixJQUFJLEVBQUUsV0FBVztZQUNqQixJQUFJLEVBQUUsVUFBVTtTQUNqQixDQUFDO1FBRUssU0FBSSxHQUFRO1lBQ2pCLGVBQWU7WUFDZixNQUFNLEVBQUUsYUFBYTtZQUNyQixNQUFNLEVBQUUsaUJBQWlCO1lBRXpCLGtCQUFrQjtZQUNsQixNQUFNLEVBQUUsWUFBWTtZQUVwQixzQkFBc0I7WUFDdEIsTUFBTSxFQUFFLGlCQUFpQjtZQUN6QixNQUFNLEVBQUUsaUJBQWlCO1lBQ3pCLE1BQU0sRUFBRSx5QkFBeUI7WUFDakMsTUFBTSxFQUFFLHdCQUF3QjtZQUVoQyxtQkFBbUI7WUFDbkIsTUFBTSxFQUFFLFdBQVc7WUFDbkIsTUFBTSxFQUFFLGFBQWE7WUFFckIsZUFBZTtZQUNmLE1BQU0sRUFBRSxrQkFBa0I7WUFFMUIsZ0JBQWdCO1lBQ2hCLE1BQU0sRUFBRSxrQkFBa0I7WUFDMUIsTUFBTSxFQUFFLG1CQUFtQjtZQUMzQixNQUFNLEVBQUUsWUFBWTtZQUNwQixNQUFNLEVBQUUsb0JBQW9CO1lBQzVCLE1BQU0sRUFBRSxxQkFBcUI7WUFFN0IsNEJBQTRCO1lBQzVCLE1BQU0sRUFB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Q1g7UUFDRCxJQUFJLENBQU0sQ0FBQztRQUNYLE1BQU0sSUFBSSxHQUFRLEdBQUcsQ0FBQyxRQUFRLENBQUM7UUFDL0IsSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ25CLEtBQUssQ0FBQyxJQUFJLElBQUksRUFBRTtZQUNkLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDMUIsSUFBSSxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7b0JBQy9CLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLE1BQU0sRUFBRTt3QkFDN0IsU0FBUyxJQUFJLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxJQUNsRCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FDVixPQUFPLENBQUM7cUJBQ1Q7eUJBQU07d0JBQ0wsU0FBUyxJQUFJLEdBQUcsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLGNBQWMsQ0FBQztxQkFDdEQ7aUJBQ0Y7cUJBQU07b0JBQ0wsU0FBUyxJQUFJLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO2lCQUN0QzthQUNGO1NBQ0Y7UUFDRCxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDO0lBRU0sa0JBQWtCLENBQUMsSUFBaUI7UUFDekMsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFTSxHQUFHLENBQUMsR0FBRyxJQUFXO1FBQ3ZCLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDbkI7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRnJhY3Rpb24gZXh0ZW5kcyBOdW1iZXIge1xyXG4gIG51bWVyYXRvcjogbnVtYmVyO1xyXG4gIGRlbm9taW5hdG9yOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUltYWdlRXh0ZW5kZWQgZXh0ZW5kcyBIVE1MSW1hZ2VFbGVtZW50IHtcclxuICBleGlmZGF0YTogYW55O1xyXG4gIGlwdGNkYXRhOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFeGlmIHtcclxuICBwdWJsaWMgZGVidWcgPSBmYWxzZTtcclxuXHJcbiAgcHVibGljIElwdGNGaWVsZE1hcDogYW55ID0ge1xyXG4gICAgMHg3ODogJ2NhcHRpb24nLFxyXG4gICAgMHg2ZTogJ2NyZWRpdCcsXHJcbiAgICAweDE5OiAna2V5d29yZHMnLFxyXG4gICAgMHgzNzogJ2RhdGVDcmVhdGVkJyxcclxuICAgIDB4NTA6ICdieWxpbmUnLFxyXG4gICAgMHg1NTogJ2J5bGluZVRpdGxlJyxcclxuICAgIDB4N2E6ICdjYXB0aW9uV3JpdGVyJyxcclxuICAgIDB4Njk6ICdoZWFkbGluZScsXHJcbiAgICAweDc0OiAnY29weXJpZ2h0JyxcclxuICAgIDB4MGY6ICdjYXRlZ29yeSdcclxuICB9O1xyXG5cclxuICBwdWJsaWMgVGFnczogYW55ID0ge1xyXG4gICAgLy8gdmVyc2lvbiB0YWdzXHJcbiAgICAweDkwMDA6ICdFeGlmVmVyc2lvbicsIC8vIEVYSUYgdmVyc2lvblxyXG4gICAgMHhhMDAwOiAnRmxhc2hwaXhWZXJzaW9uJywgLy8gRmxhc2hwaXggZm9ybWF0IHZlcnNpb25cclxuXHJcbiAgICAvLyBjb2xvcnNwYWNlIHRhZ3NcclxuICAgIDB4YTAwMTogJ0NvbG9yU3BhY2UnLCAvLyBDb2xvciBzcGFjZSBpbmZvcm1hdGlvbiB0YWdcclxuXHJcbiAgICAvLyBpbWFnZSBjb25maWd1cmF0aW9uXHJcbiAgICAweGEwMDI6ICdQaXhlbFhEaW1lbnNpb24nLCAvLyBWYWxpZCB3aWR0aCBvZiBtZWFuaW5nZnVsIGltYWdlXHJcbiAgICAweGEwMDM6ICdQaXhlbFlEaW1lbnNpb24nLCAvLyBWYWxpZCBoZWlnaHQgb2YgbWVhbmluZ2Z1bCBpbWFnZVxyXG4gICAgMHg5MTAxOiAnQ29tcG9uZW50c0NvbmZpZ3VyYXRpb24nLCAvLyBJbmZvcm1hdGlvbiBhYm91dCBjaGFubmVsc1xyXG4gICAgMHg5MTAyOiAnQ29tcHJlc3NlZEJpdHNQZXJQaXhlbCcsIC8vIENvbXByZXNzZWQgYml0cyBwZXIgcGl4ZWxcclxuXHJcbiAgICAvLyB1c2VyIGluZm9ybWF0aW9uXHJcbiAgICAweDkyN2M6ICdNYWtlck5vdGUnLCAvLyBBbnkgZGVzaXJlZCBpbmZvcm1hdGlvbiB3cml0dGVuIGJ5IHRoZSBtYW51ZmFjdHVyZXJcclxuICAgIDB4OTI4NjogJ1VzZXJDb21tZW50JywgLy8gQ29tbWVudHMgYnkgdXNlclxyXG5cclxuICAgIC8vIHJlbGF0ZWQgZmlsZVxyXG4gICAgMHhhMDA0OiAnUmVsYXRlZFNvdW5kRmlsZScsIC8vIE5hbWUgb2YgcmVsYXRlZCBzb3VuZCBmaWxlXHJcblxyXG4gICAgLy8gZGF0ZSBhbmQgdGltZVxyXG4gICAgMHg5MDAzOiAnRGF0ZVRpbWVPcmlnaW5hbCcsIC8vIERhdGUgYW5kIHRpbWUgd2hlbiB0aGUgb3JpZ2luYWwgaW1hZ2Ugd2FzIGdlbmVyYXRlZFxyXG4gICAgMHg5MDA0OiAnRGF0ZVRpbWVEaWdpdGl6ZWQnLCAvLyBEYXRlIGFuZCB0aW1lIHdoZW4gdGhlIGltYWdlIHdhcyBzdG9yZWQgZGlnaXRhbGx5XHJcbiAgICAweDkyOTA6ICdTdWJzZWNUaW1lJywgLy8gRnJhY3Rpb25zIG9mIHNlY29uZHMgZm9yIERhdGVUaW1lXHJcbiAgICAweDkyOTE6ICdTdWJzZWNUaW1lT3JpZ2luYWwnLCAvLyBGcmFjdGlvbnMgb2Ygc2Vjb25kcyBmb3IgRGF0ZVRpbWVPcmlnaW5hbFxyXG4gICAgMHg5MjkyOiAnU3Vic2VjVGltZURpZ2l0aXplZCcsIC8vIEZyYWN0aW9ucyBvZiBzZWNvbmRzIGZvciBEYXRlVGltZURpZ2l0aXplZFxyXG5cclxuICAgIC8vIHBpY3R1cmUtdGFraW5nIGNvbmRpdGlvbnNcclxuICAgIDB4ODI5YTogJ0V4cG9zdXJlVGltZScsIC8vIEV4cG9zdXJlIHRpbWUgKGluIHNlY29uZHMpXHJcbiAgICAweDgyOWQ6ICdGTnVtYmVyJywgLy8gRiBudW1iZXJcclxuICAgIDB4ODgyMjogJ0V4cG9zdXJlUHJvZ3JhbScsIC8vIEV4cG9zdXJlIHByb2dyYW1cclxuICAgIDB4ODgyNDogJ1NwZWN0cmFsU2Vuc2l0aXZpdHknLCAvLyBTcGVjdHJhbCBzZW5zaXRpdml0eVxyXG4gICAgMHg4ODI3OiAnSVNPU3BlZWRSYXRpbmdzJywgLy8gSVNPIHNwZWVkIHJhdGluZ1xyXG4gICAgMHg4ODI4OiAnT0VDRicsIC8vIE9wdG9lbGVjdHJpYyBjb252ZXJzaW9uIGZhY3RvclxyXG4gICAgMHg5MjAxOiAnU2h1dHRlclNwZWVkVmFsdWUnLCAvLyBTaHV0dGVyIHNwZWVkXHJcbiAgICAweDkyMDI6ICdBcGVydHVyZVZhbHVlJywgLy8gTGVucyBhcGVydHVyZVxyXG4gICAgMHg5MjAzOiAnQnJpZ2h0bmVzc1ZhbHVlJywgLy8gVmFsdWUgb2YgYnJpZ2h0bmVzc1xyXG4gICAgMHg5MjA0OiAnRXhwb3N1cmVCaWFzJywgLy8gRXhwb3N1cmUgYmlhc1xyXG4gICAgMHg5MjA1OiAnTWF4QXBlcnR1cmVWYWx1ZScsIC8vIFNtYWxsZXN0IEYgbnVtYmVyIG9mIGxlbnNcclxuICAgIDB4OTIwNjogJ1N1YmplY3REaXN0YW5jZScsIC8vIERpc3RhbmNlIHRvIHN1YmplY3QgaW4gbWV0ZXJzXHJcbiAgICAweDkyMDc6ICdNZXRlcmluZ01vZGUnLCAvLyBNZXRlcmluZyBtb2RlXHJcbiAgICAweDkyMDg6ICdMaWdodFNvdXJjZScsIC8vIEtpbmQgb2YgbGlnaHQgc291cmNlXHJcbiAgICAweDkyMDk6ICdGbGFzaCcsIC8vIEZsYXNoIHN0YXR1c1xyXG4gICAgMHg5MjE0OiAnU3ViamVjdEFyZWEnLCAvLyBMb2NhdGlvbiBhbmQgYXJlYSBvZiBtYWluIHN1YmplY3RcclxuICAgIDB4OTIwYTogJ0ZvY2FsTGVuZ3RoJywgLy8gRm9jYWwgbGVuZ3RoIG9mIHRoZSBsZW5zIGluIG1tXHJcbiAgICAweGEyMGI6ICdGbGFzaEVuZXJneScsIC8vIFN0cm9iZSBlbmVyZ3kgaW4gQkNQU1xyXG4gICAgMHhhMjBjOiAnU3BhdGlhbEZyZXF1ZW5jeVJlc3BvbnNlJywgLy9cclxuICAgIDB4YTIwZTogJ0ZvY2FsUGxhbmVYUmVzb2x1dGlvbicsIC8vIE51bWJlciBvZiBwaXhlbHMgaW4gd2lkdGggZGlyZWN0aW9uIHBlciBGb2NhbFBsYW5lUmVzb2x1dGlvblVuaXRcclxuICAgIDB4YTIwZjogJ0ZvY2FsUGxhbmVZUmVzb2x1dGlvbicsIC8vIE51bWJlciBvZiBwaXhlbHMgaW4gaGVpZ2h0IGRpcmVjdGlvbiBwZXIgRm9jYWxQbGFuZVJlc29sdXRpb25Vbml0XHJcbiAgICAweGEyMTA6ICdGb2NhbFBsYW5lUmVzb2x1dGlvblVuaXQnLCAvLyBVbml0IGZvciBtZWFzdXJpbmcgRm9jYWxQbGFuZVhSZXNvbHV0aW9uIGFuZCBGb2NhbFBsYW5lWVJlc29sdXRpb25cclxuICAgIDB4YTIxNDogJ1N1YmplY3RMb2NhdGlvbicsIC8vIExvY2F0aW9uIG9mIHN1YmplY3QgaW4gaW1hZ2VcclxuICAgIDB4YTIxNTogJ0V4cG9zdXJlSW5kZXgnLCAvLyBFeHBvc3VyZSBpbmRleCBzZWxlY3RlZCBvbiBjYW1lcmFcclxuICAgIDB4YTIxNzogJ1NlbnNpbmdNZXRob2QnLCAvLyBJbWFnZSBzZW5zb3IgdHlwZVxyXG4gICAgMHhhMzAwOiAnRmlsZVNvdXJjZScsIC8vIEltYWdlIHNvdXJjZSAoMyA9PSBEU0MpXHJcbiAgICAweGEzMDE6ICdTY2VuZVR5cGUnLCAvLyBTY2VuZSB0eXBlICgxID09IGRpcmVjdGx5IHBob3RvZ3JhcGhlZClcclxuICAgIDB4YTMwMjogJ0NGQVBhdHRlcm4nLCAvLyBDb2xvciBmaWx0ZXIgYXJyYXkgZ2VvbWV0cmljIHBhdHRlcm5cclxuICAgIDB4YTQwMTogJ0N1c3RvbVJlbmRlcmVkJywgLy8gU3BlY2lhbCBwcm9jZXNzaW5nXHJcbiAgICAweGE0MDI6ICdFeHBvc3VyZU1vZGUnLCAvLyBFeHBvc3VyZSBtb2RlXHJcbiAgICAweGE0MDM6ICdXaGl0ZUJhbGFuY2UnLCAvLyAxID0gYXV0byB3aGl0ZSBiYWxhbmNlLCAyID0gbWFudWFsXHJcbiAgICAweGE0MDQ6ICdEaWdpdGFsWm9vbVJhdGlvbicsIC8vIERpZ2l0YWwgem9vbSByYXRpb1xyXG4gICAgMHhhNDA1OiAnRm9jYWxMZW5ndGhJbjM1bW1GaWxtJywgLy8gRXF1aXZhbGVudCBmb2FjbCBsZW5ndGggYXNzdW1pbmcgMzVtbSBmaWxtIGNhbWVyYSAoaW4gbW0pXHJcbiAgICAweGE0MDY6ICdTY2VuZUNhcHR1cmVUeXBlJywgLy8gVHlwZSBvZiBzY2VuZVxyXG4gICAgMHhhNDA3OiAnR2FpbkNvbnRyb2wnLCAvLyBEZWdyZWUgb2Ygb3ZlcmFsbCBpbWFnZSBnYWluIGFkanVzdG1lbnRcclxuICAgIDB4YTQwODogJ0NvbnRyYXN0JywgLy8gRGlyZWN0aW9uIG9mIGNvbnRyYXN0IHByb2Nlc3NpbmcgYXBwbGllZCBieSBjYW1lcmFcclxuICAgIDB4YTQwOTogJ1NhdHVyYXRpb24nLCAvLyBEaXJlY3Rpb24gb2Ygc2F0dXJhdGlvbiBwcm9jZXNzaW5nIGFwcGxpZWQgYnkgY2FtZXJhXHJcbiAgICAweGE0MGE6ICdTaGFycG5lc3MnLCAvLyBEaXJlY3Rpb24gb2Ygc2hhcnBuZXNzIHByb2Nlc3NpbmcgYXBwbGllZCBieSBjYW1lcmFcclxuICAgIDB4YTQwYjogJ0RldmljZVNldHRpbmdEZXNjcmlwdGlvbicsIC8vXHJcbiAgICAweGE0MGM6ICdTdWJqZWN0RGlzdGFuY2VSYW5nZScsIC8vIERpc3RhbmNlIHRvIHN1YmplY3RcclxuXHJcbiAgICAvLyBvdGhlciB0YWdzXHJcbiAgICAweGEwMDU6ICdJbnRlcm9wZXJhYmlsaXR5SUZEUG9pbnRlcicsXHJcbiAgICAweGE0MjA6ICdJbWFnZVVuaXF1ZUlEJyAvLyBJZGVudGlmaWVyIGFzc2lnbmVkIHVuaXF1ZWx5IHRvIGVhY2ggaW1hZ2VcclxuICB9O1xyXG5cclxuICBwdWJsaWMgVGlmZlRhZ3M6IGFueSA9IHtcclxuICAgIDB4MDEwMDogJ0ltYWdlV2lkdGgnLFxyXG4gICAgMHgwMTAxOiAnSW1hZ2VIZWlnaHQnLFxyXG4gICAgMHg4NzY5OiAnRXhpZklGRFBvaW50ZXInLFxyXG4gICAgMHg4ODI1OiAnR1BTSW5mb0lGRFBvaW50ZXInLFxyXG4gICAgMHhhMDA1OiAnSW50ZXJvcGVyYWJpbGl0eUlGRFBvaW50ZXInLFxyXG4gICAgMHgwMTAyOiAnQml0c1BlclNhbXBsZScsXHJcbiAgICAweDAxMDM6ICdDb21wcmVzc2lvbicsXHJcbiAgICAweDAxMDY6ICdQaG90b21ldHJpY0ludGVycHJldGF0aW9uJyxcclxuICAgIDB4MDExMjogJ09yaWVudGF0aW9uJyxcclxuICAgIDB4MDExNTogJ1NhbXBsZXNQZXJQaXhlbCcsXHJcbiAgICAweDAxMWM6ICdQbGFuYXJDb25maWd1cmF0aW9uJyxcclxuICAgIDB4MDIxMjogJ1lDYkNyU3ViU2FtcGxpbmcnLFxyXG4gICAgMHgwMjEzOiAnWUNiQ3JQb3NpdGlvbmluZycsXHJcbiAgICAweDAxMWE6ICdYUmVzb2x1dGlvbicsXHJcbiAgICAweDAxMWI6ICdZUmVzb2x1dGlvbicsXHJcbiAgICAweDAxMjg6ICdSZXNvbHV0aW9uVW5pdCcsXHJcbiAgICAweDAxMTE6ICdTdHJpcE9mZnNldHMnLFxyXG4gICAgMHgwMTE2OiAnUm93c1BlclN0cmlwJyxcclxuICAgIDB4MDExNzogJ1N0cmlwQnl0ZUNvdW50cycsXHJcbiAgICAweDAyMDE6ICdKUEVHSW50ZXJjaGFuZ2VGb3JtYXQnLFxyXG4gICAgMHgwMjAyOiAnSlBFR0ludGVyY2hhbmdlRm9ybWF0TGVuZ3RoJyxcclxuICAgIDB4MDEyZDogJ1RyYW5zZmVyRnVuY3Rpb24nLFxyXG4gICAgMHgwMTNlOiAnV2hpdGVQb2ludCcsXHJcbiAgICAweDAxM2Y6ICdQcmltYXJ5Q2hyb21hdGljaXRpZXMnLFxyXG4gICAgMHgwMjExOiAnWUNiQ3JDb2VmZmljaWVudHMnLFxyXG4gICAgMHgwMjE0OiAnUmVmZXJlbmNlQmxhY2tXaGl0ZScsXHJcbiAgICAweDAxMzI6ICdEYXRlVGltZScsXHJcbiAgICAweDAxMGU6ICdJbWFnZURlc2NyaXB0aW9uJyxcclxuICAgIDB4MDEwZjogJ01ha2UnLFxyXG4gICAgMHgwMTEwOiAnTW9kZWwnLFxyXG4gICAgMHgwMTMxOiAnU29mdHdhcmUnLFxyXG4gICAgMHgwMTNiOiAnQXJ0aXN0JyxcclxuICAgIDB4ODI5ODogJ0NvcHlyaWdodCdcclxuICB9O1xyXG5cclxuICBwdWJsaWMgR1BTVGFnczogYW55ID0ge1xyXG4gICAgMHgwMDAwOiAnR1BTVmVyc2lvbklEJyxcclxuICAgIDB4MDAwMTogJ0dQU0xhdGl0dWRlUmVmJyxcclxuICAgIDB4MDAwMjogJ0dQU0xhdGl0dWRlJyxcclxuICAgIDB4MDAwMzogJ0dQU0xvbmdpdHVkZVJlZicsXHJcbiAgICAweDAwMDQ6ICdHUFNMb25naXR1ZGUnLFxyXG4gICAgMHgwMDA1OiAnR1BTQWx0aXR1ZGVSZWYnLFxyXG4gICAgMHgwMDA2OiAnR1BTQWx0aXR1ZGUnLFxyXG4gICAgMHgwMDA3OiAnR1BTVGltZVN0YW1wJyxcclxuICAgIDB4MDAwODogJ0dQU1NhdGVsbGl0ZXMnLFxyXG4gICAgMHgwMDA5OiAnR1BTU3RhdHVzJyxcclxuICAgIDB4MDAwYTogJ0dQU01lYXN1cmVNb2RlJyxcclxuICAgIDB4MDAwYjogJ0dQU0RPUCcsXHJcbiAgICAweDAwMGM6ICdHUFNTcGVlZFJlZicsXHJcbiAgICAweDAwMGQ6ICdHUFNTcGVlZCcsXHJcbiAgICAweDAwMGU6ICdHUFNUcmFja1JlZicsXHJcbiAgICAweDAwMGY6ICdHUFNUcmFjaycsXHJcbiAgICAweDAwMTA6ICdHUFNJbWdEaXJlY3Rpb25SZWYnLFxyXG4gICAgMHgwMDExOiAnR1BTSW1nRGlyZWN0aW9uJyxcclxuICAgIDB4MDAxMjogJ0dQU01hcERhdHVtJyxcclxuICAgIDB4MDAxMzogJ0dQU0Rlc3RMYXRpdHVkZVJlZicsXHJcbiAgICAweDAwMTQ6ICdHUFNEZXN0TGF0aXR1ZGUnLFxyXG4gICAgMHgwMDE1OiAnR1BTRGVzdExvbmdpdHVkZVJlZicsXHJcbiAgICAweDAwMTY6ICdHUFNEZXN0TG9uZ2l0dWRlJyxcclxuICAgIDB4MDAxNzogJ0dQU0Rlc3RCZWFyaW5nUmVmJyxcclxuICAgIDB4MDAxODogJ0dQU0Rlc3RCZWFyaW5nJyxcclxuICAgIDB4MDAxOTogJ0dQU0Rlc3REaXN0YW5jZVJlZicsXHJcbiAgICAweDAwMWE6ICdHUFNEZXN0RGlzdGFuY2UnLFxyXG4gICAgMHgwMDFiOiAnR1BTUHJvY2Vzc2luZ01ldGhvZCcsXHJcbiAgICAweDAwMWM6ICdHUFNBcmVhSW5mb3JtYXRpb24nLFxyXG4gICAgMHgwMDFkOiAnR1BTRGF0ZVN0YW1wJyxcclxuICAgIDB4MDAxZTogJ0dQU0RpZmZlcmVudGlhbCdcclxuICB9O1xyXG5cclxuICBwdWJsaWMgU3RyaW5nVmFsdWVzOiBhbnkgPSB7XHJcbiAgICBFeHBvc3VyZVByb2dyYW06IHtcclxuICAgICAgMDogJ05vdCBkZWZpbmVkJyxcclxuICAgICAgMTogJ01hbnVhbCcsXHJcbiAgICAgIDI6ICdOb3JtYWwgcHJvZ3JhbScsXHJcbiAgICAgIDM6ICdBcGVydHVyZSBwcmlvcml0eScsXHJcbiAgICAgIDQ6ICdTaHV0dGVyIHByaW9yaXR5JyxcclxuICAgICAgNTogJ0NyZWF0aXZlIHByb2dyYW0nLFxyXG4gICAgICA2OiAnQWN0aW9uIHByb2dyYW0nLFxyXG4gICAgICA3OiAnUG9ydHJhaXQgbW9kZScsXHJcbiAgICAgIDg6ICdMYW5kc2NhcGUgbW9kZSdcclxuICAgIH0sXHJcbiAgICBNZXRlcmluZ01vZGU6IHtcclxuICAgICAgMDogJ1Vua25vd24nLFxyXG4gICAgICAxOiAnQXZlcmFnZScsXHJcbiAgICAgIDI6ICdDZW50ZXJXZWlnaHRlZEF2ZXJhZ2UnLFxyXG4gICAgICAzOiAnU3BvdCcsXHJcbiAgICAgIDQ6ICdNdWx0aVNwb3QnLFxyXG4gICAgICA1OiAnUGF0dGVybicsXHJcbiAgICAgIDY6ICdQYXJ0aWFsJyxcclxuICAgICAgMjU1OiAnT3RoZXInXHJcbiAgICB9LFxyXG4gICAgTGlnaHRTb3VyY2U6IHtcclxuICAgICAgMDogJ1Vua25vd24nLFxyXG4gICAgICAxOiAnRGF5bGlnaHQnLFxyXG4gICAgICAyOiAnRmx1b3Jlc2NlbnQnLFxyXG4gICAgICAzOiAnVHVuZ3N0ZW4gKGluY2FuZGVzY2VudCBsaWdodCknLFxyXG4gICAgICA0OiAnRmxhc2gnLFxyXG4gICAgICA5OiAnRmluZSB3ZWF0aGVyJyxcclxuICAgICAgMTA6ICdDbG91ZHkgd2VhdGhlcicsXHJcbiAgICAgIDExOiAnU2hhZGUnLFxyXG4gICAgICAxMjogJ0RheWxpZ2h0IGZsdW9yZXNjZW50IChEIDU3MDAgLSA3MTAwSyknLFxyXG4gICAgICAxMzogJ0RheSB3aGl0ZSBmbHVvcmVzY2VudCAoTiA0NjAwIC0gNTQwMEspJyxcclxuICAgICAgMTQ6ICdDb29sIHdoaXRlIGZsdW9yZXNjZW50IChXIDM5MDAgLSA0NTAwSyknLFxyXG4gICAgICAxNTogJ1doaXRlIGZsdW9yZXNjZW50IChXVyAzMjAwIC0gMzcwMEspJyxcclxuICAgICAgMTc6ICdTdGFuZGFyZCBsaWdodCBBJyxcclxuICAgICAgMTg6ICdTdGFuZGFyZCBsaWdodCBCJyxcclxuICAgICAgMTk6ICdTdGFuZGFyZCBsaWdodCBDJyxcclxuICAgICAgMjA6ICdENTUnLFxyXG4gICAgICAyMTogJ0Q2NScsXHJcbiAgICAgIDIyOiAnRDc1JyxcclxuICAgICAgMjM6ICdENTAnLFxyXG4gICAgICAyNDogJ0lTTyBzdHVkaW8gdHVuZ3N0ZW4nLFxyXG4gICAgICAyNTU6ICdPdGhlcidcclxuICAgIH0sXHJcbiAgICBGbGFzaDoge1xyXG4gICAgICAweDAwMDA6ICdGbGFzaCBkaWQgbm90IGZpcmUnLFxyXG4gICAgICAweDAwMDE6ICdGbGFzaCBmaXJlZCcsXHJcbiAgICAgIDB4MDAwNTogJ1N0cm9iZSByZXR1cm4gbGlnaHQgbm90IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDA3OiAnU3Ryb2JlIHJldHVybiBsaWdodCBkZXRlY3RlZCcsXHJcbiAgICAgIDB4MDAwOTogJ0ZsYXNoIGZpcmVkLCBjb21wdWxzb3J5IGZsYXNoIG1vZGUnLFxyXG4gICAgICAweDAwMGQ6ICdGbGFzaCBmaXJlZCwgY29tcHVsc29yeSBmbGFzaCBtb2RlLCByZXR1cm4gbGlnaHQgbm90IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDBmOiAnRmxhc2ggZmlyZWQsIGNvbXB1bHNvcnkgZmxhc2ggbW9kZSwgcmV0dXJuIGxpZ2h0IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDEwOiAnRmxhc2ggZGlkIG5vdCBmaXJlLCBjb21wdWxzb3J5IGZsYXNoIG1vZGUnLFxyXG4gICAgICAweDAwMTg6ICdGbGFzaCBkaWQgbm90IGZpcmUsIGF1dG8gbW9kZScsXHJcbiAgICAgIDB4MDAxOTogJ0ZsYXNoIGZpcmVkLCBhdXRvIG1vZGUnLFxyXG4gICAgICAweDAwMWQ6ICdGbGFzaCBmaXJlZCwgYXV0byBtb2RlLCByZXR1cm4gbGlnaHQgbm90IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDFmOiAnRmxhc2ggZmlyZWQsIGF1dG8gbW9kZSwgcmV0dXJuIGxpZ2h0IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDIwOiAnTm8gZmxhc2ggZnVuY3Rpb24nLFxyXG4gICAgICAweDAwNDE6ICdGbGFzaCBmaXJlZCwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZScsXHJcbiAgICAgIDB4MDA0NTogJ0ZsYXNoIGZpcmVkLCByZWQtZXllIHJlZHVjdGlvbiBtb2RlLCByZXR1cm4gbGlnaHQgbm90IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDQ3OiAnRmxhc2ggZmlyZWQsIHJlZC1leWUgcmVkdWN0aW9uIG1vZGUsIHJldHVybiBsaWdodCBkZXRlY3RlZCcsXHJcbiAgICAgIDB4MDA0OTogJ0ZsYXNoIGZpcmVkLCBjb21wdWxzb3J5IGZsYXNoIG1vZGUsIHJlZC1leWUgcmVkdWN0aW9uIG1vZGUnLFxyXG4gICAgICAweDAwNGQ6ICdGbGFzaCBmaXJlZCwgY29tcHVsc29yeSBmbGFzaCBtb2RlLCByZWQtZXllIHJlZHVjdGlvbiBtb2RlLCByZXR1cm4gbGlnaHQgbm90IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDRmOiAnRmxhc2ggZmlyZWQsIGNvbXB1bHNvcnkgZmxhc2ggbW9kZSwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZSwgcmV0dXJuIGxpZ2h0IGRldGVjdGVkJyxcclxuICAgICAgMHgwMDU5OiAnRmxhc2ggZmlyZWQsIGF1dG8gbW9kZSwgcmVkLWV5ZSByZWR1Y3Rpb24gbW9kZScsXHJcbiAgICAgIDB4MDA1ZDogJ0ZsYXNoIGZpcmVkLCBhdXRvIG1vZGUsIHJldHVybiBsaWdodCBub3QgZGV0ZWN0ZWQsIHJlZC1leWUgcmVkdWN0aW9uIG1vZGUnLFxyXG4gICAgICAweDAwNWY6ICdGbGFzaCBmaXJlZCwgYXV0byBtb2RlLCByZXR1cm4gbGlnaHQgZGV0ZWN0ZWQsIHJlZC1leWUgcmVkdWN0aW9uIG1vZGUnXHJcbiAgICB9LFxyXG4gICAgU2Vuc2luZ01ldGhvZDoge1xyXG4gICAgICAxOiAnTm90IGRlZmluZWQnLFxyXG4gICAgICAyOiAnT25lLWNoaXAgY29sb3IgYXJlYSBzZW5zb3InLFxyXG4gICAgICAzOiAnVHdvLWNoaXAgY29sb3IgYXJlYSBzZW5zb3InLFxyXG4gICAgICA0OiAnVGhyZWUtY2hpcCBjb2xvciBhcmVhIHNlbnNvcicsXHJcbiAgICAgIDU6ICdDb2xvciBzZXF1ZW50aWFsIGFyZWEgc2Vuc29yJyxcclxuICAgICAgNzogJ1RyaWxpbmVhciBzZW5zb3InLFxyXG4gICAgICA4OiAnQ29sb3Igc2VxdWVudGlhbCBsaW5lYXIgc2Vuc29yJ1xyXG4gICAgfSxcclxuICAgIFNjZW5lQ2FwdHVyZVR5cGU6IHtcclxuICAgICAgMDogJ1N0YW5kYXJkJyxcclxuICAgICAgMTogJ0xhbmRzY2FwZScsXHJcbiAgICAgIDI6ICdQb3J0cmFpdCcsXHJcbiAgICAgIDM6ICdOaWdodCBzY2VuZSdcclxuICAgIH0sXHJcbiAgICBTY2VuZVR5cGU6IHtcclxuICAgICAgMTogJ0RpcmVjdGx5IHBob3RvZ3JhcGhlZCdcclxuICAgIH0sXHJcbiAgICBDdXN0b21SZW5kZXJlZDoge1xyXG4gICAgICAwOiAnTm9ybWFsIHByb2Nlc3MnLFxyXG4gICAgICAxOiAnQ3VzdG9tIHByb2Nlc3MnXHJcbiAgICB9LFxyXG4gICAgV2hpdGVCYWxhbmNlOiB7XHJcbiAgICAgIDA6ICdBdXRvIHdoaXRlIGJhbGFuY2UnLFxyXG4gICAgICAxOiAnTWFudWFsIHdoaXRlIGJhbGFuY2UnXHJcbiAgICB9LFxyXG4gICAgR2FpbkNvbnRyb2w6IHtcclxuICAgICAgMDogJ05vbmUnLFxyXG4gICAgICAxOiAnTG93IGdhaW4gdXAnLFxyXG4gICAgICAyOiAnSGlnaCBnYWluIHVwJyxcclxuICAgICAgMzogJ0xvdyBnYWluIGRvd24nLFxyXG4gICAgICA0OiAnSGlnaCBnYWluIGRvd24nXHJcbiAgICB9LFxyXG4gICAgQ29udHJhc3Q6IHtcclxuICAgICAgMDogJ05vcm1hbCcsXHJcbiAgICAgIDE6ICdTb2Z0JyxcclxuICAgICAgMjogJ0hhcmQnXHJcbiAgICB9LFxyXG4gICAgU2F0dXJhdGlvbjoge1xyXG4gICAgICAwOiAnTm9ybWFsJyxcclxuICAgICAgMTogJ0xvdyBzYXR1cmF0aW9uJyxcclxuICAgICAgMjogJ0hpZ2ggc2F0dXJhdGlvbidcclxuICAgIH0sXHJcbiAgICBTaGFycG5lc3M6IHtcclxuICAgICAgMDogJ05vcm1hbCcsXHJcbiAgICAgIDE6ICdTb2Z0JyxcclxuICAgICAgMjogJ0hhcmQnXHJcbiAgICB9LFxyXG4gICAgU3ViamVjdERpc3RhbmNlUmFuZ2U6IHtcclxuICAgICAgMDogJ1Vua25vd24nLFxyXG4gICAgICAxOiAnTWFjcm8nLFxyXG4gICAgICAyOiAnQ2xvc2UgdmlldycsXHJcbiAgICAgIDM6ICdEaXN0YW50IHZpZXcnXHJcbiAgICB9LFxyXG4gICAgRmlsZVNvdXJjZToge1xyXG4gICAgICAzOiAnRFNDJ1xyXG4gICAgfSxcclxuXHJcbiAgICBDb21wb25lbnRzOiB7XHJcbiAgICAgIDA6ICcnLFxyXG4gICAgICAxOiAnWScsXHJcbiAgICAgIDI6ICdDYicsXHJcbiAgICAgIDM6ICdDcicsXHJcbiAgICAgIDQ6ICdSJyxcclxuICAgICAgNTogJ0cnLFxyXG4gICAgICA2OiAnQidcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwdWJsaWMgYWRkRXZlbnQoXHJcbiAgICBlbGVtZW50OiBFdmVudFRhcmdldCB8IGFueSxcclxuICAgIGV2ZW50OiBzdHJpbmcsXHJcbiAgICBoYW5kbGVyOiBFdmVudExpc3RlbmVyXHJcbiAgKSB7XHJcbiAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XHJcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSGVsbG8sIElFIVxyXG4gICAgICBpZiAoZWxlbWVudC5hdHRhY2hFdmVudCkge1xyXG4gICAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGltYWdlSGFzRGF0YShpbWc6IElJbWFnZUV4dGVuZGVkKSB7XHJcbiAgICByZXR1cm4gISFpbWcuZXhpZmRhdGE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQ6IHN0cmluZyk6IEFycmF5QnVmZmVyIHtcclxuICAgIGJhc2U2NCA9IGJhc2U2NC5yZXBsYWNlKC9eZGF0YTooW147XSspO2Jhc2U2NCwvZ2ltLCAnJyk7XHJcbiAgICBjb25zdCBiaW5hcnk6IHN0cmluZyA9IGF0b2IoYmFzZTY0KTtcclxuICAgIGNvbnN0IGxlbjogbnVtYmVyID0gYmluYXJ5Lmxlbmd0aDtcclxuICAgIGNvbnN0IGJ1ZmZlcjogQXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIobGVuKTtcclxuICAgIGNvbnN0IHZpZXc6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICB2aWV3W2ldID0gYmluYXJ5LmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnVmZmVyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9iamVjdFVSTFRvQmxvYih1cmw6IHN0cmluZywgY2FsbGJhY2s6IChibG9iOiBCbG9iKSA9PiB2b2lkKSB7XHJcbiAgICBjb25zdCBodHRwOiBYTUxIdHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgaHR0cC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgaHR0cC5yZXNwb25zZVR5cGUgPSAnYmxvYic7XHJcbiAgICBodHRwLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgaWYgKGh0dHAuc3RhdHVzID09PSAyMDAgfHwgaHR0cC5zdGF0dXMgPT09IDApIHtcclxuICAgICAgICBjYWxsYmFjayhodHRwLnJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGh0dHAuc2VuZCgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEltYWdlRGF0YShcclxuICAgIGltZzogSUltYWdlRXh0ZW5kZWQgfCBCbG9iIHwgRmlsZSxcclxuICAgIGNhbGxiYWNrOiAoaW1nOiBJSW1hZ2VFeHRlbmRlZCkgPT4gdm9pZFxyXG4gICkge1xyXG4gICAgY29uc3QgaGFuZGxlQmluYXJ5RmlsZSA9IChiaW5GaWxlOiBBcnJheUJ1ZmZlcikgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5maW5kRVhJRmluSlBFRyhiaW5GaWxlKTtcclxuICAgICAgY29uc3QgaXB0Y2RhdGEgPSB0aGlzLmZpbmRJUFRDaW5KUEVHKGJpbkZpbGUpO1xyXG4gICAgICAoaW1nIGFzIElJbWFnZUV4dGVuZGVkKS5leGlmZGF0YSA9IGRhdGEgfHwge307XHJcbiAgICAgIChpbWcgYXMgSUltYWdlRXh0ZW5kZWQpLmlwdGNkYXRhID0gaXB0Y2RhdGEgfHwge307XHJcbiAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgIGNhbGxiYWNrLmNhbGwoaW1nKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoJ3NyYycgaW4gaW1nICYmIChpbWcgYXMgSUltYWdlRXh0ZW5kZWQpLnNyYykge1xyXG4gICAgICBpZiAoL15kYXRhOi9pLnRlc3QoKGltZyBhcyBJSW1hZ2VFeHRlbmRlZCkuc3JjKSkge1xyXG4gICAgICAgIC8vIERhdGEgVVJJXHJcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIoXHJcbiAgICAgICAgICAoaW1nIGFzIElJbWFnZUV4dGVuZGVkKS5zcmNcclxuICAgICAgICApO1xyXG4gICAgICAgIGhhbmRsZUJpbmFyeUZpbGUoYXJyYXlCdWZmZXIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICgvXmJsb2I6L2kudGVzdCgoaW1nIGFzIElJbWFnZUV4dGVuZGVkKS5zcmMpKSB7XHJcbiAgICAgICAgICAvLyBPYmplY3QgVVJMXHJcbiAgICAgICAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBoYW5kbGVCaW5hcnlGaWxlKGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdGhpcy5vYmplY3RVUkxUb0Jsb2IoKGltZyBhcyBJSW1hZ2VFeHRlbmRlZCkuc3JjLCAoYmxvYjogQmxvYikgPT4ge1xyXG4gICAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgIGh0dHAub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaHR0cC5zdGF0dXMgPT09IDIwMCB8fCBodHRwLnN0YXR1cyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgIGhhbmRsZUJpbmFyeUZpbGUoaHR0cC5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgbG9hZCBpbWFnZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaHR0cC5vcGVuKCdHRVQnLCAoaW1nIGFzIElJbWFnZUV4dGVuZGVkKS5zcmMsIHRydWUpO1xyXG4gICAgICAgICAgaHR0cC5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xyXG4gICAgICAgICAgaHR0cC5zZW5kKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKEZpbGVSZWFkZXIgJiYgKGltZyBpbnN0YW5jZW9mIEJsb2IgfHwgaW1nIGluc3RhbmNlb2YgRmlsZSkpIHtcclxuICAgICAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IChlOiBhbnkpID0+IHtcclxuICAgICAgICAgIHRoaXMubG9nKCdHb3QgZmlsZSBvZiBsZW5ndGggJyArIGUudGFyZ2V0LnJlc3VsdC5ieXRlTGVuZ3RoKTtcclxuICAgICAgICAgIGhhbmRsZUJpbmFyeUZpbGUoZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGltZyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBmaW5kRVhJRmluSlBFRyhmaWxlOiBBcnJheUJ1ZmZlcikge1xyXG4gICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoZmlsZSk7XHJcblxyXG4gICAgdGhpcy5sb2coJ0dvdCBmaWxlIG9mIGxlbmd0aCAnICsgZmlsZS5ieXRlTGVuZ3RoKTtcclxuICAgIGlmIChkYXRhVmlldy5nZXRVaW50OCgwKSAhPT0gMHhmZiB8fCBkYXRhVmlldy5nZXRVaW50OCgxKSAhPT0gMHhkOCkge1xyXG4gICAgICB0aGlzLmxvZygnTm90IGEgdmFsaWQgSlBFRycpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7IC8vIG5vdCBhIHZhbGlkIGpwZWdcclxuICAgIH1cclxuXHJcbiAgICBsZXQgb2Zmc2V0ID0gMjtcclxuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gZmlsZS5ieXRlTGVuZ3RoO1xyXG4gICAgbGV0IG1hcmtlcjogbnVtYmVyO1xyXG5cclxuICAgIHdoaWxlIChvZmZzZXQgPCBsZW5ndGgpIHtcclxuICAgICAgaWYgKGRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldCkgIT09IDB4ZmYpIHtcclxuICAgICAgICB0aGlzLmxvZyhcclxuICAgICAgICAgICdOb3QgYSB2YWxpZCBtYXJrZXIgYXQgb2Zmc2V0ICcgK1xyXG4gICAgICAgICAgICBvZmZzZXQgK1xyXG4gICAgICAgICAgICAnLCBmb3VuZDogJyArXHJcbiAgICAgICAgICAgIGRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldClcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gbm90IGEgdmFsaWQgbWFya2VyLCBzb21ldGhpbmcgaXMgd3JvbmdcclxuICAgICAgfVxyXG5cclxuICAgICAgbWFya2VyID0gZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMSk7XHJcbiAgICAgIHRoaXMubG9nKG1hcmtlcik7XHJcblxyXG4gICAgICAvLyB3ZSBjb3VsZCBpbXBsZW1lbnQgaGFuZGxpbmcgZm9yIG90aGVyIG1hcmtlcnMgaGVyZSxcclxuICAgICAgLy8gYnV0IHdlJ3JlIG9ubHkgbG9va2luZyBmb3IgMHhGRkUxIGZvciBFWElGIGRhdGFcclxuICAgICAgaWYgKG1hcmtlciA9PT0gMjI1KSB7XHJcbiAgICAgICAgdGhpcy5sb2coJ0ZvdW5kIDB4RkZFMSBtYXJrZXInKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkRVhJRkRhdGEoZGF0YVZpZXcsIG9mZnNldCArIDQpOyAvLyAsIGRhdGFWaWV3LmdldFVpbnQxNihvZmZzZXQgKyAyKSAtIDIpO1xyXG4gICAgICAgIC8vIG9mZnNldCArPSAyICsgZmlsZS5nZXRTaG9ydEF0KG9mZnNldCsyLCB0cnVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvZmZzZXQgKz0gMiArIGRhdGFWaWV3LmdldFVpbnQxNihvZmZzZXQgKyAyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGZpbmRJUFRDaW5KUEVHKGZpbGU6IEFycmF5QnVmZmVyKSB7XHJcbiAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhmaWxlKTtcclxuXHJcbiAgICB0aGlzLmxvZygnR290IGZpbGUgb2YgbGVuZ3RoICcgKyBmaWxlLmJ5dGVMZW5ndGgpO1xyXG4gICAgaWYgKGRhdGFWaWV3LmdldFVpbnQ4KDApICE9PSAweGZmIHx8IGRhdGFWaWV3LmdldFVpbnQ4KDEpICE9PSAweGQ4KSB7XHJcbiAgICAgIHRoaXMubG9nKCdOb3QgYSB2YWxpZCBKUEVHJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gbm90IGEgdmFsaWQganBlZ1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBvZmZzZXQgPSAyO1xyXG4gICAgY29uc3QgbGVuZ3RoID0gZmlsZS5ieXRlTGVuZ3RoO1xyXG5cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXHJcbiAgICBjb25zdCBpc0ZpZWxkU2VnbWVudFN0YXJ0ID0gKF9kYXRhVmlldzogRGF0YVZpZXcsIF9vZmZzZXQ6IG51bWJlcikgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIF9kYXRhVmlldy5nZXRVaW50OChfb2Zmc2V0KSA9PT0gMHgzOCAmJlxyXG4gICAgICAgIF9kYXRhVmlldy5nZXRVaW50OChfb2Zmc2V0ICsgMSkgPT09IDB4NDIgJiZcclxuICAgICAgICBfZGF0YVZpZXcuZ2V0VWludDgoX29mZnNldCArIDIpID09PSAweDQ5ICYmXHJcbiAgICAgICAgX2RhdGFWaWV3LmdldFVpbnQ4KF9vZmZzZXQgKyAzKSA9PT0gMHg0ZCAmJlxyXG4gICAgICAgIF9kYXRhVmlldy5nZXRVaW50OChfb2Zmc2V0ICsgNCkgPT09IDB4MDQgJiZcclxuICAgICAgICBfZGF0YVZpZXcuZ2V0VWludDgoX29mZnNldCArIDUpID09PSAweDA0XHJcbiAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdoaWxlIChvZmZzZXQgPCBsZW5ndGgpIHtcclxuICAgICAgaWYgKGlzRmllbGRTZWdtZW50U3RhcnQoZGF0YVZpZXcsIG9mZnNldCkpIHtcclxuICAgICAgICAvLyBHZXQgdGhlIGxlbmd0aCBvZiB0aGUgbmFtZSBoZWFkZXIgKHdoaWNoIGlzIHBhZGRlZCB0byBhbiBldmVuIG51bWJlciBvZiBieXRlcylcclxuICAgICAgICBsZXQgbmFtZUhlYWRlckxlbmd0aCA9IGRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldCArIDcpO1xyXG4gICAgICAgIGlmIChuYW1lSGVhZGVyTGVuZ3RoICUgMiAhPT0gMCkge1xyXG4gICAgICAgICAgbmFtZUhlYWRlckxlbmd0aCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDaGVjayBmb3IgcHJlIHBob3Rvc2hvcCA2IGZvcm1hdFxyXG4gICAgICAgIGlmIChuYW1lSGVhZGVyTGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAvLyBBbHdheXMgNFxyXG4gICAgICAgICAgbmFtZUhlYWRlckxlbmd0aCA9IDQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdGFydE9mZnNldCA9IG9mZnNldCArIDggKyBuYW1lSGVhZGVyTGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25MZW5ndGggPSBkYXRhVmlldy5nZXRVaW50MTYob2Zmc2V0ICsgNiArIG5hbWVIZWFkZXJMZW5ndGgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkSVBUQ0RhdGEoZmlsZSwgc3RhcnRPZmZzZXQsIHNlY3Rpb25MZW5ndGgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBOb3QgdGhlIG1hcmtlciwgY29udGludWUgc2VhcmNoaW5nXHJcbiAgICAgIG9mZnNldCsrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlYWRJUFRDRGF0YShcclxuICAgIGZpbGU6IEFycmF5QnVmZmVyLFxyXG4gICAgc3RhcnRPZmZzZXQ6IG51bWJlcixcclxuICAgIHNlY3Rpb25MZW5ndGg6IG51bWJlclxyXG4gICkge1xyXG4gICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoZmlsZSk7XHJcbiAgICBjb25zdCBkYXRhOiBhbnkgPSB7fTtcclxuICAgIGxldCBmaWVsZFZhbHVlOiBhbnk7XHJcbiAgICBsZXQgZmllbGROYW1lOiBzdHJpbmc7XHJcbiAgICBsZXQgZGF0YVNpemU6IG51bWJlcjtcclxuICAgIGxldCBzZWdtZW50VHlwZTogYW55O1xyXG4gICAgbGV0IHNlZ21lbnRTaXplOiBudW1iZXI7XHJcbiAgICBsZXQgc2VnbWVudFN0YXJ0UG9zID0gc3RhcnRPZmZzZXQ7XHJcbiAgICB3aGlsZSAoc2VnbWVudFN0YXJ0UG9zIDwgc3RhcnRPZmZzZXQgKyBzZWN0aW9uTGVuZ3RoKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBkYXRhVmlldy5nZXRVaW50OChzZWdtZW50U3RhcnRQb3MpID09PSAweDFjICYmXHJcbiAgICAgICAgZGF0YVZpZXcuZ2V0VWludDgoc2VnbWVudFN0YXJ0UG9zICsgMSkgPT09IDB4MDJcclxuICAgICAgKSB7XHJcbiAgICAgICAgc2VnbWVudFR5cGUgPSBkYXRhVmlldy5nZXRVaW50OChzZWdtZW50U3RhcnRQb3MgKyAyKTtcclxuICAgICAgICBpZiAoc2VnbWVudFR5cGUgaW4gdGhpcy5JcHRjRmllbGRNYXApIHtcclxuICAgICAgICAgIGRhdGFTaXplID0gZGF0YVZpZXcuZ2V0SW50MTYoc2VnbWVudFN0YXJ0UG9zICsgMyk7XHJcbiAgICAgICAgICBzZWdtZW50U2l6ZSA9IGRhdGFTaXplICsgNTtcclxuICAgICAgICAgIGZpZWxkTmFtZSA9IHRoaXMuSXB0Y0ZpZWxkTWFwW3NlZ21lbnRUeXBlXTtcclxuICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLmdldFN0cmluZ0Zyb21EQihcclxuICAgICAgICAgICAgZGF0YVZpZXcsXHJcbiAgICAgICAgICAgIHNlZ21lbnRTdGFydFBvcyArIDUsXHJcbiAgICAgICAgICAgIGRhdGFTaXplXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBzdG9yZWQgYSB2YWx1ZSB3aXRoIHRoaXMgbmFtZVxyXG4gICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoZmllbGROYW1lKSkge1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBhbHJlYWR5IHN0b3JlZCB3aXRoIHRoaXMgbmFtZSwgY3JlYXRlIG11bHRpdmFsdWUgZmllbGRcclxuICAgICAgICAgICAgaWYgKGRhdGFbZmllbGROYW1lXSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgZGF0YVtmaWVsZE5hbWVdLnB1c2goZmllbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZGF0YVtmaWVsZE5hbWVdID0gW2RhdGFbZmllbGROYW1lXSwgZmllbGRWYWx1ZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGFbZmllbGROYW1lXSA9IGZpZWxkVmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNlZ21lbnRTdGFydFBvcysrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVhZFRhZ3MoXHJcbiAgICBmaWxlOiBEYXRhVmlldyxcclxuICAgIHRpZmZTdGFydDogbnVtYmVyLFxyXG4gICAgZGlyU3RhcnQ6IG51bWJlcixcclxuICAgIHN0cmluZ3M6IHN0cmluZ1tdLFxyXG4gICAgYmlnRW5kOiBib29sZWFuXHJcbiAgKTogYW55IHtcclxuICAgIGNvbnN0IGVudHJpZXM6IG51bWJlciA9IGZpbGUuZ2V0VWludDE2KGRpclN0YXJ0LCAhYmlnRW5kKTtcclxuICAgIGNvbnN0IHRhZ3M6IGFueSA9IHt9O1xyXG4gICAgbGV0IGVudHJ5T2Zmc2V0OiBudW1iZXI7XHJcbiAgICBsZXQgdGFnOiBzdHJpbmc7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzOyBpKyspIHtcclxuICAgICAgZW50cnlPZmZzZXQgPSBkaXJTdGFydCArIGkgKiAxMiArIDI7XHJcbiAgICAgIHRhZyA9IHN0cmluZ3NbZmlsZS5nZXRVaW50MTYoZW50cnlPZmZzZXQsICFiaWdFbmQpXTtcclxuICAgICAgaWYgKCF0YWcpIHtcclxuICAgICAgICB0aGlzLmxvZygnVW5rbm93biB0YWc6ICcgKyBmaWxlLmdldFVpbnQxNihlbnRyeU9mZnNldCwgIWJpZ0VuZCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRhZ3NbdGFnXSA9IHRoaXMucmVhZFRhZ1ZhbHVlKFxyXG4gICAgICAgIGZpbGUsXHJcbiAgICAgICAgZW50cnlPZmZzZXQsXHJcbiAgICAgICAgdGlmZlN0YXJ0LFxyXG4gICAgICAgIGRpclN0YXJ0LFxyXG4gICAgICAgIGJpZ0VuZFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhZ3M7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVhZFRhZ1ZhbHVlKFxyXG4gICAgZmlsZTogYW55LFxyXG4gICAgZW50cnlPZmZzZXQ6IG51bWJlcixcclxuICAgIHRpZmZTdGFydDogbnVtYmVyLFxyXG4gICAgZGlyU3RhcnQ6IG51bWJlcixcclxuICAgIGJpZ0VuZDogYm9vbGVhblxyXG4gICk6IGFueSB7XHJcbiAgICBjb25zdCB0eXBlOiBudW1iZXIgPSBmaWxlLmdldFVpbnQxNihlbnRyeU9mZnNldCArIDIsICFiaWdFbmQpO1xyXG4gICAgY29uc3QgbnVtVmFsdWVzID0gZmlsZS5nZXRVaW50MzIoZW50cnlPZmZzZXQgKyA0LCAhYmlnRW5kKTtcclxuICAgIGNvbnN0IHZhbHVlT2Zmc2V0ID0gZmlsZS5nZXRVaW50MzIoZW50cnlPZmZzZXQgKyA4LCAhYmlnRW5kKSArIHRpZmZTdGFydDtcclxuICAgIGxldCBvZmZzZXQ6IG51bWJlcjtcclxuICAgIGxldCB2YWxzOiBhbnlbXTtcclxuICAgIGxldCB2YWw6IGFueTtcclxuICAgIGxldCBuOiBudW1iZXI7XHJcbiAgICBsZXQgbnVtZXJhdG9yOiBhbnk7XHJcbiAgICBsZXQgZGVub21pbmF0b3I6IGFueTtcclxuXHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAxOiAvLyBieXRlLCA4LWJpdCB1bnNpZ25lZCBpbnRcclxuICAgICAgY2FzZSA3OiAvLyB1bmRlZmluZWQsIDgtYml0IGJ5dGUsIHZhbHVlIGRlcGVuZGluZyBvbiBmaWVsZFxyXG4gICAgICAgIGlmIChudW1WYWx1ZXMgPT09IDEpIHtcclxuICAgICAgICAgIHJldHVybiBmaWxlLmdldFVpbnQ4KGVudHJ5T2Zmc2V0ICsgOCwgIWJpZ0VuZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG9mZnNldCA9IG51bVZhbHVlcyA+IDQgPyB2YWx1ZU9mZnNldCA6IGVudHJ5T2Zmc2V0ICsgODtcclxuICAgICAgICAgIHZhbHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBudW1WYWx1ZXM7IG4rKykge1xyXG4gICAgICAgICAgICB2YWxzW25dID0gZmlsZS5nZXRVaW50OChvZmZzZXQgKyBuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB2YWxzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgMjogLy8gYXNjaWksIDgtYml0IGJ5dGVcclxuICAgICAgICBvZmZzZXQgPSBudW1WYWx1ZXMgPiA0ID8gdmFsdWVPZmZzZXQgOiBlbnRyeU9mZnNldCArIDg7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaW5nRnJvbURCKGZpbGUsIG9mZnNldCwgbnVtVmFsdWVzIC0gMSk7XHJcblxyXG4gICAgICBjYXNlIDM6IC8vIHNob3J0LCAxNiBiaXQgaW50XHJcbiAgICAgICAgaWYgKG51bVZhbHVlcyA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpbGUuZ2V0VWludDE2KGVudHJ5T2Zmc2V0ICsgOCwgIWJpZ0VuZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG9mZnNldCA9IG51bVZhbHVlcyA+IDIgPyB2YWx1ZU9mZnNldCA6IGVudHJ5T2Zmc2V0ICsgODtcclxuICAgICAgICAgIHZhbHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBudW1WYWx1ZXM7IG4rKykge1xyXG4gICAgICAgICAgICB2YWxzW25dID0gZmlsZS5nZXRVaW50MTYob2Zmc2V0ICsgMiAqIG4sICFiaWdFbmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHZhbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgY2FzZSA0OiAvLyBsb25nLCAzMiBiaXQgaW50XHJcbiAgICAgICAgaWYgKG51bVZhbHVlcyA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpbGUuZ2V0VWludDMyKGVudHJ5T2Zmc2V0ICsgOCwgIWJpZ0VuZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBudW1WYWx1ZXM7IG4rKykge1xyXG4gICAgICAgICAgICB2YWxzW25dID0gZmlsZS5nZXRVaW50MzIodmFsdWVPZmZzZXQgKyA0ICogbiwgIWJpZ0VuZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdmFscztcclxuICAgICAgICB9XHJcblxyXG4gICAgICBjYXNlIDU6IC8vIHJhdGlvbmFsID0gdHdvIGxvbmcgdmFsdWVzLCBmaXJzdCBpcyBudW1lcmF0b3IsIHNlY29uZCBpcyBkZW5vbWluYXRvclxyXG4gICAgICAgIGlmIChudW1WYWx1ZXMgPT09IDEpIHtcclxuICAgICAgICAgIG51bWVyYXRvciA9IGZpbGUuZ2V0VWludDMyKHZhbHVlT2Zmc2V0LCAhYmlnRW5kKTtcclxuICAgICAgICAgIGRlbm9taW5hdG9yID0gZmlsZS5nZXRVaW50MzIodmFsdWVPZmZzZXQgKyA0LCAhYmlnRW5kKTtcclxuICAgICAgICAgIHZhbCA9IG5ldyBGcmFjdGlvbihudW1lcmF0b3IgLyBkZW5vbWluYXRvcik7XHJcbiAgICAgICAgICB2YWwubnVtZXJhdG9yID0gbnVtZXJhdG9yO1xyXG4gICAgICAgICAgdmFsLmRlbm9taW5hdG9yID0gZGVub21pbmF0b3I7XHJcbiAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YWxzID0gW107XHJcbiAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbnVtVmFsdWVzOyBuKyspIHtcclxuICAgICAgICAgICAgbnVtZXJhdG9yID0gZmlsZS5nZXRVaW50MzIodmFsdWVPZmZzZXQgKyA4ICogbiwgIWJpZ0VuZCk7XHJcbiAgICAgICAgICAgIGRlbm9taW5hdG9yID0gZmlsZS5nZXRVaW50MzIodmFsdWVPZmZzZXQgKyA0ICsgOCAqIG4sICFiaWdFbmQpO1xyXG4gICAgICAgICAgICB2YWxzW25dID0gbmV3IEZyYWN0aW9uKG51bWVyYXRvciAvIGRlbm9taW5hdG9yKTtcclxuICAgICAgICAgICAgdmFsc1tuXS5udW1lcmF0b3IgPSBudW1lcmF0b3I7XHJcbiAgICAgICAgICAgIHZhbHNbbl0uZGVub21pbmF0b3IgPSBkZW5vbWluYXRvcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB2YWxzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIGNhc2UgOTogLy8gc2xvbmcsIDMyIGJpdCBzaWduZWQgaW50XHJcbiAgICAgICAgaWYgKG51bVZhbHVlcyA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpbGUuZ2V0SW50MzIoZW50cnlPZmZzZXQgKyA4LCAhYmlnRW5kKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFscyA9IFtdO1xyXG4gICAgICAgICAgZm9yIChuID0gMDsgbiA8IG51bVZhbHVlczsgbisrKSB7XHJcbiAgICAgICAgICAgIHZhbHNbbl0gPSBmaWxlLmdldEludDMyKHZhbHVlT2Zmc2V0ICsgNCAqIG4sICFiaWdFbmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHZhbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgY2FzZSAxMDogLy8gc2lnbmVkIHJhdGlvbmFsLCB0d28gc2xvbmdzLCBmaXJzdCBpcyBudW1lcmF0b3IsIHNlY29uZCBpcyBkZW5vbWluYXRvclxyXG4gICAgICAgIGlmIChudW1WYWx1ZXMgPT09IDEpIHtcclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIGZpbGUuZ2V0SW50MzIodmFsdWVPZmZzZXQsICFiaWdFbmQpIC9cclxuICAgICAgICAgICAgZmlsZS5nZXRJbnQzMih2YWx1ZU9mZnNldCArIDQsICFiaWdFbmQpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YWxzID0gW107XHJcbiAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbnVtVmFsdWVzOyBuKyspIHtcclxuICAgICAgICAgICAgdmFsc1tuXSA9XHJcbiAgICAgICAgICAgICAgZmlsZS5nZXRJbnQzMih2YWx1ZU9mZnNldCArIDggKiBuLCAhYmlnRW5kKSAvXHJcbiAgICAgICAgICAgICAgZmlsZS5nZXRJbnQzMih2YWx1ZU9mZnNldCArIDQgKyA4ICogbiwgIWJpZ0VuZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdmFscztcclxuICAgICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0U3RyaW5nRnJvbURCKFxyXG4gICAgYnVmZmVyOiBEYXRhVmlldyxcclxuICAgIHN0YXJ0OiBudW1iZXIsXHJcbiAgICBsZW5ndGg6IG51bWJlclxyXG4gICk6IHN0cmluZyB7XHJcbiAgICBsZXQgb3V0c3RyID0gJyc7XHJcbiAgICBmb3IgKGxldCBuID0gc3RhcnQ7IG4gPCBzdGFydCArIGxlbmd0aDsgbisrKSB7XHJcbiAgICAgIG91dHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZmZlci5nZXRVaW50OChuKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0c3RyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlYWRFWElGRGF0YShmaWxlOiBEYXRhVmlldywgc3RhcnQ6IG51bWJlcik6IGFueSB7XHJcbiAgICBpZiAodGhpcy5nZXRTdHJpbmdGcm9tREIoZmlsZSwgc3RhcnQsIDQpICE9PSAnRXhpZicpIHtcclxuICAgICAgdGhpcy5sb2coJ05vdCB2YWxpZCBFWElGIGRhdGEhICcgKyB0aGlzLmdldFN0cmluZ0Zyb21EQihmaWxlLCBzdGFydCwgNCkpO1xyXG5cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBiaWdFbmQ6IGJvb2xlYW47XHJcbiAgICBsZXQgdGFnczogYW55O1xyXG4gICAgbGV0IHRhZzogc3RyaW5nO1xyXG4gICAgbGV0IGV4aWZEYXRhOiBhbnk7XHJcbiAgICBsZXQgZ3BzRGF0YTogYW55O1xyXG4gICAgY29uc3QgdGlmZk9mZnNldDogbnVtYmVyID0gc3RhcnQgKyA2O1xyXG5cclxuICAgIC8vIHRlc3QgZm9yIFRJRkYgdmFsaWRpdHkgYW5kIGVuZGlhbm5lc3NcclxuICAgIGlmIChmaWxlLmdldFVpbnQxNih0aWZmT2Zmc2V0KSA9PT0gMHg0OTQ5KSB7XHJcbiAgICAgIGJpZ0VuZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGZpbGUuZ2V0VWludDE2KHRpZmZPZmZzZXQpID09PSAweDRkNGQpIHtcclxuICAgICAgICBiaWdFbmQgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubG9nKCdOb3QgdmFsaWQgVElGRiBkYXRhISAobm8gMHg0OTQ5IG9yIDB4NEQ0RCknKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZmlsZS5nZXRVaW50MTYodGlmZk9mZnNldCArIDIsICFiaWdFbmQpICE9PSAweDAwMmEpIHtcclxuICAgICAgdGhpcy5sb2coJ05vdCB2YWxpZCBUSUZGIGRhdGEhIChubyAweDAwMkEpJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaXJzdElGRE9mZnNldCA9IGZpbGUuZ2V0VWludDMyKHRpZmZPZmZzZXQgKyA0LCAhYmlnRW5kKTtcclxuXHJcbiAgICBpZiAoZmlyc3RJRkRPZmZzZXQgPCAweDAwMDAwMDA4KSB7XHJcbiAgICAgIHRoaXMubG9nKFxyXG4gICAgICAgICdOb3QgdmFsaWQgVElGRiBkYXRhISAoRmlyc3Qgb2Zmc2V0IGxlc3MgdGhhbiA4KScsXHJcbiAgICAgICAgZmlsZS5nZXRVaW50MzIodGlmZk9mZnNldCArIDQsICFiaWdFbmQpXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0YWdzID0gdGhpcy5yZWFkVGFncyhcclxuICAgICAgZmlsZSxcclxuICAgICAgdGlmZk9mZnNldCxcclxuICAgICAgdGlmZk9mZnNldCArIGZpcnN0SUZET2Zmc2V0LFxyXG4gICAgICB0aGlzLlRpZmZUYWdzLFxyXG4gICAgICBiaWdFbmRcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRhZ3MuRXhpZklGRFBvaW50ZXIpIHtcclxuICAgICAgZXhpZkRhdGEgPSB0aGlzLnJlYWRUYWdzKFxyXG4gICAgICAgIGZpbGUsXHJcbiAgICAgICAgdGlmZk9mZnNldCxcclxuICAgICAgICB0aWZmT2Zmc2V0ICsgdGFncy5FeGlmSUZEUG9pbnRlcixcclxuICAgICAgICB0aGlzLlRhZ3MsXHJcbiAgICAgICAgYmlnRW5kXHJcbiAgICAgICk7XHJcbiAgICAgIGZvciAodGFnIGluIGV4aWZEYXRhKSB7XHJcbiAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoZXhpZkRhdGEsIHRhZykpIHtcclxuICAgICAgICAgIHN3aXRjaCAodGFnKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0xpZ2h0U291cmNlJzpcclxuICAgICAgICAgICAgY2FzZSAnRmxhc2gnOlxyXG4gICAgICAgICAgICBjYXNlICdNZXRlcmluZ01vZGUnOlxyXG4gICAgICAgICAgICBjYXNlICdFeHBvc3VyZVByb2dyYW0nOlxyXG4gICAgICAgICAgICBjYXNlICdTZW5zaW5nTWV0aG9kJzpcclxuICAgICAgICAgICAgY2FzZSAnU2NlbmVDYXB0dXJlVHlwZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ1NjZW5lVHlwZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0N1c3RvbVJlbmRlcmVkJzpcclxuICAgICAgICAgICAgY2FzZSAnV2hpdGVCYWxhbmNlJzpcclxuICAgICAgICAgICAgY2FzZSAnR2FpbkNvbnRyb2wnOlxyXG4gICAgICAgICAgICBjYXNlICdDb250cmFzdCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ1NhdHVyYXRpb24nOlxyXG4gICAgICAgICAgICBjYXNlICdTaGFycG5lc3MnOlxyXG4gICAgICAgICAgICBjYXNlICdTdWJqZWN0RGlzdGFuY2VSYW5nZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0ZpbGVTb3VyY2UnOlxyXG4gICAgICAgICAgICAgIGV4aWZEYXRhW3RhZ10gPSB0aGlzLlN0cmluZ1ZhbHVlc1t0YWddW2V4aWZEYXRhW3RhZ11dO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdFeGlmVmVyc2lvbic6XHJcbiAgICAgICAgICAgIGNhc2UgJ0ZsYXNocGl4VmVyc2lvbic6XHJcbiAgICAgICAgICAgICAgZXhpZkRhdGFbdGFnXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXHJcbiAgICAgICAgICAgICAgICBleGlmRGF0YVt0YWddWzBdLFxyXG4gICAgICAgICAgICAgICAgZXhpZkRhdGFbdGFnXVsxXSxcclxuICAgICAgICAgICAgICAgIGV4aWZEYXRhW3RhZ11bMl0sXHJcbiAgICAgICAgICAgICAgICBleGlmRGF0YVt0YWddWzNdXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnQ29tcG9uZW50c0NvbmZpZ3VyYXRpb24nOlxyXG4gICAgICAgICAgICAgIGNvbnN0IGNvbXBvcGVudHMgPSAnQ29tcG9uZW50cyc7XHJcbiAgICAgICAgICAgICAgZXhpZkRhdGFbdGFnXSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0cmluZ1ZhbHVlc1tjb21wb3BlbnRzXVtleGlmRGF0YVt0YWddWzBdXSArXHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0cmluZ1ZhbHVlc1tjb21wb3BlbnRzXVtleGlmRGF0YVt0YWddWzFdXSArXHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0cmluZ1ZhbHVlc1tjb21wb3BlbnRzXVtleGlmRGF0YVt0YWddWzJdXSArXHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0cmluZ1ZhbHVlc1tjb21wb3BlbnRzXVtleGlmRGF0YVt0YWddWzNdXTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRhZ3NbdGFnXSA9IGV4aWZEYXRhW3RhZ107XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRhZ3MuR1BTSW5mb0lGRFBvaW50ZXIpIHtcclxuICAgICAgZ3BzRGF0YSA9IHRoaXMucmVhZFRhZ3MoXHJcbiAgICAgICAgZmlsZSxcclxuICAgICAgICB0aWZmT2Zmc2V0LFxyXG4gICAgICAgIHRpZmZPZmZzZXQgKyB0YWdzLkdQU0luZm9JRkRQb2ludGVyLFxyXG4gICAgICAgIHRoaXMuR1BTVGFncyxcclxuICAgICAgICBiaWdFbmRcclxuICAgICAgKTtcclxuICAgICAgZm9yICh0YWcgaW4gZ3BzRGF0YSkge1xyXG4gICAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGdwc0RhdGEsIHRhZykpIHtcclxuICAgICAgICAgIHN3aXRjaCAodGFnKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dQU1ZlcnNpb25JRCc6XHJcbiAgICAgICAgICAgICAgZ3BzRGF0YVt0YWddID1cclxuICAgICAgICAgICAgICAgIGdwc0RhdGFbdGFnXVswXSArXHJcbiAgICAgICAgICAgICAgICAnLicgK1xyXG4gICAgICAgICAgICAgICAgZ3BzRGF0YVt0YWddWzFdICtcclxuICAgICAgICAgICAgICAgICcuJyArXHJcbiAgICAgICAgICAgICAgICBncHNEYXRhW3RhZ11bMl0gK1xyXG4gICAgICAgICAgICAgICAgJy4nICtcclxuICAgICAgICAgICAgICAgIGdwc0RhdGFbdGFnXVszXTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRhZ3NbdGFnXSA9IGdwc0RhdGFbdGFnXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGFncztcclxuICB9XHJcblxyXG4gIC8vICAgZ2V0IHJpZCBvZiB0aGlzIHNpbGx5IGlzc3VlXHJcbiAgcHJpdmF0ZSBjaGVja0ltYWdlVHlwZShpbWc6IGFueSkge1xyXG4gICAgcmV0dXJuIGltZyBpbnN0YW5jZW9mIEltYWdlIHx8IGltZyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0RGF0YShpbWc6IElJbWFnZUV4dGVuZGVkIHwgSFRNTEltYWdlRWxlbWVudCwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcclxuICAgIGlmICh0aGlzLmNoZWNrSW1hZ2VUeXBlKGltZykgJiYgIWltZy5jb21wbGV0ZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmltYWdlSGFzRGF0YShpbWcgYXMgSUltYWdlRXh0ZW5kZWQpKSB7XHJcbiAgICAgIHRoaXMuZ2V0SW1hZ2VEYXRhKGltZyBhcyBJSW1hZ2VFeHRlbmRlZCwgY2FsbGJhY2spO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgY2FsbGJhY2suY2FsbChpbWcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRUYWcoaW1nOiBhbnksIHRhZzogc3RyaW5nKSB7XHJcbiAgICBpZiAoIXRoaXMuaW1hZ2VIYXNEYXRhKGltZykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGltZy5leGlmZGF0YVt0YWddO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEFsbFRhZ3MoaW1nOiBhbnkpIHtcclxuICAgIGlmICghdGhpcy5pbWFnZUhhc0RhdGEoaW1nKSkge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBsZXQgYTogc3RyaW5nO1xyXG4gICAgY29uc3QgZGF0YTogYW55ID0gaW1nLmV4aWZkYXRhO1xyXG4gICAgY29uc3QgdGFnczogYW55ID0ge307XHJcbiAgICBmb3IgKGEgaW4gZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgIHRhZ3NbYV0gPSBkYXRhW2FdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFncztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwcmV0dHkoaW1nOiBJSW1hZ2VFeHRlbmRlZCkge1xyXG4gICAgaWYgKCF0aGlzLmltYWdlSGFzRGF0YShpbWcpKSB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGxldCBhOiBhbnk7XHJcbiAgICBjb25zdCBkYXRhOiBhbnkgPSBpbWcuZXhpZmRhdGE7XHJcbiAgICBsZXQgc3RyUHJldHR5ID0gJyc7XHJcbiAgICBmb3IgKGEgaW4gZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YVthXSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgIGlmIChkYXRhW2FdIGluc3RhbmNlb2YgTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHN0clByZXR0eSArPSBgJHthfSA6ICR7ZGF0YVthXX0gWyR7ZGF0YVthXS5udW1lcmF0b3J9LyR7XHJcbiAgICAgICAgICAgICAgZGF0YVthXS5kZW5vbWluYXRvclxyXG4gICAgICAgICAgICB9XVxcclxcbmA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHJQcmV0dHkgKz0gYCR7YX0gOiBbJHtkYXRhW2FdLmxlbmd0aH0gdmFsdWVzXVxcclxcbmA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0clByZXR0eSArPSBgJHthfSA6ICR7ZGF0YVthXX1cXHJcXG5gO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0clByZXR0eTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZWFkRnJvbUJpbmFyeUZpbGUoZmlsZTogQXJyYXlCdWZmZXIpIHtcclxuICAgIHJldHVybiB0aGlzLmZpbmRFWElGaW5KUEVHKGZpbGUpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvZyguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgaWYgKHRoaXMuZGVidWcpIHtcclxuICAgICAgY29uc29sZS5sb2coYXJncyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==