{"version":3,"file":"ngx-img-cropper.js","sources":["ng:/ngx-img-cropper/lib/image-cropper/cropper-draw-settings.ts","ng:/ngx-img-cropper/lib/image-cropper/cropper-settings.ts","ng:/ngx-img-cropper/lib/image-cropper/exif.ts","ng:/ngx-img-cropper/lib/image-cropper/model/point.ts","ng:/ngx-img-cropper/lib/image-cropper/model/pointPool.ts","ng:/ngx-img-cropper/lib/image-cropper/model/bounds.ts","ng:/ngx-img-cropper/lib/image-cropper/model/handle.ts","ng:/ngx-img-cropper/lib/image-cropper/model/cornerMarker.ts","ng:/ngx-img-cropper/lib/image-cropper/model/cropTouch.ts","ng:/ngx-img-cropper/lib/image-cropper/model/dragMarker.ts","ng:/ngx-img-cropper/lib/image-cropper/model/imageCropperModel.ts","ng:/ngx-img-cropper/lib/image-cropper/imageCropperDataShare.ts","ng:/ngx-img-cropper/lib/image-cropper/imageCropper.ts","ng:/ngx-img-cropper/lib/image-cropper/model/cropPosition.ts","ng:/ngx-img-cropper/lib/image-cropper/image-cropper.component.ts","ng:/ngx-img-cropper/lib/image-cropper/image-cropper.module.ts","ng:/ngx-img-cropper/lib/image-cropper/image-cropper.service.ts","ng:/ngx-img-cropper/lib/image-cropper/model/cropService.ts","ng:/ngx-img-cropper/public_api.ts","ng:/ngx-img-cropper/ngx-img-cropper.ts"],"names":[],"mappings":"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","sourcesContent":["export class CropperDrawSettings {\r\n  public lineDash = false;\r\n  public strokeWidth = 1;\r\n  public strokeColor = 'rgba(255,255,255,1)';\r\n  public fillColor = 'rgba(255,255,255,1)';\r\n  public dragIconStrokeWidth = 1;\r\n  public dragIconStrokeColor = 'rgba(0,0,0,1)';\r\n  public dragIconFillColor = 'rgba(255,255,255,1)';\r\n  public backgroundFillColor = 'rgba(0,0,0,0.6)';\r\n\r\n  constructor(settings?: any) {\r\n    if (typeof settings === 'object') {\r\n      this.lineDash = settings.lineDash || this.lineDash;\r\n      this.strokeWidth = settings.strokeWidth || this.strokeWidth;\r\n      this.fillColor = settings.fillColor || this.fillColor;\r\n      this.strokeColor = settings.strokeColor || this.strokeColor;\r\n      this.dragIconStrokeWidth =\r\n        settings.dragIconStrokeWidth || this.dragIconStrokeWidth;\r\n      this.dragIconStrokeColor =\r\n        settings.dragIconStrokeColor || this.dragIconStrokeColor;\r\n      this.dragIconFillColor =\r\n        settings.dragIconFillColor || this.dragIconFillColor;\r\n      this.backgroundFillColor =\r\n        settings.backgroundFillColor || this.backgroundFillColor;\r\n    }\r\n  }\r\n}\r\n","import { CropperDrawSettings } from './cropper-draw-settings';\r\n\r\nexport interface ICropperSettings {\r\n  canvasWidth?: number;\r\n  canvasHeight?: number;\r\n  dynamicSizing?: boolean;\r\n  cropperClass?: string;\r\n  croppingClass?: string;\r\n  width?: number;\r\n  height?: number;\r\n  minWidth?: number;\r\n  minHeight?: number;\r\n  minWithRelativeToResolution?: boolean;\r\n  croppedWidth?: number;\r\n  croppedHeight?: number;\r\n  cropperDrawSettings?: any;\r\n  touchRadius?: number;\r\n  noFileInput?: boolean;\r\n  fileType?: string;\r\n  resampleFn?: (c: HTMLCanvasElement) => void;\r\n  markerSizeMultiplier?: number;\r\n  centerTouchRadius?: number;\r\n  showCenterMarker?: boolean;\r\n  allowedFilesRegex?: RegExp;\r\n  cropOnResize?: boolean;\r\n  preserveSize?: boolean;\r\n  compressRatio?: number;\r\n  rounded?: boolean;\r\n  keepAspect?: boolean;\r\n}\r\n\r\nexport class CropperSettings implements ICropperSettings {\r\n  public canvasWidth = 300;\r\n  public canvasHeight = 300;\r\n\r\n  public dynamicSizing = false;\r\n  public cropperClass: string;\r\n  public croppingClass: string;\r\n\r\n  public width = 200;\r\n  public height = 200;\r\n\r\n  public minWidth = 50;\r\n  public minHeight = 50;\r\n  public minWithRelativeToResolution = true;\r\n\r\n  public croppedWidth = 100;\r\n  public croppedHeight = 100;\r\n\r\n  public cropperDrawSettings: CropperDrawSettings = new CropperDrawSettings();\r\n  public touchRadius = 20;\r\n  public noFileInput = false;\r\n\r\n  public fileType: string;\r\n\r\n  public resampleFn: (c: HTMLCanvasElement) => void;\r\n\r\n  public markerSizeMultiplier = 1;\r\n  public centerTouchRadius = 20;\r\n  public showCenterMarker = true;\r\n\r\n  public allowedFilesRegex: RegExp = /\\.(jpe?g|png|gif|bmp)$/i;\r\n  public cropOnResize = true;\r\n  public preserveSize = false;\r\n\r\n  public compressRatio = 1.0;\r\n\r\n  // tslint:disable-next-line:variable-name\r\n  private _rounded = false;\r\n  // tslint:disable-next-line:variable-name\r\n  private _keepAspect = true;\r\n\r\n  constructor(settings?: ICropperSettings) {\r\n    if (typeof settings === 'object') {\r\n      Object.assign(this, settings);\r\n    }\r\n  }\r\n\r\n  set rounded(val: boolean) {\r\n    this._rounded = val;\r\n    if (val) {\r\n      this._keepAspect = true;\r\n    }\r\n  }\r\n\r\n  get rounded(): boolean {\r\n    return this._rounded;\r\n  }\r\n\r\n  set keepAspect(val: boolean) {\r\n    this._keepAspect = val;\r\n    if (this._rounded === true && this._keepAspect === false) {\r\n      console.error(\r\n        'Cannot set keep aspect to false on rounded cropper. Ellipsis not supported'\r\n      );\r\n      this._keepAspect = true;\r\n    }\r\n  }\r\n\r\n  get keepAspect(): boolean {\r\n    return this._keepAspect;\r\n  }\r\n}\r\n","export class Fraction extends Number {\r\n  numerator: number;\r\n  denominator: number;\r\n}\r\n\r\nexport interface IImageExtended extends HTMLImageElement {\r\n  exifdata: any;\r\n  iptcdata: any;\r\n}\r\n\r\nexport class Exif {\r\n  public debug = false;\r\n\r\n  public IptcFieldMap: any = {\r\n    0x78: 'caption',\r\n    0x6e: 'credit',\r\n    0x19: 'keywords',\r\n    0x37: 'dateCreated',\r\n    0x50: 'byline',\r\n    0x55: 'bylineTitle',\r\n    0x7a: 'captionWriter',\r\n    0x69: 'headline',\r\n    0x74: 'copyright',\r\n    0x0f: 'category'\r\n  };\r\n\r\n  public Tags: any = {\r\n    // version tags\r\n    0x9000: 'ExifVersion', // EXIF version\r\n    0xa000: 'FlashpixVersion', // Flashpix format version\r\n\r\n    // colorspace tags\r\n    0xa001: 'ColorSpace', // Color space information tag\r\n\r\n    // image configuration\r\n    0xa002: 'PixelXDimension', // Valid width of meaningful image\r\n    0xa003: 'PixelYDimension', // Valid height of meaningful image\r\n    0x9101: 'ComponentsConfiguration', // Information about channels\r\n    0x9102: 'CompressedBitsPerPixel', // Compressed bits per pixel\r\n\r\n    // user information\r\n    0x927c: 'MakerNote', // Any desired information written by the manufacturer\r\n    0x9286: 'UserComment', // Comments by user\r\n\r\n    // related file\r\n    0xa004: 'RelatedSoundFile', // Name of related sound file\r\n\r\n    // date and time\r\n    0x9003: 'DateTimeOriginal', // Date and time when the original image was generated\r\n    0x9004: 'DateTimeDigitized', // Date and time when the image was stored digitally\r\n    0x9290: 'SubsecTime', // Fractions of seconds for DateTime\r\n    0x9291: 'SubsecTimeOriginal', // Fractions of seconds for DateTimeOriginal\r\n    0x9292: 'SubsecTimeDigitized', // Fractions of seconds for DateTimeDigitized\r\n\r\n    // picture-taking conditions\r\n    0x829a: 'ExposureTime', // Exposure time (in seconds)\r\n    0x829d: 'FNumber', // F number\r\n    0x8822: 'ExposureProgram', // Exposure program\r\n    0x8824: 'SpectralSensitivity', // Spectral sensitivity\r\n    0x8827: 'ISOSpeedRatings', // ISO speed rating\r\n    0x8828: 'OECF', // Optoelectric conversion factor\r\n    0x9201: 'ShutterSpeedValue', // Shutter speed\r\n    0x9202: 'ApertureValue', // Lens aperture\r\n    0x9203: 'BrightnessValue', // Value of brightness\r\n    0x9204: 'ExposureBias', // Exposure bias\r\n    0x9205: 'MaxApertureValue', // Smallest F number of lens\r\n    0x9206: 'SubjectDistance', // Distance to subject in meters\r\n    0x9207: 'MeteringMode', // Metering mode\r\n    0x9208: 'LightSource', // Kind of light source\r\n    0x9209: 'Flash', // Flash status\r\n    0x9214: 'SubjectArea', // Location and area of main subject\r\n    0x920a: 'FocalLength', // Focal length of the lens in mm\r\n    0xa20b: 'FlashEnergy', // Strobe energy in BCPS\r\n    0xa20c: 'SpatialFrequencyResponse', //\r\n    0xa20e: 'FocalPlaneXResolution', // Number of pixels in width direction per FocalPlaneResolutionUnit\r\n    0xa20f: 'FocalPlaneYResolution', // Number of pixels in height direction per FocalPlaneResolutionUnit\r\n    0xa210: 'FocalPlaneResolutionUnit', // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\r\n    0xa214: 'SubjectLocation', // Location of subject in image\r\n    0xa215: 'ExposureIndex', // Exposure index selected on camera\r\n    0xa217: 'SensingMethod', // Image sensor type\r\n    0xa300: 'FileSource', // Image source (3 == DSC)\r\n    0xa301: 'SceneType', // Scene type (1 == directly photographed)\r\n    0xa302: 'CFAPattern', // Color filter array geometric pattern\r\n    0xa401: 'CustomRendered', // Special processing\r\n    0xa402: 'ExposureMode', // Exposure mode\r\n    0xa403: 'WhiteBalance', // 1 = auto white balance, 2 = manual\r\n    0xa404: 'DigitalZoomRation', // Digital zoom ratio\r\n    0xa405: 'FocalLengthIn35mmFilm', // Equivalent foacl length assuming 35mm film camera (in mm)\r\n    0xa406: 'SceneCaptureType', // Type of scene\r\n    0xa407: 'GainControl', // Degree of overall image gain adjustment\r\n    0xa408: 'Contrast', // Direction of contrast processing applied by camera\r\n    0xa409: 'Saturation', // Direction of saturation processing applied by camera\r\n    0xa40a: 'Sharpness', // Direction of sharpness processing applied by camera\r\n    0xa40b: 'DeviceSettingDescription', //\r\n    0xa40c: 'SubjectDistanceRange', // Distance to subject\r\n\r\n    // other tags\r\n    0xa005: 'InteroperabilityIFDPointer',\r\n    0xa420: 'ImageUniqueID' // Identifier assigned uniquely to each image\r\n  };\r\n\r\n  public TiffTags: any = {\r\n    0x0100: 'ImageWidth',\r\n    0x0101: 'ImageHeight',\r\n    0x8769: 'ExifIFDPointer',\r\n    0x8825: 'GPSInfoIFDPointer',\r\n    0xa005: 'InteroperabilityIFDPointer',\r\n    0x0102: 'BitsPerSample',\r\n    0x0103: 'Compression',\r\n    0x0106: 'PhotometricInterpretation',\r\n    0x0112: 'Orientation',\r\n    0x0115: 'SamplesPerPixel',\r\n    0x011c: 'PlanarConfiguration',\r\n    0x0212: 'YCbCrSubSampling',\r\n    0x0213: 'YCbCrPositioning',\r\n    0x011a: 'XResolution',\r\n    0x011b: 'YResolution',\r\n    0x0128: 'ResolutionUnit',\r\n    0x0111: 'StripOffsets',\r\n    0x0116: 'RowsPerStrip',\r\n    0x0117: 'StripByteCounts',\r\n    0x0201: 'JPEGInterchangeFormat',\r\n    0x0202: 'JPEGInterchangeFormatLength',\r\n    0x012d: 'TransferFunction',\r\n    0x013e: 'WhitePoint',\r\n    0x013f: 'PrimaryChromaticities',\r\n    0x0211: 'YCbCrCoefficients',\r\n    0x0214: 'ReferenceBlackWhite',\r\n    0x0132: 'DateTime',\r\n    0x010e: 'ImageDescription',\r\n    0x010f: 'Make',\r\n    0x0110: 'Model',\r\n    0x0131: 'Software',\r\n    0x013b: 'Artist',\r\n    0x8298: 'Copyright'\r\n  };\r\n\r\n  public GPSTags: any = {\r\n    0x0000: 'GPSVersionID',\r\n    0x0001: 'GPSLatitudeRef',\r\n    0x0002: 'GPSLatitude',\r\n    0x0003: 'GPSLongitudeRef',\r\n    0x0004: 'GPSLongitude',\r\n    0x0005: 'GPSAltitudeRef',\r\n    0x0006: 'GPSAltitude',\r\n    0x0007: 'GPSTimeStamp',\r\n    0x0008: 'GPSSatellites',\r\n    0x0009: 'GPSStatus',\r\n    0x000a: 'GPSMeasureMode',\r\n    0x000b: 'GPSDOP',\r\n    0x000c: 'GPSSpeedRef',\r\n    0x000d: 'GPSSpeed',\r\n    0x000e: 'GPSTrackRef',\r\n    0x000f: 'GPSTrack',\r\n    0x0010: 'GPSImgDirectionRef',\r\n    0x0011: 'GPSImgDirection',\r\n    0x0012: 'GPSMapDatum',\r\n    0x0013: 'GPSDestLatitudeRef',\r\n    0x0014: 'GPSDestLatitude',\r\n    0x0015: 'GPSDestLongitudeRef',\r\n    0x0016: 'GPSDestLongitude',\r\n    0x0017: 'GPSDestBearingRef',\r\n    0x0018: 'GPSDestBearing',\r\n    0x0019: 'GPSDestDistanceRef',\r\n    0x001a: 'GPSDestDistance',\r\n    0x001b: 'GPSProcessingMethod',\r\n    0x001c: 'GPSAreaInformation',\r\n    0x001d: 'GPSDateStamp',\r\n    0x001e: 'GPSDifferential'\r\n  };\r\n\r\n  public StringValues: any = {\r\n    ExposureProgram: {\r\n      0: 'Not defined',\r\n      1: 'Manual',\r\n      2: 'Normal program',\r\n      3: 'Aperture priority',\r\n      4: 'Shutter priority',\r\n      5: 'Creative program',\r\n      6: 'Action program',\r\n      7: 'Portrait mode',\r\n      8: 'Landscape mode'\r\n    },\r\n    MeteringMode: {\r\n      0: 'Unknown',\r\n      1: 'Average',\r\n      2: 'CenterWeightedAverage',\r\n      3: 'Spot',\r\n      4: 'MultiSpot',\r\n      5: 'Pattern',\r\n      6: 'Partial',\r\n      255: 'Other'\r\n    },\r\n    LightSource: {\r\n      0: 'Unknown',\r\n      1: 'Daylight',\r\n      2: 'Fluorescent',\r\n      3: 'Tungsten (incandescent light)',\r\n      4: 'Flash',\r\n      9: 'Fine weather',\r\n      10: 'Cloudy weather',\r\n      11: 'Shade',\r\n      12: 'Daylight fluorescent (D 5700 - 7100K)',\r\n      13: 'Day white fluorescent (N 4600 - 5400K)',\r\n      14: 'Cool white fluorescent (W 3900 - 4500K)',\r\n      15: 'White fluorescent (WW 3200 - 3700K)',\r\n      17: 'Standard light A',\r\n      18: 'Standard light B',\r\n      19: 'Standard light C',\r\n      20: 'D55',\r\n      21: 'D65',\r\n      22: 'D75',\r\n      23: 'D50',\r\n      24: 'ISO studio tungsten',\r\n      255: 'Other'\r\n    },\r\n    Flash: {\r\n      0x0000: 'Flash did not fire',\r\n      0x0001: 'Flash fired',\r\n      0x0005: 'Strobe return light not detected',\r\n      0x0007: 'Strobe return light detected',\r\n      0x0009: 'Flash fired, compulsory flash mode',\r\n      0x000d: 'Flash fired, compulsory flash mode, return light not detected',\r\n      0x000f: 'Flash fired, compulsory flash mode, return light detected',\r\n      0x0010: 'Flash did not fire, compulsory flash mode',\r\n      0x0018: 'Flash did not fire, auto mode',\r\n      0x0019: 'Flash fired, auto mode',\r\n      0x001d: 'Flash fired, auto mode, return light not detected',\r\n      0x001f: 'Flash fired, auto mode, return light detected',\r\n      0x0020: 'No flash function',\r\n      0x0041: 'Flash fired, red-eye reduction mode',\r\n      0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\r\n      0x0047: 'Flash fired, red-eye reduction mode, return light detected',\r\n      0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\r\n      0x004d: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\r\n      0x004f: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\r\n      0x0059: 'Flash fired, auto mode, red-eye reduction mode',\r\n      0x005d: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\r\n      0x005f: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\r\n    },\r\n    SensingMethod: {\r\n      1: 'Not defined',\r\n      2: 'One-chip color area sensor',\r\n      3: 'Two-chip color area sensor',\r\n      4: 'Three-chip color area sensor',\r\n      5: 'Color sequential area sensor',\r\n      7: 'Trilinear sensor',\r\n      8: 'Color sequential linear sensor'\r\n    },\r\n    SceneCaptureType: {\r\n      0: 'Standard',\r\n      1: 'Landscape',\r\n      2: 'Portrait',\r\n      3: 'Night scene'\r\n    },\r\n    SceneType: {\r\n      1: 'Directly photographed'\r\n    },\r\n    CustomRendered: {\r\n      0: 'Normal process',\r\n      1: 'Custom process'\r\n    },\r\n    WhiteBalance: {\r\n      0: 'Auto white balance',\r\n      1: 'Manual white balance'\r\n    },\r\n    GainControl: {\r\n      0: 'None',\r\n      1: 'Low gain up',\r\n      2: 'High gain up',\r\n      3: 'Low gain down',\r\n      4: 'High gain down'\r\n    },\r\n    Contrast: {\r\n      0: 'Normal',\r\n      1: 'Soft',\r\n      2: 'Hard'\r\n    },\r\n    Saturation: {\r\n      0: 'Normal',\r\n      1: 'Low saturation',\r\n      2: 'High saturation'\r\n    },\r\n    Sharpness: {\r\n      0: 'Normal',\r\n      1: 'Soft',\r\n      2: 'Hard'\r\n    },\r\n    SubjectDistanceRange: {\r\n      0: 'Unknown',\r\n      1: 'Macro',\r\n      2: 'Close view',\r\n      3: 'Distant view'\r\n    },\r\n    FileSource: {\r\n      3: 'DSC'\r\n    },\r\n\r\n    Components: {\r\n      0: '',\r\n      1: 'Y',\r\n      2: 'Cb',\r\n      3: 'Cr',\r\n      4: 'R',\r\n      5: 'G',\r\n      6: 'B'\r\n    }\r\n  };\r\n\r\n  public addEvent(\r\n    element: EventTarget | any,\r\n    event: string,\r\n    handler: EventListener\r\n  ) {\r\n    if (element.addEventListener) {\r\n      element.addEventListener(event, handler, false);\r\n    } else {\r\n      // Hello, IE!\r\n      if (element.attachEvent) {\r\n        element.attachEvent('on' + event, handler);\r\n      }\r\n    }\r\n  }\r\n\r\n  public imageHasData(img: IImageExtended) {\r\n    return !!img.exifdata;\r\n  }\r\n\r\n  public base64ToArrayBuffer(base64: string): ArrayBuffer {\r\n    base64 = base64.replace(/^data:([^;]+);base64,/gim, '');\r\n    const binary: string = atob(base64);\r\n    const len: number = binary.length;\r\n    const buffer: ArrayBuffer = new ArrayBuffer(len);\r\n    const view: Uint8Array = new Uint8Array(buffer);\r\n    for (let i = 0; i < len; i++) {\r\n      view[i] = binary.charCodeAt(i);\r\n    }\r\n    return buffer;\r\n  }\r\n\r\n  public objectURLToBlob(url: string, callback: (blob: Blob) => void) {\r\n    const http: XMLHttpRequest = new XMLHttpRequest();\r\n    http.open('GET', url, true);\r\n    http.responseType = 'blob';\r\n    http.onload = () => {\r\n      if (http.status === 200 || http.status === 0) {\r\n        callback(http.response);\r\n      }\r\n    };\r\n    http.send();\r\n  }\r\n\r\n  public getImageData(\r\n    img: IImageExtended | Blob | File,\r\n    callback: (img: IImageExtended) => void\r\n  ) {\r\n    const handleBinaryFile = (binFile: ArrayBuffer) => {\r\n      const data = this.findEXIFinJPEG(binFile);\r\n      const iptcdata = this.findIPTCinJPEG(binFile);\r\n      (img as IImageExtended).exifdata = data || {};\r\n      (img as IImageExtended).iptcdata = iptcdata || {};\r\n      if (callback) {\r\n        callback.call(img);\r\n      }\r\n    };\r\n\r\n    if ('src' in img && (img as IImageExtended).src) {\r\n      if (/^data:/i.test((img as IImageExtended).src)) {\r\n        // Data URI\r\n        const arrayBuffer = this.base64ToArrayBuffer(\r\n          (img as IImageExtended).src\r\n        );\r\n        handleBinaryFile(arrayBuffer);\r\n      } else {\r\n        if (/^blob:/i.test((img as IImageExtended).src)) {\r\n          // Object URL\r\n          const fileReader = new FileReader();\r\n          fileReader.onload = (e: any) => {\r\n            handleBinaryFile(e.target.result);\r\n          };\r\n          this.objectURLToBlob((img as IImageExtended).src, (blob: Blob) => {\r\n            fileReader.readAsArrayBuffer(blob);\r\n          });\r\n        } else {\r\n          const http = new XMLHttpRequest();\r\n          http.onload = () => {\r\n            if (http.status === 200 || http.status === 0) {\r\n              handleBinaryFile(http.response);\r\n            } else {\r\n              throw new Error('Could not load image');\r\n            }\r\n          };\r\n          http.open('GET', (img as IImageExtended).src, true);\r\n          http.responseType = 'arraybuffer';\r\n          http.send(null);\r\n        }\r\n      }\r\n    } else {\r\n      if (FileReader && (img instanceof Blob || img instanceof File)) {\r\n        const fileReader = new FileReader();\r\n        fileReader.onload = (e: any) => {\r\n          this.log('Got file of length ' + e.target.result.byteLength);\r\n          handleBinaryFile(e.target.result);\r\n        };\r\n\r\n        fileReader.readAsArrayBuffer(img);\r\n      }\r\n    }\r\n  }\r\n\r\n  public findEXIFinJPEG(file: ArrayBuffer) {\r\n    const dataView = new DataView(file);\r\n\r\n    this.log('Got file of length ' + file.byteLength);\r\n    if (dataView.getUint8(0) !== 0xff || dataView.getUint8(1) !== 0xd8) {\r\n      this.log('Not a valid JPEG');\r\n      return false; // not a valid jpeg\r\n    }\r\n\r\n    let offset = 2;\r\n    const length: number = file.byteLength;\r\n    let marker: number;\r\n\r\n    while (offset < length) {\r\n      if (dataView.getUint8(offset) !== 0xff) {\r\n        this.log(\r\n          'Not a valid marker at offset ' +\r\n            offset +\r\n            ', found: ' +\r\n            dataView.getUint8(offset)\r\n        );\r\n        return false; // not a valid marker, something is wrong\r\n      }\r\n\r\n      marker = dataView.getUint8(offset + 1);\r\n      this.log(marker);\r\n\r\n      // we could implement handling for other markers here,\r\n      // but we're only looking for 0xFFE1 for EXIF data\r\n      if (marker === 225) {\r\n        this.log('Found 0xFFE1 marker');\r\n        return this.readEXIFData(dataView, offset + 4); // , dataView.getUint16(offset + 2) - 2);\r\n        // offset += 2 + file.getShortAt(offset+2, true);\r\n      } else {\r\n        offset += 2 + dataView.getUint16(offset + 2);\r\n      }\r\n    }\r\n  }\r\n\r\n  public findIPTCinJPEG(file: ArrayBuffer) {\r\n    const dataView = new DataView(file);\r\n\r\n    this.log('Got file of length ' + file.byteLength);\r\n    if (dataView.getUint8(0) !== 0xff || dataView.getUint8(1) !== 0xd8) {\r\n      this.log('Not a valid JPEG');\r\n      return false; // not a valid jpeg\r\n    }\r\n\r\n    let offset = 2;\r\n    const length = file.byteLength;\r\n\r\n    // tslint:disable-next-line:variable-name\r\n    const isFieldSegmentStart = (_dataView: DataView, _offset: number) => {\r\n      return (\r\n        _dataView.getUint8(_offset) === 0x38 &&\r\n        _dataView.getUint8(_offset + 1) === 0x42 &&\r\n        _dataView.getUint8(_offset + 2) === 0x49 &&\r\n        _dataView.getUint8(_offset + 3) === 0x4d &&\r\n        _dataView.getUint8(_offset + 4) === 0x04 &&\r\n        _dataView.getUint8(_offset + 5) === 0x04\r\n      );\r\n    };\r\n\r\n    while (offset < length) {\r\n      if (isFieldSegmentStart(dataView, offset)) {\r\n        // Get the length of the name header (which is padded to an even number of bytes)\r\n        let nameHeaderLength = dataView.getUint8(offset + 7);\r\n        if (nameHeaderLength % 2 !== 0) {\r\n          nameHeaderLength += 1;\r\n        }\r\n        // Check for pre photoshop 6 format\r\n        if (nameHeaderLength === 0) {\r\n          // Always 4\r\n          nameHeaderLength = 4;\r\n        }\r\n\r\n        const startOffset = offset + 8 + nameHeaderLength;\r\n        const sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\r\n\r\n        return this.readIPTCData(file, startOffset, sectionLength);\r\n      }\r\n\r\n      // Not the marker, continue searching\r\n      offset++;\r\n    }\r\n  }\r\n\r\n  public readIPTCData(\r\n    file: ArrayBuffer,\r\n    startOffset: number,\r\n    sectionLength: number\r\n  ) {\r\n    const dataView = new DataView(file);\r\n    const data: any = {};\r\n    let fieldValue: any;\r\n    let fieldName: string;\r\n    let dataSize: number;\r\n    let segmentType: any;\r\n    let segmentSize: number;\r\n    let segmentStartPos = startOffset;\r\n    while (segmentStartPos < startOffset + sectionLength) {\r\n      if (\r\n        dataView.getUint8(segmentStartPos) === 0x1c &&\r\n        dataView.getUint8(segmentStartPos + 1) === 0x02\r\n      ) {\r\n        segmentType = dataView.getUint8(segmentStartPos + 2);\r\n        if (segmentType in this.IptcFieldMap) {\r\n          dataSize = dataView.getInt16(segmentStartPos + 3);\r\n          segmentSize = dataSize + 5;\r\n          fieldName = this.IptcFieldMap[segmentType];\r\n          fieldValue = this.getStringFromDB(\r\n            dataView,\r\n            segmentStartPos + 5,\r\n            dataSize\r\n          );\r\n          // Check if we already stored a value with this name\r\n          if (data.hasOwnProperty(fieldName)) {\r\n            // Value already stored with this name, create multivalue field\r\n            if (data[fieldName] instanceof Array) {\r\n              data[fieldName].push(fieldValue);\r\n            } else {\r\n              data[fieldName] = [data[fieldName], fieldValue];\r\n            }\r\n          } else {\r\n            data[fieldName] = fieldValue;\r\n          }\r\n        }\r\n      }\r\n      segmentStartPos++;\r\n    }\r\n    return data;\r\n  }\r\n\r\n  public readTags(\r\n    file: DataView,\r\n    tiffStart: number,\r\n    dirStart: number,\r\n    strings: string[],\r\n    bigEnd: boolean\r\n  ): any {\r\n    const entries: number = file.getUint16(dirStart, !bigEnd);\r\n    const tags: any = {};\r\n    let entryOffset: number;\r\n    let tag: string;\r\n\r\n    for (let i = 0; i < entries; i++) {\r\n      entryOffset = dirStart + i * 12 + 2;\r\n      tag = strings[file.getUint16(entryOffset, !bigEnd)];\r\n      if (!tag) {\r\n        this.log('Unknown tag: ' + file.getUint16(entryOffset, !bigEnd));\r\n      }\r\n      tags[tag] = this.readTagValue(\r\n        file,\r\n        entryOffset,\r\n        tiffStart,\r\n        dirStart,\r\n        bigEnd\r\n      );\r\n    }\r\n    return tags;\r\n  }\r\n\r\n  public readTagValue(\r\n    file: any,\r\n    entryOffset: number,\r\n    tiffStart: number,\r\n    dirStart: number,\r\n    bigEnd: boolean\r\n  ): any {\r\n    const type: number = file.getUint16(entryOffset + 2, !bigEnd);\r\n    const numValues = file.getUint32(entryOffset + 4, !bigEnd);\r\n    const valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart;\r\n    let offset: number;\r\n    let vals: any[];\r\n    let val: any;\r\n    let n: number;\r\n    let numerator: any;\r\n    let denominator: any;\r\n\r\n    switch (type) {\r\n      case 1: // byte, 8-bit unsigned int\r\n      case 7: // undefined, 8-bit byte, value depending on field\r\n        if (numValues === 1) {\r\n          return file.getUint8(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          offset = numValues > 4 ? valueOffset : entryOffset + 8;\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getUint8(offset + n);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 2: // ascii, 8-bit byte\r\n        offset = numValues > 4 ? valueOffset : entryOffset + 8;\r\n        return this.getStringFromDB(file, offset, numValues - 1);\r\n\r\n      case 3: // short, 16 bit int\r\n        if (numValues === 1) {\r\n          return file.getUint16(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          offset = numValues > 2 ? valueOffset : entryOffset + 8;\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 4: // long, 32 bit int\r\n        if (numValues === 1) {\r\n          return file.getUint32(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 5: // rational = two long values, first is numerator, second is denominator\r\n        if (numValues === 1) {\r\n          numerator = file.getUint32(valueOffset, !bigEnd);\r\n          denominator = file.getUint32(valueOffset + 4, !bigEnd);\r\n          val = new Fraction(numerator / denominator);\r\n          val.numerator = numerator;\r\n          val.denominator = denominator;\r\n          return val;\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);\r\n            denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\r\n            vals[n] = new Fraction(numerator / denominator);\r\n            vals[n].numerator = numerator;\r\n            vals[n].denominator = denominator;\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 9: // slong, 32 bit signed int\r\n        if (numValues === 1) {\r\n          return file.getInt32(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 10: // signed rational, two slongs, first is numerator, second is denominator\r\n        if (numValues === 1) {\r\n          return (\r\n            file.getInt32(valueOffset, !bigEnd) /\r\n            file.getInt32(valueOffset + 4, !bigEnd)\r\n          );\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] =\r\n              file.getInt32(valueOffset + 8 * n, !bigEnd) /\r\n              file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  public getStringFromDB(\r\n    buffer: DataView,\r\n    start: number,\r\n    length: number\r\n  ): string {\r\n    let outstr = '';\r\n    for (let n = start; n < start + length; n++) {\r\n      outstr += String.fromCharCode(buffer.getUint8(n));\r\n    }\r\n    return outstr;\r\n  }\r\n\r\n  public readEXIFData(file: DataView, start: number): any {\r\n    if (this.getStringFromDB(file, start, 4) !== 'Exif') {\r\n      this.log('Not valid EXIF data! ' + this.getStringFromDB(file, start, 4));\r\n\r\n      return false;\r\n    }\r\n\r\n    let bigEnd: boolean;\r\n    let tags: any;\r\n    let tag: string;\r\n    let exifData: any;\r\n    let gpsData: any;\r\n    const tiffOffset: number = start + 6;\r\n\r\n    // test for TIFF validity and endianness\r\n    if (file.getUint16(tiffOffset) === 0x4949) {\r\n      bigEnd = false;\r\n    } else {\r\n      if (file.getUint16(tiffOffset) === 0x4d4d) {\r\n        bigEnd = true;\r\n      } else {\r\n        this.log('Not valid TIFF data! (no 0x4949 or 0x4D4D)');\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (file.getUint16(tiffOffset + 2, !bigEnd) !== 0x002a) {\r\n      this.log('Not valid TIFF data! (no 0x002A)');\r\n      return false;\r\n    }\r\n\r\n    const firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\r\n\r\n    if (firstIFDOffset < 0x00000008) {\r\n      this.log(\r\n        'Not valid TIFF data! (First offset less than 8)',\r\n        file.getUint32(tiffOffset + 4, !bigEnd)\r\n      );\r\n      return false;\r\n    }\r\n\r\n    tags = this.readTags(\r\n      file,\r\n      tiffOffset,\r\n      tiffOffset + firstIFDOffset,\r\n      this.TiffTags,\r\n      bigEnd\r\n    );\r\n\r\n    if (tags.ExifIFDPointer) {\r\n      exifData = this.readTags(\r\n        file,\r\n        tiffOffset,\r\n        tiffOffset + tags.ExifIFDPointer,\r\n        this.Tags,\r\n        bigEnd\r\n      );\r\n      for (tag in exifData) {\r\n        if ({}.hasOwnProperty.call(exifData, tag)) {\r\n          switch (tag) {\r\n            case 'LightSource':\r\n            case 'Flash':\r\n            case 'MeteringMode':\r\n            case 'ExposureProgram':\r\n            case 'SensingMethod':\r\n            case 'SceneCaptureType':\r\n            case 'SceneType':\r\n            case 'CustomRendered':\r\n            case 'WhiteBalance':\r\n            case 'GainControl':\r\n            case 'Contrast':\r\n            case 'Saturation':\r\n            case 'Sharpness':\r\n            case 'SubjectDistanceRange':\r\n            case 'FileSource':\r\n              exifData[tag] = this.StringValues[tag][exifData[tag]];\r\n              break;\r\n            case 'ExifVersion':\r\n            case 'FlashpixVersion':\r\n              exifData[tag] = String.fromCharCode(\r\n                exifData[tag][0],\r\n                exifData[tag][1],\r\n                exifData[tag][2],\r\n                exifData[tag][3]\r\n              );\r\n              break;\r\n            case 'ComponentsConfiguration':\r\n              const compopents = 'Components';\r\n              exifData[tag] =\r\n                this.StringValues[compopents][exifData[tag][0]] +\r\n                this.StringValues[compopents][exifData[tag][1]] +\r\n                this.StringValues[compopents][exifData[tag][2]] +\r\n                this.StringValues[compopents][exifData[tag][3]];\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          tags[tag] = exifData[tag];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (tags.GPSInfoIFDPointer) {\r\n      gpsData = this.readTags(\r\n        file,\r\n        tiffOffset,\r\n        tiffOffset + tags.GPSInfoIFDPointer,\r\n        this.GPSTags,\r\n        bigEnd\r\n      );\r\n      for (tag in gpsData) {\r\n        if ({}.hasOwnProperty.call(gpsData, tag)) {\r\n          switch (tag) {\r\n            case 'GPSVersionID':\r\n              gpsData[tag] =\r\n                gpsData[tag][0] +\r\n                '.' +\r\n                gpsData[tag][1] +\r\n                '.' +\r\n                gpsData[tag][2] +\r\n                '.' +\r\n                gpsData[tag][3];\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          tags[tag] = gpsData[tag];\r\n        }\r\n      }\r\n    }\r\n\r\n    return tags;\r\n  }\r\n\r\n  //   get rid of this silly issue\r\n  private checkImageType(img: any) {\r\n    return img instanceof Image || img instanceof HTMLImageElement;\r\n  }\r\n\r\n  public getData(img: IImageExtended | HTMLImageElement, callback: () => void) {\r\n    if (this.checkImageType(img) && !img.complete) {\r\n      return false;\r\n    }\r\n\r\n    if (!this.imageHasData(img as IImageExtended)) {\r\n      this.getImageData(img as IImageExtended, callback);\r\n    } else {\r\n      if (callback) {\r\n        callback.call(img);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public getTag(img: any, tag: string) {\r\n    if (!this.imageHasData(img)) {\r\n      return;\r\n    }\r\n    return img.exifdata[tag];\r\n  }\r\n\r\n  public getAllTags(img: any) {\r\n    if (!this.imageHasData(img)) {\r\n      return {};\r\n    }\r\n    let a: string;\r\n    const data: any = img.exifdata;\r\n    const tags: any = {};\r\n    for (a in data) {\r\n      if (data.hasOwnProperty(a)) {\r\n        tags[a] = data[a];\r\n      }\r\n    }\r\n    return tags;\r\n  }\r\n\r\n  public pretty(img: IImageExtended) {\r\n    if (!this.imageHasData(img)) {\r\n      return '';\r\n    }\r\n    let a: any;\r\n    const data: any = img.exifdata;\r\n    let strPretty = '';\r\n    for (a in data) {\r\n      if (data.hasOwnProperty(a)) {\r\n        if (typeof data[a] === 'object') {\r\n          if (data[a] instanceof Number) {\r\n            strPretty += `${a} : ${data[a]} [${data[a].numerator}/${\r\n              data[a].denominator\r\n            }]\\r\\n`;\r\n          } else {\r\n            strPretty += `${a} : [${data[a].length} values]\\r\\n`;\r\n          }\r\n        } else {\r\n          strPretty += `${a} : ${data[a]}\\r\\n`;\r\n        }\r\n      }\r\n    }\r\n    return strPretty;\r\n  }\r\n\r\n  public readFromBinaryFile(file: ArrayBuffer) {\r\n    return this.findEXIFinJPEG(file);\r\n  }\r\n\r\n  public log(...args: any[]) {\r\n    if (this.debug) {\r\n      console.log(args);\r\n    }\r\n  }\r\n}\r\n","export interface IPoint {\r\n  x: number;\r\n  y: number;\r\n  next: Point;\r\n  prev: Point;\r\n}\r\n\r\nexport class Point implements IPoint {\r\n  public x: number;\r\n  public y: number;\r\n\r\n  private myNext: Point;\r\n  private myPrev: Point;\r\n\r\n  constructor(x: number = 0, y: number = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  public get next(): Point {\r\n    return this.myNext;\r\n  }\r\n\r\n  public set next(p: Point) {\r\n    this.myNext = p;\r\n  }\r\n\r\n  public get prev(): Point {\r\n    return this.myPrev;\r\n  }\r\n\r\n  public set prev(p: Point) {\r\n    this.myPrev = p;\r\n  }\r\n}\r\n","import { Point } from './point';\r\n\r\nexport class PointPool {\r\n  private borrowed: number;\r\n  private firstAvailable: Point;\r\n\r\n  constructor(initialSize: number = 1) {\r\n    let prev: Point = (this.firstAvailable = new Point());\r\n\r\n    for (let i = 1; i < initialSize; i++) {\r\n      const p = new Point();\r\n      prev.next = p;\r\n      prev = p;\r\n    }\r\n  }\r\n\r\n  get instance(): PointPool {\r\n    return this;\r\n  }\r\n\r\n  public borrow(x: number, y: number): Point {\r\n    if (this.firstAvailable == null) {\r\n      throw new Error('Pool exhausted');\r\n    }\r\n    this.borrowed++;\r\n    const p: Point = this.firstAvailable;\r\n    this.firstAvailable = p.next;\r\n    p.x = x;\r\n    p.y = y;\r\n    return p;\r\n  }\r\n\r\n  public returnPoint(p: Point) {\r\n    this.borrowed--;\r\n    p.x = 0;\r\n    p.y = 0;\r\n    p.next = this.firstAvailable;\r\n    this.firstAvailable = p;\r\n  }\r\n}\r\n","import { Point } from './point';\r\nimport { PointPool } from './pointPool';\r\n\r\nexport class Bounds {\r\n  public left: number;\r\n  public right: number;\r\n  public top: number;\r\n  public bottom: number;\r\n\r\n  constructor(x?: number, y?: number, width?: number, height?: number) {\r\n    if (x === void 0) {\r\n      x = 0;\r\n    }\r\n    if (y === void 0) {\r\n      y = 0;\r\n    }\r\n    if (width === void 0) {\r\n      width = 0;\r\n    }\r\n    if (height === void 0) {\r\n      height = 0;\r\n    }\r\n    this.left = x;\r\n    this.right = x + width;\r\n    this.top = y;\r\n    this.bottom = y + height;\r\n  }\r\n\r\n  public get width(): number {\r\n    return this.right - this.left;\r\n  }\r\n\r\n  public get height(): number {\r\n    return this.bottom - this.top;\r\n  }\r\n\r\n  public getCentre(): Point {\r\n    const w = this.width;\r\n    const h = this.height;\r\n    return new PointPool().instance.borrow(this.left + w / 2, this.top + h / 2);\r\n  }\r\n}\r\n","import { Point } from './point';\r\nimport { CropperSettings } from '../cropper-settings';\r\n\r\nexport interface IHandle {\r\n  over: boolean;\r\n  drag: boolean;\r\n  position: Point;\r\n  offset: Point;\r\n  radius: number;\r\n  cropperSettings: CropperSettings;\r\n  setPosition(x: number, y: number): void;\r\n  setDrag(value: boolean): void;\r\n  draw(ctx: CanvasRenderingContext2D): void;\r\n  setOver(over: boolean): void;\r\n  touchInBounds(x: number, y: number): boolean;\r\n}\r\n\r\nexport class Handle implements IHandle {\r\n  public over: boolean;\r\n  public drag: boolean;\r\n  // tslint:disable-next-line:variable-name\r\n  private _position: Point;\r\n  public offset: Point;\r\n  public radius: number;\r\n\r\n  public cropperSettings: CropperSettings = new CropperSettings();\r\n\r\n  constructor(x: number, y: number, radius: number, settings: CropperSettings) {\r\n    this.over = false;\r\n    this.drag = false;\r\n    this._position = new Point(x, y);\r\n    this.offset = new Point(0, 0);\r\n    this.radius = radius;\r\n    this.cropperSettings = settings;\r\n  }\r\n\r\n  public setDrag(value: boolean): void {\r\n    this.drag = value;\r\n    this.setOver(value);\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D) {\r\n    // this should't be empty\r\n  }\r\n\r\n  public setOver(over: boolean): void {\r\n    this.over = over;\r\n  }\r\n\r\n  public touchInBounds(x: number, y: number): boolean {\r\n    return (\r\n      x > this.position.x - this.radius + this.offset.x &&\r\n      x < this.position.x + this.radius + this.offset.x &&\r\n      y > this.position.y - this.radius + this.offset.y &&\r\n      y < this.position.y + this.radius + this.offset.y\r\n    );\r\n  }\r\n\r\n  public get position(): Point {\r\n    return this._position;\r\n  }\r\n\r\n  public setPosition(x: number, y: number) {\r\n    this._position.x = x;\r\n    this._position.y = y;\r\n  }\r\n}\r\n","import { Handle, IHandle } from './handle';\r\nimport { CropperSettings } from '../cropper-settings';\r\n\r\nexport interface ICornerMarker extends IHandle {\r\n  horizontalNeighbour: CornerMarker;\r\n  verticalNeighbour: CornerMarker;\r\n}\r\n\r\nexport class CornerMarker extends Handle implements ICornerMarker {\r\n  public horizontalNeighbour: CornerMarker;\r\n  public verticalNeighbour: CornerMarker;\r\n\r\n  constructor(\r\n    x: number,\r\n    y: number,\r\n    radius: number,\r\n    cropperSettings: CropperSettings\r\n  ) {\r\n    super(x, y, radius, cropperSettings);\r\n  }\r\n\r\n  public drawCornerBorder(ctx: CanvasRenderingContext2D): void {\r\n    let sideLength = 10;\r\n    if (this.over || this.drag) {\r\n      sideLength = 12;\r\n    }\r\n\r\n    let hDirection: number = this.cropperSettings.markerSizeMultiplier;\r\n    let vDirection: number = this.cropperSettings.markerSizeMultiplier;\r\n    if (this.horizontalNeighbour.position.x < this.position.x) {\r\n      hDirection = -this.cropperSettings.markerSizeMultiplier;\r\n    }\r\n    if (this.verticalNeighbour.position.y < this.position.y) {\r\n      vDirection = -this.cropperSettings.markerSizeMultiplier;\r\n    }\r\n\r\n    ctx.beginPath();\r\n    if (this.cropperSettings.cropperDrawSettings.lineDash) {\r\n      ctx.setLineDash([1, 3]);\r\n    }\r\n    ctx.lineJoin = 'miter';\r\n    ctx.moveTo(\r\n      this.position.x + this.offset.x,\r\n      this.position.y + this.offset.y\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x + sideLength * hDirection,\r\n      this.position.y + this.offset.y\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x + sideLength * hDirection,\r\n      this.position.y + this.offset.y + sideLength * vDirection\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x,\r\n      this.position.y + this.offset.y + sideLength * vDirection\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x,\r\n      this.position.y + this.offset.y\r\n    );\r\n    ctx.closePath();\r\n    ctx.lineWidth = this.cropperSettings.cropperDrawSettings.strokeWidth;\r\n    ctx.strokeStyle =\r\n      this.cropperSettings.cropperDrawSettings.strokeColor ||\r\n      'rgba(255,255,255,.7)';\r\n    ctx.stroke();\r\n  }\r\n\r\n  public drawCornerFill(ctx: CanvasRenderingContext2D): void {\r\n    let sideLength = 10;\r\n    if (this.over || this.drag) {\r\n      sideLength = 12;\r\n    }\r\n    let hDirection: number = this.cropperSettings.markerSizeMultiplier;\r\n    let vDirection: number = this.cropperSettings.markerSizeMultiplier;\r\n    if (this.horizontalNeighbour.position.x < this.position.x) {\r\n      hDirection = -this.cropperSettings.markerSizeMultiplier;\r\n    }\r\n    if (this.verticalNeighbour.position.y < this.position.y) {\r\n      vDirection = -this.cropperSettings.markerSizeMultiplier;\r\n    }\r\n\r\n    if (this.cropperSettings.rounded) {\r\n      const width: number =\r\n        this.position.x - this.horizontalNeighbour.position.x;\r\n      const height: number =\r\n        this.position.y - this.verticalNeighbour.position.y;\r\n\r\n      const offX: number =\r\n        Math.round(Math.sin(Math.PI / 2) * Math.abs(width / 2)) / 4;\r\n      const offY: number =\r\n        Math.round(Math.sin(Math.PI / 2) * Math.abs(height / 2)) / 4;\r\n\r\n      this.offset.x = hDirection > 0 ? offX : -offX;\r\n      this.offset.y = vDirection > 0 ? offY : -offY;\r\n    } else {\r\n      this.offset.x = 0;\r\n      this.offset.y = 0;\r\n    }\r\n\r\n    ctx.beginPath();\r\n    if (this.cropperSettings.cropperDrawSettings.lineDash) {\r\n      ctx.setLineDash([1, 3]);\r\n    }\r\n    ctx.moveTo(\r\n      this.position.x + this.offset.x,\r\n      this.position.y + this.offset.y\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x + sideLength * hDirection,\r\n      this.position.y + this.offset.y\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x + sideLength * hDirection,\r\n      this.position.y + this.offset.y + sideLength * vDirection\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x,\r\n      this.position.y + this.offset.y + sideLength * vDirection\r\n    );\r\n    ctx.lineTo(\r\n      this.position.x + this.offset.x,\r\n      this.position.y + this.offset.y\r\n    );\r\n    ctx.closePath();\r\n    ctx.fillStyle =\r\n      this.cropperSettings.cropperDrawSettings.fillColor ||\r\n      'rgba(255,255,255,.7)';\r\n    ctx.fill();\r\n  }\r\n\r\n  public moveX(x: number): void {\r\n    this.setPosition(x, this.position.y);\r\n  }\r\n\r\n  public moveY(y: number): void {\r\n    this.setPosition(this.position.x, y);\r\n  }\r\n\r\n  public move(x: number, y: number): void {\r\n    this.setPosition(x, y);\r\n    this.verticalNeighbour.moveX(x);\r\n    this.horizontalNeighbour.moveY(y);\r\n  }\r\n\r\n  public addHorizontalNeighbour(neighbour: CornerMarker): void {\r\n    this.horizontalNeighbour = neighbour;\r\n  }\r\n\r\n  public addVerticalNeighbour(neighbour: CornerMarker): void {\r\n    this.verticalNeighbour = neighbour;\r\n  }\r\n\r\n  public getHorizontalNeighbour(): CornerMarker {\r\n    return this.horizontalNeighbour;\r\n  }\r\n\r\n  public getVerticalNeighbour(): CornerMarker {\r\n    return this.verticalNeighbour;\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D): void {\r\n    this.drawCornerFill(ctx);\r\n    this.drawCornerBorder(ctx);\r\n  }\r\n}\r\n","import { IHandle } from './handle';\r\n\r\nexport class CropTouch {\r\n  public x: number;\r\n  public y: number;\r\n  public id: number;\r\n\r\n  public dragHandle: IHandle;\r\n\r\n  constructor(x: number = 0, y: number = 0, id: number = 0) {\r\n    this.id = id;\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n","import { Handle } from './handle';\r\nimport { PointPool } from './pointPool';\r\nimport { Point } from './point';\r\nimport { CropperSettings } from '../cropper-settings';\r\nimport { Bounds } from './bounds';\r\n\r\nexport class DragMarker extends Handle {\r\n  private iconPoints: Array<Point>;\r\n  private scaledIconPoints: Array<Point>;\r\n\r\n  constructor(\r\n    x: number,\r\n    y: number,\r\n    radius: number,\r\n    cropperSettings: CropperSettings\r\n  ) {\r\n    super(x, y, radius, cropperSettings);\r\n    this.iconPoints = [];\r\n    this.scaledIconPoints = [];\r\n    this.getDragIconPoints(this.iconPoints, 1);\r\n    this.getDragIconPoints(this.scaledIconPoints, 1.2);\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D) {\r\n    if (this.over || this.drag) {\r\n      this.drawIcon(ctx, this.scaledIconPoints);\r\n    } else {\r\n      this.drawIcon(ctx, this.iconPoints);\r\n    }\r\n  }\r\n\r\n  public getDragIconPoints(arr: Array<any>, scale: number) {\r\n    const maxLength = 17 * scale;\r\n    const arrowWidth = 14 * scale;\r\n    const arrowLength = 8 * scale;\r\n    const connectorThroat = 4 * scale;\r\n\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        -connectorThroat / 2,\r\n        maxLength - arrowLength\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(-arrowWidth / 2, maxLength - arrowLength)\r\n    );\r\n    arr.push(new PointPool().instance.borrow(0, maxLength));\r\n    arr.push(\r\n      new PointPool().instance.borrow(arrowWidth / 2, maxLength - arrowLength)\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        connectorThroat / 2,\r\n        maxLength - arrowLength\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(connectorThroat / 2, connectorThroat / 2)\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        maxLength - arrowLength,\r\n        connectorThroat / 2\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(maxLength - arrowLength, arrowWidth / 2)\r\n    );\r\n    arr.push(new PointPool().instance.borrow(maxLength, 0));\r\n    arr.push(\r\n      new PointPool().instance.borrow(maxLength - arrowLength, -arrowWidth / 2)\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        maxLength - arrowLength,\r\n        -connectorThroat / 2\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(connectorThroat / 2, -connectorThroat / 2)\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        connectorThroat / 2,\r\n        -maxLength + arrowLength\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(arrowWidth / 2, -maxLength + arrowLength)\r\n    );\r\n    arr.push(new PointPool().instance.borrow(0, -maxLength));\r\n    arr.push(\r\n      new PointPool().instance.borrow(-arrowWidth / 2, -maxLength + arrowLength)\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        -connectorThroat / 2,\r\n        -maxLength + arrowLength\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        -connectorThroat / 2,\r\n        -connectorThroat / 2\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        -maxLength + arrowLength,\r\n        -connectorThroat / 2\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(-maxLength + arrowLength, -arrowWidth / 2)\r\n    );\r\n    arr.push(new PointPool().instance.borrow(-maxLength, 0));\r\n    arr.push(\r\n      new PointPool().instance.borrow(-maxLength + arrowLength, arrowWidth / 2)\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(\r\n        -maxLength + arrowLength,\r\n        connectorThroat / 2\r\n      )\r\n    );\r\n    arr.push(\r\n      new PointPool().instance.borrow(-connectorThroat / 2, connectorThroat / 2)\r\n    );\r\n  }\r\n\r\n  public drawIcon(ctx: CanvasRenderingContext2D, points: Array<Point>) {\r\n    if (this.cropperSettings.showCenterMarker) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(points[0].x + this.position.x, points[0].y + this.position.y);\r\n      for (const p of points) {\r\n        ctx.lineTo(p.x + this.position.x, p.y + this.position.y);\r\n      }\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.cropperSettings.cropperDrawSettings.dragIconFillColor;\r\n      ctx.fill();\r\n      ctx.lineWidth = this.cropperSettings.cropperDrawSettings.dragIconStrokeWidth;\r\n      ctx.strokeStyle = this.cropperSettings.cropperDrawSettings.dragIconStrokeColor;\r\n      ctx.stroke();\r\n    }\r\n  }\r\n\r\n  public recalculatePosition(bounds: Bounds) {\r\n    const c = bounds.getCentre();\r\n    this.setPosition(c.x, c.y);\r\n    new PointPool().instance.returnPoint(c);\r\n  }\r\n}\r\n","import { PointPool } from './pointPool';\r\nimport { CornerMarker } from './cornerMarker';\r\nimport { DragMarker } from './dragMarker';\r\nimport { CropTouch } from './cropTouch';\r\n\r\nexport class ImageCropperModel {\r\n  public isMouseDown: boolean;\r\n  protected canvas: HTMLCanvasElement;\r\n  protected x: number;\r\n  protected y: number;\r\n  protected width: number;\r\n  protected height: number;\r\n  protected canvasWidth: number;\r\n  protected canvasHeight: number;\r\n  protected keepAspect: boolean;\r\n  protected touchRadius: number;\r\n  protected currentDragTouches: Array<CropTouch>;\r\n  protected ratioW: number;\r\n  protected ratioH: number;\r\n  protected fileType: string;\r\n  protected imageSet: boolean;\r\n  protected pointPool: PointPool;\r\n  protected buffer: HTMLCanvasElement;\r\n  protected cropCanvas: HTMLCanvasElement;\r\n  protected tl: CornerMarker;\r\n  protected tr: CornerMarker;\r\n  protected bl: CornerMarker;\r\n  protected br: CornerMarker;\r\n  protected markers: Array<CornerMarker>;\r\n  protected center: DragMarker;\r\n  protected ctx: CanvasRenderingContext2D;\r\n  protected aspectRatio: number;\r\n  protected currentlyInteracting: boolean;\r\n  protected srcImage: HTMLImageElement;\r\n  protected vertSquashRatio: number;\r\n  protected minXClamp: number;\r\n  protected minYClamp: number;\r\n  protected maxXClamp: number;\r\n  protected maxYClamp: number;\r\n  protected minHeight: number;\r\n  protected minWidth: number;\r\n  protected cropWidth: number;\r\n  protected cropHeight: number;\r\n  protected croppedImage: HTMLImageElement;\r\n}\r\n","export class ImageCropperDataShare {\r\n  public share: any = {};\r\n  public pressed: HTMLCanvasElement;\r\n  public over: HTMLCanvasElement;\r\n\r\n  public setPressed(canvas: HTMLCanvasElement): void {\r\n    this.pressed = canvas;\r\n  }\r\n\r\n  public setReleased(canvas: HTMLCanvasElement): void {\r\n    if (canvas === this.pressed) {\r\n      //  this.pressed = undefined;\r\n    }\r\n  }\r\n\r\n  public setOver(canvas: HTMLCanvasElement): void {\r\n    this.over = canvas;\r\n  }\r\n\r\n  public setStyle(canvas: HTMLCanvasElement, style: any): void {\r\n    if (this.pressed !== undefined) {\r\n      if (this.pressed === canvas) {\r\n        // TODO: check this\r\n        // angular.element(document.documentElement).css('cursor', style);\r\n      }\r\n    } else {\r\n      if (canvas === this.over) {\r\n        // TODO: check this\r\n        // angular.element(document.documentElement).css('cursor', style);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Bounds } from './model/bounds';\r\nimport { CornerMarker } from './model/cornerMarker';\r\nimport { CropTouch } from './model/cropTouch';\r\nimport { CropperSettings } from './cropper-settings';\r\nimport { DragMarker } from './model/dragMarker';\r\nimport { ImageCropperModel } from './model/imageCropperModel';\r\nimport { ImageCropperDataShare } from './imageCropperDataShare';\r\nimport { PointPool } from './model/pointPool';\r\nimport { Point } from './model/point';\r\nimport { ICornerMarker } from './model/cornerMarker';\r\n\r\nexport class ImageCropper extends ImageCropperModel {\r\n  private crop: ImageCropper;\r\n  private cropperSettings: CropperSettings;\r\n  private previousDistance: number;\r\n  private imageCropperDataShare: ImageCropperDataShare;\r\n\r\n  constructor(cropperSettings: CropperSettings) {\r\n    super();\r\n    this.imageCropperDataShare = new ImageCropperDataShare();\r\n    const x = 0;\r\n    const y = 0;\r\n    const width: number = cropperSettings.width;\r\n    const height: number = cropperSettings.height;\r\n    const keepAspect: boolean = cropperSettings.keepAspect;\r\n    const touchRadius: number = cropperSettings.touchRadius;\r\n    const centerTouchRadius: number = cropperSettings.centerTouchRadius;\r\n    const minWidth: number = cropperSettings.minWidth;\r\n    const minHeight: number = cropperSettings.minHeight;\r\n    const croppedWidth: number = cropperSettings.croppedWidth;\r\n    const croppedHeight: number = cropperSettings.croppedHeight;\r\n\r\n    this.cropperSettings = cropperSettings;\r\n\r\n    this.crop = this;\r\n    this.x = x;\r\n    this.y = y;\r\n\r\n    this.canvasHeight = cropperSettings.canvasHeight;\r\n    this.canvasWidth = cropperSettings.canvasWidth;\r\n\r\n    this.width = width;\r\n    if (width === void 0) {\r\n      this.width = 100;\r\n    }\r\n    this.height = height;\r\n    if (height === void 0) {\r\n      this.height = 50;\r\n    }\r\n    this.keepAspect = keepAspect;\r\n    if (keepAspect === void 0) {\r\n      this.keepAspect = true;\r\n    }\r\n    this.touchRadius = touchRadius;\r\n    if (touchRadius === void 0) {\r\n      this.touchRadius = 20;\r\n    }\r\n    this.minWidth = minWidth;\r\n    this.minHeight = minHeight;\r\n    this.aspectRatio = 0;\r\n    this.currentDragTouches = [];\r\n    this.isMouseDown = false;\r\n    this.ratioW = 1;\r\n    this.ratioH = 1;\r\n    this.fileType = cropperSettings.fileType;\r\n    this.imageSet = false;\r\n    this.pointPool = new PointPool(200);\r\n\r\n    this.tl = new CornerMarker(x, y, touchRadius, this.cropperSettings);\r\n    this.tr = new CornerMarker(x + width, y, touchRadius, this.cropperSettings);\r\n    this.bl = new CornerMarker(\r\n      x,\r\n      y + height,\r\n      touchRadius,\r\n      this.cropperSettings\r\n    );\r\n    this.br = new CornerMarker(\r\n      x + width,\r\n      y + height,\r\n      touchRadius,\r\n      this.cropperSettings\r\n    );\r\n\r\n    this.tl.addHorizontalNeighbour(this.tr);\r\n    this.tl.addVerticalNeighbour(this.bl);\r\n    this.tr.addHorizontalNeighbour(this.tl);\r\n    this.tr.addVerticalNeighbour(this.br);\r\n    this.bl.addHorizontalNeighbour(this.br);\r\n    this.bl.addVerticalNeighbour(this.tl);\r\n    this.br.addHorizontalNeighbour(this.bl);\r\n    this.br.addVerticalNeighbour(this.tr);\r\n    this.markers = [this.tl, this.tr, this.bl, this.br];\r\n\r\n    this.center = new DragMarker(\r\n      x + width / 2,\r\n      y + height / 2,\r\n      centerTouchRadius,\r\n      this.cropperSettings\r\n    );\r\n    this.aspectRatio = height / width;\r\n    this.croppedImage = new Image();\r\n    this.currentlyInteracting = false;\r\n    this.cropWidth = croppedWidth;\r\n    this.cropHeight = croppedHeight;\r\n  }\r\n\r\n  private sign(x: number): number {\r\n    if (+x === x) {\r\n      return x === 0 ? x : x > 0 ? 1 : -1;\r\n    }\r\n    return NaN;\r\n  }\r\n\r\n  private getMousePos(canvas: HTMLCanvasElement, evt: MouseEvent): Point {\r\n    const rect = canvas.getBoundingClientRect();\r\n    return new PointPool().instance.borrow(\r\n      evt.clientX - rect.left,\r\n      evt.clientY - rect.top\r\n    );\r\n  }\r\n\r\n  private getTouchPos(canvas: HTMLCanvasElement, touch: Touch): Point {\r\n    const rect = canvas.getBoundingClientRect();\r\n    return new PointPool().instance.borrow(\r\n      touch.clientX - rect.left,\r\n      touch.clientY - rect.top\r\n    );\r\n  }\r\n\r\n  private detectVerticalSquash(\r\n    img: HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\r\n  ) {\r\n    const ih = img.height;\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = ih;\r\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n    ctx.drawImage(img, 0, 0);\r\n    const imageData: any = ctx.getImageData(0, 0, 1, ih);\r\n    if (imageData) {\r\n      const data = imageData.data;\r\n      // search image edge pixel position in case it is squashed vertically.\r\n      let sy = 0;\r\n      let ey = ih;\r\n      let py = ih;\r\n      while (py > sy) {\r\n        const alpha = data[(py - 1) * 4 + 3];\r\n        if (alpha === 0) {\r\n          ey = py;\r\n        } else {\r\n          sy = py;\r\n        }\r\n        // tslint:disable-next-line:no-bitwise\r\n        py = (ey + sy) >> 1;\r\n      }\r\n      const ratio = py / ih;\r\n      return ratio === 0 ? 1 : ratio;\r\n    } else {\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  private getDataUriMimeType(dataUri: string) {\r\n    // Get a substring because the regex does not perform well on very large strings.\r\n    // Cater for optional charset. Length 50 shoould be enough.\r\n    const dataUriSubstring = dataUri.substring(0, 50);\r\n    let mimeType = 'image/png';\r\n    // data-uri scheme\r\n    // data:[<media type>][;charset=<character set>][;base64],<data>\r\n    const regEx = RegExp(\r\n      /^(data:)([\\w\\/\\+]+);(charset=[\\w-]+|base64).*,(.*)/gi\r\n    );\r\n    const matches = regEx.exec(dataUriSubstring);\r\n    if (matches && matches[2]) {\r\n      mimeType = matches[2];\r\n      if (mimeType === 'image/jpg') {\r\n        mimeType = 'image/jpeg';\r\n      }\r\n    }\r\n    return mimeType;\r\n  }\r\n\r\n  public prepare(canvas: HTMLCanvasElement) {\r\n    this.buffer = document.createElement('canvas');\r\n    this.cropCanvas = document.createElement('canvas');\r\n\r\n    // todo get more reliable parent width value.\r\n    const responsiveWidth: number = canvas.parentElement\r\n      ? canvas.parentElement.clientWidth\r\n      : 0;\r\n    if (responsiveWidth > 0 && this.cropperSettings.dynamicSizing) {\r\n      this.cropCanvas.width = responsiveWidth;\r\n      this.buffer.width = responsiveWidth;\r\n      canvas.width = responsiveWidth;\r\n    } else {\r\n      this.cropCanvas.width = this.cropWidth;\r\n      this.buffer.width = canvas.width;\r\n    }\r\n\r\n    this.cropCanvas.height = this.cropHeight;\r\n    this.buffer.height = canvas.height;\r\n    this.canvas = canvas;\r\n    this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n    this.draw(this.ctx);\r\n  }\r\n\r\n  public updateSettings(cropperSettings: CropperSettings) {\r\n    this.cropperSettings = cropperSettings;\r\n  }\r\n\r\n  public resizeCanvas(\r\n    width: number,\r\n    height: number,\r\n    setImage: boolean = false\r\n  ): void {\r\n    this.canvas.width = this.cropCanvas.width = this.width = this.canvasWidth = this.buffer.width = width;\r\n    this.canvas.height = this.cropCanvas.height = this.height = this.canvasHeight = this.buffer.height = height;\r\n    if (setImage) {\r\n      this.setImage(this.srcImage);\r\n    }\r\n  }\r\n\r\n  public reset(): void {\r\n    this.setImage(undefined);\r\n  }\r\n\r\n  public draw(ctx: CanvasRenderingContext2D): void {\r\n    const bounds: Bounds = this.getBounds();\r\n    if (this.srcImage) {\r\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      const sourceAspect: number = this.srcImage.height / this.srcImage.width;\r\n      const canvasAspect: number = this.canvasHeight / this.canvasWidth;\r\n      let w: number = this.canvasWidth;\r\n      let h: number = this.canvasHeight;\r\n      if (canvasAspect > sourceAspect) {\r\n        w = this.canvasWidth;\r\n        h = this.canvasWidth * sourceAspect;\r\n      } else {\r\n        h = this.canvasHeight;\r\n        w = this.canvasHeight / sourceAspect;\r\n      }\r\n      this.ratioW = w / this.srcImage.width;\r\n      this.ratioH = h / this.srcImage.height;\r\n      if (canvasAspect < sourceAspect) {\r\n        this.drawImageIOSFix(\r\n          ctx,\r\n          this.srcImage,\r\n          0,\r\n          0,\r\n          this.srcImage.width,\r\n          this.srcImage.height,\r\n          this.buffer.width / 2 - w / 2,\r\n          0,\r\n          w,\r\n          h\r\n        );\r\n      } else {\r\n        this.drawImageIOSFix(\r\n          ctx,\r\n          this.srcImage,\r\n          0,\r\n          0,\r\n          this.srcImage.width,\r\n          this.srcImage.height,\r\n          0,\r\n          this.buffer.height / 2 - h / 2,\r\n          w,\r\n          h\r\n        );\r\n      }\r\n      (this.buffer.getContext('2d') as CanvasRenderingContext2D).drawImage(\r\n        this.canvas,\r\n        0,\r\n        0,\r\n        this.canvasWidth,\r\n        this.canvasHeight\r\n      );\r\n\r\n      ctx.lineWidth = this.cropperSettings.cropperDrawSettings.strokeWidth;\r\n      ctx.strokeStyle = this.cropperSettings.cropperDrawSettings.strokeColor;\r\n\r\n      ctx.fillStyle = this.cropperSettings.cropperDrawSettings.backgroundFillColor;\r\n      if (!this.cropperSettings.rounded) {\r\n        ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n        ctx.drawImage(\r\n          this.buffer,\r\n          bounds.left,\r\n          bounds.top,\r\n          Math.max(bounds.width, 1),\r\n          Math.max(bounds.height, 1),\r\n          bounds.left,\r\n          bounds.top,\r\n          bounds.width,\r\n          bounds.height\r\n        );\r\n        ctx.strokeRect(bounds.left, bounds.top, bounds.width, bounds.height);\r\n      } else {\r\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.arc(\r\n          bounds.left + bounds.width / 2,\r\n          bounds.top + bounds.height / 2,\r\n          bounds.width / 2,\r\n          0,\r\n          2 * Math.PI\r\n        );\r\n        ctx.stroke();\r\n        ctx.clip();\r\n        if (canvasAspect < sourceAspect) {\r\n          this.drawImageIOSFix(\r\n            ctx,\r\n            this.srcImage,\r\n            0,\r\n            0,\r\n            this.srcImage.width,\r\n            this.srcImage.height,\r\n            this.buffer.width / 2 - w / 2,\r\n            0,\r\n            w,\r\n            h\r\n          );\r\n        } else {\r\n          this.drawImageIOSFix(\r\n            ctx,\r\n            this.srcImage,\r\n            0,\r\n            0,\r\n            this.srcImage.width,\r\n            this.srcImage.height,\r\n            0,\r\n            this.buffer.height / 2 - h / 2,\r\n            w,\r\n            h\r\n          );\r\n        }\r\n        ctx.restore();\r\n      }\r\n\r\n      let marker: CornerMarker;\r\n\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < this.markers.length; i++) {\r\n        marker = this.markers[i];\r\n        marker.draw(ctx);\r\n      }\r\n      this.center.draw(ctx);\r\n    } else {\r\n      ctx.fillStyle = 'rgba(192,192,192,1)';\r\n      ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n  }\r\n\r\n  public dragCenter(x: number, y: number, marker: DragMarker) {\r\n    const bounds = this.getBounds();\r\n    const left = x - bounds.width / 2;\r\n    const right = x + bounds.width / 2;\r\n    const top = y - bounds.height / 2;\r\n    const bottom = y + bounds.height / 2;\r\n    if (right >= this.maxXClamp) {\r\n      x = this.maxXClamp - bounds.width / 2;\r\n    }\r\n    if (left <= this.minXClamp) {\r\n      x = bounds.width / 2 + this.minXClamp;\r\n    }\r\n    if (top < this.minYClamp) {\r\n      y = bounds.height / 2 + this.minYClamp;\r\n    }\r\n    if (bottom >= this.maxYClamp) {\r\n      y = this.maxYClamp - bounds.height / 2;\r\n    }\r\n    this.tl.moveX(x - bounds.width / 2);\r\n    this.tl.moveY(y - bounds.height / 2);\r\n    this.tr.moveX(x + bounds.width / 2);\r\n    this.tr.moveY(y - bounds.height / 2);\r\n    this.bl.moveX(x - bounds.width / 2);\r\n    this.bl.moveY(y + bounds.height / 2);\r\n    this.br.moveX(x + bounds.width / 2);\r\n    this.br.moveY(y + bounds.height / 2);\r\n    marker.setPosition(x, y);\r\n  }\r\n\r\n  public enforceMinSize(x: number, y: number, marker: CornerMarker) {\r\n    const xLength = x - marker.getHorizontalNeighbour().position.x;\r\n    const yLength = y - marker.getVerticalNeighbour().position.y;\r\n    const xOver = this.minWidth - Math.abs(xLength);\r\n    const yOver = this.minHeight - Math.abs(yLength);\r\n\r\n    if (xLength === 0 || yLength === 0) {\r\n      x = marker.position.x;\r\n      y = marker.position.y;\r\n\r\n      return new PointPool().instance.borrow(x, y);\r\n    }\r\n\r\n    if (this.keepAspect) {\r\n      if (xOver > 0 && yOver / this.aspectRatio > 0) {\r\n        if (xOver > yOver / this.aspectRatio) {\r\n          if (xLength < 0) {\r\n            x -= xOver;\r\n\r\n            if (yLength < 0) {\r\n              y -= xOver * this.aspectRatio;\r\n            } else {\r\n              y += xOver * this.aspectRatio;\r\n            }\r\n          } else {\r\n            x += xOver;\r\n            if (yLength < 0) {\r\n              y -= xOver * this.aspectRatio;\r\n            } else {\r\n              y += xOver * this.aspectRatio;\r\n            }\r\n          }\r\n        } else {\r\n          if (yLength < 0) {\r\n            y -= yOver;\r\n\r\n            if (xLength < 0) {\r\n              x -= yOver / this.aspectRatio;\r\n            } else {\r\n              x += yOver / this.aspectRatio;\r\n            }\r\n          } else {\r\n            y += yOver;\r\n            if (xLength < 0) {\r\n              x -= yOver / this.aspectRatio;\r\n            } else {\r\n              x += yOver / this.aspectRatio;\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (xOver > 0) {\r\n          if (xLength < 0) {\r\n            x -= xOver;\r\n            if (yLength < 0) {\r\n              y -= xOver * this.aspectRatio;\r\n            } else {\r\n              y += xOver * this.aspectRatio;\r\n            }\r\n          } else {\r\n            x += xOver;\r\n            if (yLength < 0) {\r\n              y -= xOver * this.aspectRatio;\r\n            } else {\r\n              y += xOver * this.aspectRatio;\r\n            }\r\n          }\r\n        } else {\r\n          if (yOver > 0) {\r\n            if (yLength < 0) {\r\n              y -= yOver;\r\n\r\n              if (xLength < 0) {\r\n                x -= yOver / this.aspectRatio;\r\n              } else {\r\n                x += yOver / this.aspectRatio;\r\n              }\r\n            } else {\r\n              y += yOver;\r\n              if (xLength < 0) {\r\n                x -= yOver / this.aspectRatio;\r\n              } else {\r\n                x += yOver / this.aspectRatio;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (xOver > 0) {\r\n        if (xLength < 0) {\r\n          x -= xOver;\r\n        } else {\r\n          x += xOver;\r\n        }\r\n      }\r\n      if (yOver > 0) {\r\n        if (yLength < 0) {\r\n          y -= yOver;\r\n        } else {\r\n          y += yOver;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (\r\n      x < this.minXClamp ||\r\n      x > this.maxXClamp ||\r\n      y < this.minYClamp ||\r\n      y > this.maxYClamp\r\n    ) {\r\n      x = marker.position.x;\r\n      y = marker.position.y;\r\n    }\r\n\r\n    return new PointPool().instance.borrow(x, y);\r\n  }\r\n\r\n  public dragCorner(x: number, y: number, marker: CornerMarker) {\r\n    let iX = 0;\r\n    let iY = 0;\r\n    let ax = 0;\r\n    let ay = 0;\r\n    let newHeight = 0;\r\n    let newWidth = 0;\r\n    let newY = 0;\r\n    let newX = 0;\r\n    let anchorMarker: CornerMarker;\r\n    let fold = 0;\r\n\r\n    if (this.keepAspect) {\r\n      anchorMarker = marker.getHorizontalNeighbour().getVerticalNeighbour();\r\n      ax = anchorMarker.position.x;\r\n      ay = anchorMarker.position.y;\r\n      if (x <= anchorMarker.position.x) {\r\n        if (y <= anchorMarker.position.y) {\r\n          iX = ax - 100 / this.aspectRatio;\r\n          iY = ay - (100 / this.aspectRatio) * this.aspectRatio;\r\n          fold = this.getSide(\r\n            new PointPool().instance.borrow(iX, iY),\r\n            anchorMarker.position,\r\n            new PointPool().instance.borrow(x, y)\r\n          );\r\n          if (fold > 0) {\r\n            newHeight = Math.abs(anchorMarker.position.y - y);\r\n            newWidth = newHeight / this.aspectRatio;\r\n            newY = anchorMarker.position.y - newHeight;\r\n            newX = anchorMarker.position.x - newWidth;\r\n            const min = this.enforceMinSize(newX, newY, marker);\r\n            marker.move(min.x, min.y);\r\n            new PointPool().instance.returnPoint(min);\r\n          } else {\r\n            if (fold < 0) {\r\n              newWidth = Math.abs(anchorMarker.position.x - x);\r\n              newHeight = newWidth * this.aspectRatio;\r\n              newY = anchorMarker.position.y - newHeight;\r\n              newX = anchorMarker.position.x - newWidth;\r\n              const min = this.enforceMinSize(newX, newY, marker);\r\n              marker.move(min.x, min.y);\r\n              new PointPool().instance.returnPoint(min);\r\n            }\r\n          }\r\n        } else {\r\n          iX = ax - 100 / this.aspectRatio;\r\n          iY = ay + (100 / this.aspectRatio) * this.aspectRatio;\r\n          fold = this.getSide(\r\n            new PointPool().instance.borrow(iX, iY),\r\n            anchorMarker.position,\r\n            new PointPool().instance.borrow(x, y)\r\n          );\r\n          if (fold > 0) {\r\n            newWidth = Math.abs(anchorMarker.position.x - x);\r\n            newHeight = newWidth * this.aspectRatio;\r\n            newY = anchorMarker.position.y + newHeight;\r\n            newX = anchorMarker.position.x - newWidth;\r\n            const min = this.enforceMinSize(newX, newY, marker);\r\n            marker.move(min.x, min.y);\r\n            new PointPool().instance.returnPoint(min);\r\n          } else {\r\n            if (fold < 0) {\r\n              newHeight = Math.abs(anchorMarker.position.y - y);\r\n              newWidth = newHeight / this.aspectRatio;\r\n              newY = anchorMarker.position.y + newHeight;\r\n              newX = anchorMarker.position.x - newWidth;\r\n              const min = this.enforceMinSize(newX, newY, marker);\r\n              marker.move(min.x, min.y);\r\n              new PointPool().instance.returnPoint(min);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (y <= anchorMarker.position.y) {\r\n          iX = ax + 100 / this.aspectRatio;\r\n          iY = ay - (100 / this.aspectRatio) * this.aspectRatio;\r\n          fold = this.getSide(\r\n            new PointPool().instance.borrow(iX, iY),\r\n            anchorMarker.position,\r\n            new PointPool().instance.borrow(x, y)\r\n          );\r\n          if (fold < 0) {\r\n            newHeight = Math.abs(anchorMarker.position.y - y);\r\n            newWidth = newHeight / this.aspectRatio;\r\n            newY = anchorMarker.position.y - newHeight;\r\n            newX = anchorMarker.position.x + newWidth;\r\n            const min = this.enforceMinSize(newX, newY, marker);\r\n            marker.move(min.x, min.y);\r\n            new PointPool().instance.returnPoint(min);\r\n          } else {\r\n            if (fold > 0) {\r\n              newWidth = Math.abs(anchorMarker.position.x - x);\r\n              newHeight = newWidth * this.aspectRatio;\r\n              newY = anchorMarker.position.y - newHeight;\r\n              newX = anchorMarker.position.x + newWidth;\r\n              const min = this.enforceMinSize(newX, newY, marker);\r\n              marker.move(min.x, min.y);\r\n              new PointPool().instance.returnPoint(min);\r\n            }\r\n          }\r\n        } else {\r\n          iX = ax + 100 / this.aspectRatio;\r\n          iY = ay + (100 / this.aspectRatio) * this.aspectRatio;\r\n          fold = this.getSide(\r\n            new PointPool().instance.borrow(iX, iY),\r\n            anchorMarker.position,\r\n            new PointPool().instance.borrow(x, y)\r\n          );\r\n          if (fold < 0) {\r\n            newWidth = Math.abs(anchorMarker.position.x - x);\r\n            newHeight = newWidth * this.aspectRatio;\r\n            newY = anchorMarker.position.y + newHeight;\r\n            newX = anchorMarker.position.x + newWidth;\r\n            const min = this.enforceMinSize(newX, newY, marker);\r\n            marker.move(min.x, min.y);\r\n            new PointPool().instance.returnPoint(min);\r\n          } else {\r\n            if (fold > 0) {\r\n              newHeight = Math.abs(anchorMarker.position.y - y);\r\n              newWidth = newHeight / this.aspectRatio;\r\n              newY = anchorMarker.position.y + newHeight;\r\n              newX = anchorMarker.position.x + newWidth;\r\n              const min = this.enforceMinSize(newX, newY, marker);\r\n              marker.move(min.x, min.y);\r\n              new PointPool().instance.returnPoint(min);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      const min = this.enforceMinSize(x, y, marker);\r\n      marker.move(min.x, min.y);\r\n      new PointPool().instance.returnPoint(min);\r\n    }\r\n    this.center.recalculatePosition(this.getBounds());\r\n  }\r\n\r\n  public getSide(a: Point, b: Point, c: Point): number {\r\n    const n: number = this.sign(\r\n      (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)\r\n    );\r\n\r\n    // TODO move the return of the pools to outside of this function\r\n    new PointPool().instance.returnPoint(a);\r\n    new PointPool().instance.returnPoint(c);\r\n    return n;\r\n  }\r\n\r\n  public handleRelease(newCropTouch: CropTouch) {\r\n    if (newCropTouch == null) {\r\n      return;\r\n    }\r\n    let index = 0;\r\n    for (let k = 0; k < this.currentDragTouches.length; k++) {\r\n      if (newCropTouch.id === this.currentDragTouches[k].id) {\r\n        this.currentDragTouches[k].dragHandle.setDrag(false);\r\n        index = k;\r\n      }\r\n    }\r\n    this.currentDragTouches.splice(index, 1);\r\n    this.draw(this.ctx);\r\n  }\r\n\r\n  public handleMove(newCropTouch: CropTouch) {\r\n    let matched = false;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let k = 0; k < this.currentDragTouches.length; k++) {\r\n      if (\r\n        newCropTouch.id === this.currentDragTouches[k].id &&\r\n        this.currentDragTouches[k].dragHandle != null\r\n      ) {\r\n        const dragTouch: CropTouch = this.currentDragTouches[k];\r\n        const clampedPositions = this.clampPosition(\r\n          newCropTouch.x - dragTouch.dragHandle.offset.x,\r\n          newCropTouch.y - dragTouch.dragHandle.offset.y\r\n        );\r\n        newCropTouch.x = clampedPositions.x;\r\n        newCropTouch.y = clampedPositions.y;\r\n        new PointPool().instance.returnPoint(clampedPositions);\r\n        if (dragTouch.dragHandle instanceof CornerMarker) {\r\n          this.dragCorner(\r\n            newCropTouch.x,\r\n            newCropTouch.y,\r\n            dragTouch.dragHandle as CornerMarker\r\n          );\r\n        } else {\r\n          this.dragCenter(\r\n            newCropTouch.x,\r\n            newCropTouch.y,\r\n            dragTouch.dragHandle as DragMarker\r\n          );\r\n        }\r\n        this.currentlyInteracting = true;\r\n        matched = true;\r\n        this.imageCropperDataShare.setPressed(this.canvas);\r\n        break;\r\n      }\r\n    }\r\n    if (!matched) {\r\n      for (const marker of this.markers) {\r\n        if (marker.touchInBounds(newCropTouch.x, newCropTouch.y)) {\r\n          newCropTouch.dragHandle = marker;\r\n          this.currentDragTouches.push(newCropTouch);\r\n          marker.setDrag(true);\r\n          newCropTouch.dragHandle.offset.x =\r\n            newCropTouch.x - newCropTouch.dragHandle.position.x;\r\n          newCropTouch.dragHandle.offset.y =\r\n            newCropTouch.y - newCropTouch.dragHandle.position.y;\r\n          this.dragCorner(\r\n            newCropTouch.x - newCropTouch.dragHandle.offset.x,\r\n            newCropTouch.y - newCropTouch.dragHandle.offset.y,\r\n            newCropTouch.dragHandle as CornerMarker\r\n          );\r\n          break;\r\n        }\r\n      }\r\n      if (\r\n        newCropTouch.dragHandle === null ||\r\n        typeof newCropTouch.dragHandle === 'undefined'\r\n      ) {\r\n        if (this.center.touchInBounds(newCropTouch.x, newCropTouch.y)) {\r\n          newCropTouch.dragHandle = this.center;\r\n          this.currentDragTouches.push(newCropTouch);\r\n          newCropTouch.dragHandle.setDrag(true);\r\n          newCropTouch.dragHandle.offset.x =\r\n            newCropTouch.x - newCropTouch.dragHandle.position.x;\r\n          newCropTouch.dragHandle.offset.y =\r\n            newCropTouch.y - newCropTouch.dragHandle.position.y;\r\n          this.dragCenter(\r\n            newCropTouch.x - newCropTouch.dragHandle.offset.x,\r\n            newCropTouch.y - newCropTouch.dragHandle.offset.y,\r\n            newCropTouch.dragHandle as DragMarker\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public updateClampBounds() {\r\n    const sourceAspect = this.srcImage.height / this.srcImage.width;\r\n    const canvasAspect = this.canvas.height / this.canvas.width;\r\n    let w = this.canvas.width;\r\n    let h = this.canvas.height;\r\n    if (canvasAspect > sourceAspect) {\r\n      w = this.canvas.width;\r\n      h = this.canvas.width * sourceAspect;\r\n    } else {\r\n      h = this.canvas.height;\r\n      w = this.canvas.height / sourceAspect;\r\n    }\r\n    this.minXClamp = this.canvas.width / 2 - w / 2;\r\n    this.minYClamp = this.canvas.height / 2 - h / 2;\r\n    this.maxXClamp = this.canvas.width / 2 + w / 2;\r\n    this.maxYClamp = this.canvas.height / 2 + h / 2;\r\n  }\r\n\r\n  public getCropBounds() {\r\n    const bounds = this.getBounds();\r\n    bounds.top = Math.round((bounds.top - this.minYClamp) / this.ratioH);\r\n    bounds.bottom = Math.round((bounds.bottom - this.minYClamp) / this.ratioH);\r\n    bounds.left = Math.round((bounds.left - this.minXClamp) / this.ratioW);\r\n    bounds.right = Math.round((bounds.right - this.minXClamp) / this.ratioW);\r\n    return bounds;\r\n  }\r\n\r\n  public clampPosition(x: number, y: number) {\r\n    if (x < this.minXClamp) {\r\n      x = this.minXClamp;\r\n    }\r\n    if (x > this.maxXClamp) {\r\n      x = this.maxXClamp;\r\n    }\r\n    if (y < this.minYClamp) {\r\n      y = this.minYClamp;\r\n    }\r\n    if (y > this.maxYClamp) {\r\n      y = this.maxYClamp;\r\n    }\r\n    return new PointPool().instance.borrow(x, y);\r\n  }\r\n\r\n  public isImageSet() {\r\n    return this.imageSet;\r\n  }\r\n\r\n  public setImage(img: any) {\r\n    this.srcImage = img;\r\n    if (!img) {\r\n      this.imageSet = false;\r\n      this.draw(this.ctx);\r\n    } else {\r\n      this.imageSet = true;\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n      const bufferContext = this.buffer.getContext(\r\n        '2d'\r\n      ) as CanvasRenderingContext2D;\r\n      bufferContext.clearRect(0, 0, this.buffer.width, this.buffer.height);\r\n\r\n      if (!this.cropperSettings.fileType) {\r\n        this.fileType = this.getDataUriMimeType(img.src);\r\n      }\r\n\r\n      if (this.cropperSettings.minWithRelativeToResolution) {\r\n        this.minWidth =\r\n          (this.canvas.width * this.cropperSettings.minWidth) /\r\n          this.srcImage.width;\r\n        this.minHeight =\r\n          (this.canvas.height * this.cropperSettings.minHeight) /\r\n          this.srcImage.height;\r\n      }\r\n\r\n      this.updateClampBounds();\r\n      this.canvasWidth = this.canvas.width;\r\n      this.canvasHeight = this.canvas.height;\r\n\r\n      const cropPosition: Point[] = this.getCropPositionFromMarkers();\r\n      this.setCropPosition(cropPosition);\r\n    }\r\n  }\r\n\r\n  public updateCropPosition(cropBounds: Bounds): void {\r\n    const cropPosition: Point[] = this.getCropPositionFromBounds(cropBounds);\r\n    this.setCropPosition(cropPosition);\r\n  }\r\n\r\n  private setCropPosition(cropPosition: Point[]): void {\r\n    this.tl.setPosition(cropPosition[0].x, cropPosition[0].y);\r\n    this.tr.setPosition(cropPosition[1].x, cropPosition[1].y);\r\n    this.bl.setPosition(cropPosition[2].x, cropPosition[2].y);\r\n    this.br.setPosition(cropPosition[3].x, cropPosition[3].y);\r\n    this.center.setPosition(cropPosition[4].x, cropPosition[4].y);\r\n\r\n    for (const position of cropPosition) {\r\n      new PointPool().instance.returnPoint(position);\r\n    }\r\n\r\n    this.vertSquashRatio = this.detectVerticalSquash(this.srcImage);\r\n    this.draw(this.ctx);\r\n    this.croppedImage = this.getCroppedImageHelper(\r\n      false,\r\n      this.cropWidth,\r\n      this.cropHeight\r\n    );\r\n  }\r\n\r\n  private getCropPositionFromMarkers(): Point[] {\r\n    const w: number = this.canvas.width;\r\n    const h: number = this.canvas.height;\r\n    let tlPos: Point;\r\n    let trPos: Point;\r\n    let blPos: Point;\r\n    let brPos: Point;\r\n    let center: Point;\r\n    const sourceAspect: number = this.srcImage.height / this.srcImage.width;\r\n    const cropBounds: Bounds = this.getBounds();\r\n    const cropAspect: number = cropBounds.height / cropBounds.width;\r\n    const cX: number = this.canvas.width / 2;\r\n    const cY: number = this.canvas.height / 2;\r\n\r\n    if (cropAspect > sourceAspect) {\r\n      const imageH = Math.min(w * sourceAspect, h);\r\n      const cropW = imageH / cropAspect;\r\n      tlPos = new PointPool().instance.borrow(cX - cropW / 2, cY + imageH / 2);\r\n      trPos = new PointPool().instance.borrow(cX + cropW / 2, cY + imageH / 2);\r\n      blPos = new PointPool().instance.borrow(cX - cropW / 2, cY - imageH / 2);\r\n      brPos = new PointPool().instance.borrow(cX + cropW / 2, cY - imageH / 2);\r\n    } else {\r\n      const imageW = Math.min(h / sourceAspect, w);\r\n      const cropH = imageW * cropAspect;\r\n      tlPos = new PointPool().instance.borrow(cX - imageW / 2, cY + cropH / 2);\r\n      trPos = new PointPool().instance.borrow(cX + imageW / 2, cY + cropH / 2);\r\n      blPos = new PointPool().instance.borrow(cX - imageW / 2, cY - cropH / 2);\r\n      brPos = new PointPool().instance.borrow(cX + imageW / 2, cY - cropH / 2);\r\n    }\r\n\r\n    center = new PointPool().instance.borrow(cX, cY);\r\n    const positions: Point[] = [tlPos, trPos, blPos, brPos, center];\r\n    return positions;\r\n  }\r\n\r\n  private getCropPositionFromBounds(cropPosition: Bounds): Point[] {\r\n    let marginTop = 0;\r\n    let marginLeft = 0;\r\n    const canvasAspect: number = this.canvasHeight / this.canvasWidth;\r\n    const sourceAspect: number = this.srcImage.height / this.srcImage.width;\r\n\r\n    if (canvasAspect > sourceAspect) {\r\n      marginTop =\r\n        this.buffer.height / 2 - (this.canvasWidth * sourceAspect) / 2;\r\n    } else {\r\n      marginLeft = this.buffer.width / 2 - this.canvasHeight / sourceAspect / 2;\r\n    }\r\n\r\n    const ratioW: number =\r\n      (this.canvasWidth - marginLeft * 2) / this.srcImage.width;\r\n    const ratioH: number =\r\n      (this.canvasHeight - marginTop * 2) / this.srcImage.height;\r\n\r\n    let actualH: number = cropPosition.height * ratioH;\r\n    let actualW: number = cropPosition.width * ratioW;\r\n    const actualX: number = cropPosition.left * ratioW + marginLeft;\r\n    const actualY: number = cropPosition.top * ratioH + marginTop;\r\n\r\n    if (this.keepAspect) {\r\n      const scaledW: number = actualH / this.aspectRatio;\r\n      const scaledH: number = actualW * this.aspectRatio;\r\n\r\n      if (this.getCropBounds().height === cropPosition.height) {\r\n        // only width changed\r\n        actualH = scaledH;\r\n      } else if (this.getCropBounds().width === cropPosition.width) {\r\n        // only height changed\r\n        actualW = scaledW;\r\n      } else {\r\n        // height and width changed\r\n        if (Math.abs(scaledH - actualH) < Math.abs(scaledW - actualW)) {\r\n          actualW = scaledW;\r\n        } else {\r\n          actualH = scaledH;\r\n        }\r\n      }\r\n    }\r\n\r\n    const tlPos: Point = new PointPool().instance.borrow(\r\n      actualX,\r\n      actualY + actualH\r\n    );\r\n    const trPos: Point = new PointPool().instance.borrow(\r\n      actualX + actualW,\r\n      actualY + actualH\r\n    );\r\n    const blPos: Point = new PointPool().instance.borrow(actualX, actualY);\r\n    const brPos: Point = new PointPool().instance.borrow(\r\n      actualX + actualW,\r\n      actualY\r\n    );\r\n    const center: Point = new PointPool().instance.borrow(\r\n      actualX + actualW / 2,\r\n      actualY + actualH / 2\r\n    );\r\n\r\n    const positions: Point[] = [tlPos, trPos, blPos, brPos, center];\r\n    return positions;\r\n  }\r\n\r\n  public getCroppedImageHelper(\r\n    preserveSize?: boolean,\r\n    fillWidth?: number,\r\n    fillHeight?: number\r\n  ): HTMLImageElement {\r\n    if (this.cropperSettings.cropOnResize) {\r\n      return this.getCroppedImage(preserveSize, fillWidth, fillHeight);\r\n    }\r\n    return this.croppedImage\r\n      ? this.croppedImage\r\n      : document.createElement('img');\r\n  }\r\n\r\n  // todo: Unused parameters?\r\n  public getCroppedImage(\r\n    preserveSize?: boolean,\r\n    fillWidth?: number,\r\n    fillHeight?: number\r\n  ): HTMLImageElement {\r\n    const bounds: Bounds = this.getBounds();\r\n    if (!this.srcImage) {\r\n      return document.createElement('img');\r\n    } else {\r\n      const sourceAspect: number = this.srcImage.height / this.srcImage.width;\r\n      const canvasAspect: number = this.canvas.height / this.canvas.width;\r\n      let w: number = this.canvas.width;\r\n      let h: number = this.canvas.height;\r\n      if (canvasAspect > sourceAspect) {\r\n        w = this.canvas.width;\r\n        h = this.canvas.width * sourceAspect;\r\n      } else {\r\n        if (canvasAspect < sourceAspect) {\r\n          h = this.canvas.height;\r\n          w = this.canvas.height / sourceAspect;\r\n        } else {\r\n          h = this.canvas.height;\r\n          w = this.canvas.width;\r\n        }\r\n      }\r\n      this.ratioW = w / this.srcImage.width;\r\n      this.ratioH = h / this.srcImage.height;\r\n      const offsetH: number = (this.buffer.height - h) / 2 / this.ratioH;\r\n      const offsetW: number = (this.buffer.width - w) / 2 / this.ratioW;\r\n\r\n      const ctx = this.cropCanvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n      if (this.cropperSettings.preserveSize || preserveSize) {\r\n        const width = Math.round(\r\n          bounds.right / this.ratioW - bounds.left / this.ratioW\r\n        );\r\n        const height = Math.round(\r\n          bounds.bottom / this.ratioH - bounds.top / this.ratioH\r\n        );\r\n\r\n        this.cropCanvas.width = width;\r\n        this.cropCanvas.height = height;\r\n\r\n        this.cropperSettings.croppedWidth = this.cropCanvas.width;\r\n        this.cropperSettings.croppedHeight = this.cropCanvas.height;\r\n      } else {\r\n        this.cropCanvas.width = this.cropWidth;\r\n        this.cropCanvas.height = this.cropHeight;\r\n      }\r\n\r\n      ctx.clearRect(0, 0, this.cropCanvas.width, this.cropCanvas.height);\r\n      this.drawImageIOSFix(\r\n        ctx,\r\n        this.srcImage,\r\n        Math.max(Math.round(bounds.left / this.ratioW - offsetW), 0),\r\n        Math.max(Math.round(bounds.top / this.ratioH - offsetH), 0),\r\n        Math.max(Math.round(bounds.width / this.ratioW), 1),\r\n        Math.max(Math.round(bounds.height / this.ratioH), 1),\r\n        0,\r\n        0,\r\n        this.cropCanvas.width,\r\n        this.cropCanvas.height\r\n      );\r\n\r\n      if (this.cropperSettings.resampleFn) {\r\n        this.cropperSettings.resampleFn(this.cropCanvas);\r\n      }\r\n\r\n      this.croppedImage.width = this.cropCanvas.width;\r\n      this.croppedImage.height = this.cropCanvas.height;\r\n      this.croppedImage.src = this.cropCanvas.toDataURL(\r\n        this.fileType,\r\n        this.cropperSettings.compressRatio\r\n      );\r\n      return this.croppedImage;\r\n    }\r\n  }\r\n\r\n  public getBounds(): Bounds {\r\n    let minX = Number.MAX_VALUE;\r\n    let minY = Number.MAX_VALUE;\r\n    let maxX = -Number.MAX_VALUE;\r\n    let maxY = -Number.MAX_VALUE;\r\n    for (const marker of this.markers) {\r\n      if (marker.position.x < minX) {\r\n        minX = marker.position.x;\r\n      }\r\n      if (marker.position.x > maxX) {\r\n        maxX = marker.position.x;\r\n      }\r\n      if (marker.position.y < minY) {\r\n        minY = marker.position.y;\r\n      }\r\n      if (marker.position.y > maxY) {\r\n        maxY = marker.position.y;\r\n      }\r\n    }\r\n    const bounds: Bounds = new Bounds();\r\n    bounds.left = minX;\r\n    bounds.right = maxX;\r\n    bounds.top = minY;\r\n    bounds.bottom = maxY;\r\n    return bounds;\r\n  }\r\n\r\n  public setBounds(bounds: any) {\r\n    // const topLeft: CornerMarker;\r\n    // const topRight: CornerMarker;\r\n    // const bottomLeft: CornerMarker;\r\n    // const bottomRight: CornerMarker;\r\n\r\n    const currentBounds = this.getBounds();\r\n    for (const marker of this.markers) {\r\n      if (marker.position.x === currentBounds.left) {\r\n        if (marker.position.y === currentBounds.top) {\r\n          marker.setPosition(bounds.left, bounds.top);\r\n        } else {\r\n          marker.setPosition(bounds.left, bounds.bottom);\r\n        }\r\n      } else {\r\n        if (marker.position.y === currentBounds.top) {\r\n          marker.setPosition(bounds.right, bounds.top);\r\n        } else {\r\n          marker.setPosition(bounds.right, bounds.bottom);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.center.recalculatePosition(bounds);\r\n    this.center.draw(this.ctx);\r\n    this.draw(this.ctx); // we need to redraw all canvas if we have changed bounds\r\n  }\r\n\r\n  public onTouchMove(event: TouchEvent) {\r\n    if (this.crop.isImageSet()) {\r\n      if (event.touches.length === 1) {\r\n        if (this.isMouseDown) {\r\n          event.preventDefault();\r\n          // tslint:disable-next-line:prefer-for-of\r\n          for (let i = 0; i < event.touches.length; i++) {\r\n            const touch = event.touches[i];\r\n            const touchPosition = this.getTouchPos(this.canvas, touch);\r\n            const cropTouch = new CropTouch(\r\n              touchPosition.x,\r\n              touchPosition.y,\r\n              touch.identifier\r\n            );\r\n            new PointPool().instance.returnPoint(touchPosition);\r\n            this.move(cropTouch);\r\n          }\r\n        }\r\n      } else {\r\n        if (event.touches.length === 2) {\r\n          event.preventDefault();\r\n\r\n          const distance =\r\n            (event.touches[0].clientX - event.touches[1].clientX) *\r\n              (event.touches[0].clientX - event.touches[1].clientX) +\r\n            (event.touches[0].clientY - event.touches[1].clientY) *\r\n              (event.touches[0].clientY - event.touches[1].clientY);\r\n          if (this.previousDistance && this.previousDistance !== distance) {\r\n            const bounds = this.getBounds();\r\n\r\n            if (distance < this.previousDistance) {\r\n              bounds.top += 1;\r\n              bounds.left += 1;\r\n              bounds.right -= 1;\r\n              bounds.bottom -= 1;\r\n            }\r\n\r\n            if (distance > this.previousDistance) {\r\n              if (\r\n                bounds.top !== this.minYClamp &&\r\n                bounds.bottom !== this.maxYClamp &&\r\n                bounds.left !== this.minXClamp &&\r\n                bounds.right !== this.maxXClamp\r\n              ) {\r\n                // none\r\n                bounds.top -= 1;\r\n                bounds.left -= 1;\r\n                bounds.right += 1;\r\n                bounds.bottom += 1;\r\n              } else if (\r\n                bounds.top !== this.minYClamp &&\r\n                bounds.bottom !== this.maxYClamp &&\r\n                bounds.left === this.minXClamp &&\r\n                bounds.right !== this.maxXClamp\r\n              ) {\r\n                // left\r\n                bounds.top -= 1;\r\n                bounds.right += 2;\r\n                bounds.bottom += 1;\r\n              } else if (\r\n                bounds.top !== this.minYClamp &&\r\n                bounds.bottom !== this.maxYClamp &&\r\n                bounds.left !== this.minXClamp &&\r\n                bounds.right === this.maxXClamp\r\n              ) {\r\n                // right\r\n                bounds.top -= 1;\r\n                bounds.left -= 2;\r\n                bounds.bottom += 1;\r\n              } else if (\r\n                bounds.top === this.minYClamp &&\r\n                bounds.bottom !== this.maxYClamp &&\r\n                bounds.left !== this.minXClamp &&\r\n                bounds.right !== this.maxXClamp\r\n              ) {\r\n                // top\r\n                bounds.left -= 1;\r\n                bounds.right += 1;\r\n                bounds.bottom += 2;\r\n              } else if (\r\n                bounds.top !== this.minYClamp &&\r\n                bounds.bottom === this.maxYClamp &&\r\n                bounds.left !== this.minXClamp &&\r\n                bounds.right !== this.maxXClamp\r\n              ) {\r\n                // bottom\r\n                bounds.top -= 2;\r\n                bounds.left -= 1;\r\n                bounds.right += 1;\r\n              } else if (\r\n                bounds.top === this.minYClamp &&\r\n                bounds.bottom !== this.maxYClamp &&\r\n                bounds.left === this.minXClamp &&\r\n                bounds.right !== this.maxXClamp\r\n              ) {\r\n                // top left\r\n                bounds.right += 2;\r\n                bounds.bottom += 2;\r\n              } else if (\r\n                bounds.top === this.minYClamp &&\r\n                bounds.bottom !== this.maxYClamp &&\r\n                bounds.left !== this.minXClamp &&\r\n                bounds.right === this.maxXClamp\r\n              ) {\r\n                // top right\r\n                bounds.left -= 2;\r\n                bounds.bottom += 2;\r\n              } else if (\r\n                bounds.top !== this.minYClamp &&\r\n                bounds.bottom === this.maxYClamp &&\r\n                bounds.left === this.minXClamp &&\r\n                bounds.right !== this.maxXClamp\r\n              ) {\r\n                // bottom left\r\n                bounds.top -= 2;\r\n                bounds.right += 2;\r\n              } else if (\r\n                bounds.top !== this.minYClamp &&\r\n                bounds.bottom === this.maxYClamp &&\r\n                bounds.left !== this.minXClamp &&\r\n                bounds.right === this.maxXClamp\r\n              ) {\r\n                // bottom right\r\n                bounds.top -= 2;\r\n                bounds.left -= 2;\r\n              }\r\n            }\r\n\r\n            if (bounds.top < this.minYClamp) {\r\n              bounds.top = this.minYClamp;\r\n            }\r\n            if (bounds.bottom > this.maxYClamp) {\r\n              bounds.bottom = this.maxYClamp;\r\n            }\r\n            if (bounds.left < this.minXClamp) {\r\n              bounds.left = this.minXClamp;\r\n            }\r\n            if (bounds.right > this.maxXClamp) {\r\n              bounds.right = this.maxXClamp;\r\n            }\r\n\r\n            this.setBounds(bounds);\r\n          }\r\n          this.previousDistance = distance;\r\n        }\r\n      }\r\n      this.draw(this.ctx);\r\n    }\r\n  }\r\n\r\n  public onMouseMove(e: MouseEvent) {\r\n    if (this.crop.isImageSet() && this.isMouseDown) {\r\n      const mousePosition = this.getMousePos(this.canvas, e);\r\n      this.move(new CropTouch(mousePosition.x, mousePosition.y, 0));\r\n      let dragTouch = this.getDragTouchForID(0);\r\n      if (dragTouch) {\r\n        dragTouch.x = mousePosition.x;\r\n        dragTouch.y = mousePosition.y;\r\n      } else {\r\n        dragTouch = new CropTouch(mousePosition.x, mousePosition.y, 0);\r\n      }\r\n      new PointPool().instance.returnPoint(mousePosition);\r\n      this.drawCursors(dragTouch);\r\n      this.draw(this.ctx);\r\n    }\r\n  }\r\n\r\n  public move(cropTouch: CropTouch) {\r\n    if (this.isMouseDown) {\r\n      this.handleMove(cropTouch);\r\n    }\r\n  }\r\n\r\n  public getDragTouchForID(id: any): CropTouch | undefined {\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let i = 0; i < this.currentDragTouches.length; i++) {\r\n      if (id === this.currentDragTouches[i].id) {\r\n        return this.currentDragTouches[i];\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public drawCursors(cropTouch: CropTouch) {\r\n    let cursorDrawn = false;\r\n    if (cropTouch != null) {\r\n      if (cropTouch.dragHandle === this.center) {\r\n        this.imageCropperDataShare.setStyle(this.canvas, 'move');\r\n        cursorDrawn = true;\r\n      }\r\n      if (\r\n        cropTouch.dragHandle !== null &&\r\n        cropTouch.dragHandle instanceof CornerMarker\r\n      ) {\r\n        this.drawCornerCursor(\r\n          cropTouch.dragHandle,\r\n          cropTouch.dragHandle.position.x,\r\n          cropTouch.dragHandle.position.y\r\n        );\r\n        cursorDrawn = true;\r\n      }\r\n    }\r\n    let didDraw = false;\r\n    if (!cursorDrawn) {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < this.markers.length; i++) {\r\n        didDraw =\r\n          didDraw ||\r\n          this.drawCornerCursor(this.markers[i], cropTouch.x, cropTouch.y);\r\n      }\r\n      if (!didDraw) {\r\n        this.imageCropperDataShare.setStyle(this.canvas, 'initial');\r\n      }\r\n    }\r\n    if (\r\n      !didDraw &&\r\n      !cursorDrawn &&\r\n      this.center.touchInBounds(cropTouch.x, cropTouch.y)\r\n    ) {\r\n      this.center.setOver(true);\r\n      this.imageCropperDataShare.setOver(this.canvas);\r\n      this.imageCropperDataShare.setStyle(this.canvas, 'move');\r\n    } else {\r\n      this.center.setOver(false);\r\n    }\r\n  }\r\n\r\n  public drawCornerCursor(marker: any, x: number, y: number) {\r\n    if (marker.touchInBounds(x, y)) {\r\n      marker.setOver(true);\r\n      if (marker.getHorizontalNeighbour().position.x > marker.position.x) {\r\n        if (marker.getVerticalNeighbour().position.y > marker.position.y) {\r\n          this.imageCropperDataShare.setOver(this.canvas);\r\n          this.imageCropperDataShare.setStyle(this.canvas, 'nwse-resize');\r\n        } else {\r\n          this.imageCropperDataShare.setOver(this.canvas);\r\n          this.imageCropperDataShare.setStyle(this.canvas, 'nesw-resize');\r\n        }\r\n      } else {\r\n        if (marker.getVerticalNeighbour().position.y > marker.position.y) {\r\n          this.imageCropperDataShare.setOver(this.canvas);\r\n          this.imageCropperDataShare.setStyle(this.canvas, 'nesw-resize');\r\n        } else {\r\n          this.imageCropperDataShare.setOver(this.canvas);\r\n          this.imageCropperDataShare.setStyle(this.canvas, 'nwse-resize');\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    marker.setOver(false);\r\n    return false;\r\n  }\r\n\r\n  public onTouchStart(event: TouchEvent) {\r\n    if (this.crop.isImageSet()) {\r\n      const touch = event.touches[0];\r\n      const touchPosition = this.getTouchPos(this.canvas, touch);\r\n      const cropTouch = new CropTouch(\r\n        touchPosition.x,\r\n        touchPosition.y,\r\n        touch.identifier\r\n      );\r\n      new PointPool().instance.returnPoint(touchPosition);\r\n\r\n      this.isMouseDown = false;\r\n      for (const marker of this.markers) {\r\n        if (marker.touchInBounds(cropTouch.x, cropTouch.y)) {\r\n          this.isMouseDown = true;\r\n        }\r\n      }\r\n      if (this.center.touchInBounds(cropTouch.x, cropTouch.y)) {\r\n        this.isMouseDown = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  public onTouchEnd(event: TouchEvent) {\r\n    if (this.crop.isImageSet()) {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < event.changedTouches.length; i++) {\r\n        const touch = event.changedTouches[i];\r\n        const dragTouch = this.getDragTouchForID(touch.identifier);\r\n        if (dragTouch && dragTouch !== undefined) {\r\n          if (\r\n            dragTouch.dragHandle instanceof CornerMarker ||\r\n            dragTouch.dragHandle instanceof DragMarker\r\n          ) {\r\n            dragTouch.dragHandle.setOver(false);\r\n          }\r\n          this.handleRelease(dragTouch);\r\n        }\r\n      }\r\n\r\n      if (this.currentDragTouches.length === 0) {\r\n        this.isMouseDown = false;\r\n        this.currentlyInteracting = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  // http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\r\n  public drawImageIOSFix(\r\n    ctx: CanvasRenderingContext2D,\r\n    img: HTMLImageElement | HTMLCanvasElement | HTMLVideoElement,\r\n    sx: number,\r\n    sy: number,\r\n    sw: number,\r\n    sh: number,\r\n    dx: number,\r\n    dy: number,\r\n    dw: number,\r\n    dh: number\r\n  ) {\r\n    // Works only if whole image is displayed:\r\n    // ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\r\n    // The following works correct also when only a part of the image is displayed:\r\n    // ctx.drawImage(img, sx * this.vertSquashRatio, sy * this.vertSquashRatio, sw * this.vertSquashRatio, sh *\r\n    // this.vertSquashRatio, dx, dy, dw, dh);\r\n    ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);\r\n  }\r\n\r\n  public onMouseDown(event: MouseEvent) {\r\n    if (this.crop.isImageSet()) {\r\n      this.isMouseDown = true;\r\n    }\r\n  }\r\n\r\n  public onMouseUp(event: MouseEvent) {\r\n    if (this.crop.isImageSet()) {\r\n      this.imageCropperDataShare.setReleased(this.canvas);\r\n      this.isMouseDown = false;\r\n      this.handleRelease(new CropTouch(0, 0, 0));\r\n    }\r\n  }\r\n}\r\n","import { Bounds } from './bounds';\r\n\r\nexport class CropPosition {\r\n  public x: number;\r\n  public y: number;\r\n  public w: number;\r\n  public h: number;\r\n\r\n  constructor(x: number = 0, y: number = 0, w: number = 0, h: number = 0) {\r\n    this.x = +x;\r\n    this.y = +y;\r\n    this.w = +w;\r\n    this.h = +h;\r\n  }\r\n\r\n  public toBounds(): Bounds {\r\n    return new Bounds(this.x, this.y, this.w, this.h);\r\n  }\r\n\r\n  public isInitialized(): boolean {\r\n    return this.x !== 0 && this.y !== 0 && this.w !== 0 && this.h !== 0;\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  AfterViewInit,\r\n  OnChanges,\r\n  OnDestroy,\r\n  ViewChild,\r\n  ElementRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  Renderer2,\r\n  SimpleChanges, Inject\r\n} from '@angular/core';\r\nimport { CropperSettings } from './cropper-settings';\r\nimport { ImageCropper } from './imageCropper';\r\nimport { CropPosition } from './model/cropPosition';\r\nimport { Bounds } from './model/bounds';\r\nimport { Exif } from './exif';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\n@Component({\r\n  // tslint:disable-next-line:component-selector\r\n  selector: 'img-cropper',\r\n  templateUrl: './image-cropper.component.html'\r\n})\r\nexport class ImageCropperComponent\r\n  implements AfterViewInit, OnChanges, OnDestroy {\r\n  @ViewChild('cropcanvas', { static: true })\r\n  cropcanvas: ElementRef;\r\n  @ViewChild('fileInput') fileInput: ElementRef;\r\n\r\n  @Input() public settings: CropperSettings;\r\n  @Input() public image: any;\r\n  @Input() public inputImage: any;\r\n  @Input() public cropper: ImageCropper;\r\n  @Input() public cropPosition: CropPosition;\r\n  @Output()\r\n  public cropPositionChange: EventEmitter<CropPosition> = new EventEmitter<\r\n    CropPosition\r\n  >();\r\n\r\n  private exif = new Exif();\r\n\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() public onCrop: EventEmitter<any> = new EventEmitter();\r\n  @Output() imageSet: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n\r\n  public croppedWidth: number;\r\n  public croppedHeight: number;\r\n  public intervalRef: number;\r\n  public raf: number;\r\n  public renderer: Renderer2;\r\n  public windowListener: EventListenerObject;\r\n\r\n  private isCropPositionUpdateNeeded: boolean;\r\n  private dragUnsubscribers: (() => void)[] = [];\r\n\r\n  constructor(renderer: Renderer2,\r\n              @Inject(DOCUMENT) private document) {\r\n    this.renderer = renderer;\r\n  }\r\n\r\n  public ngAfterViewInit(): void {\r\n    const canvas: HTMLCanvasElement = this.cropcanvas.nativeElement;\r\n\r\n    if (!this.settings) {\r\n      this.settings = new CropperSettings();\r\n    }\r\n\r\n    if (this.settings.cropperClass) {\r\n      this.renderer.setAttribute(canvas, 'class', this.settings.cropperClass);\r\n    }\r\n\r\n    if (!this.settings.dynamicSizing) {\r\n      this.renderer.setAttribute(\r\n        canvas,\r\n        'width',\r\n        this.settings.canvasWidth.toString()\r\n      );\r\n      this.renderer.setAttribute(\r\n        canvas,\r\n        'height',\r\n        this.settings.canvasHeight.toString()\r\n      );\r\n    } else {\r\n      this.windowListener = this.resize.bind(this);\r\n      window.addEventListener('resize', this.windowListener);\r\n    }\r\n\r\n    if (!this.cropper) {\r\n      this.cropper = new ImageCropper(this.settings);\r\n    }\r\n\r\n    this.cropper.prepare(canvas);\r\n  }\r\n\r\n  public ngOnChanges(changes: SimpleChanges): void {\r\n    if (this.isCropPositionChanged(changes)) {\r\n      this.cropper.updateCropPosition(this.cropPosition.toBounds());\r\n      if (this.cropper.isImageSet()) {\r\n        const bounds = this.cropper.getCropBounds();\r\n        this.image.image = this.cropper.getCroppedImageHelper().src;\r\n        this.onCrop.emit(bounds);\r\n      }\r\n      this.updateCropBounds();\r\n    }\r\n\r\n    if (changes.inputImage) {\r\n      this.setImage(changes.inputImage.currentValue);\r\n    }\r\n\r\n    if (changes.settings && this.cropper) {\r\n      this.cropper.updateSettings(this.settings);\r\n      if (this.cropper.isImageSet()) {\r\n        this.image.image = this.cropper.getCroppedImageHelper().src;\r\n        this.onCrop.emit(this.cropper.getCropBounds());\r\n      }\r\n    }\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    this.removeDragListeners();\r\n    if (this.settings.dynamicSizing && this.windowListener) {\r\n      window.removeEventListener('resize', this.windowListener);\r\n    }\r\n  }\r\n\r\n  public onTouchMove(event: TouchEvent): void {\r\n    this.cropper.onTouchMove(event);\r\n  }\r\n\r\n  public onTouchStart(event: TouchEvent): void {\r\n    this.cropper.onTouchStart(event);\r\n  }\r\n\r\n  public onTouchEnd(event: TouchEvent): void {\r\n    this.cropper.onTouchEnd(event);\r\n    if (this.cropper.isImageSet()) {\r\n      this.image.image = this.cropper.getCroppedImageHelper().src;\r\n      this.onCrop.emit(this.cropper.getCropBounds());\r\n      this.updateCropBounds();\r\n    }\r\n  }\r\n\r\n  public onMouseDown(event: MouseEvent): void {\r\n    this.dragUnsubscribers.push(this.renderer.listen(this.document, 'mousemove', this.onMouseMove.bind(this)));\r\n    this.dragUnsubscribers.push(this.renderer.listen(this.document, 'mouseup', this.onMouseUp.bind(this)));\r\n\r\n    this.cropper.onMouseDown(event);\r\n    // if (!this.cropper.isImageSet() && !this.settings.noFileInput) {\r\n    //   // load img\r\n    //   this.fileInput.nativeElement.click();\r\n    // }\r\n  }\r\n\r\n  private removeDragListeners() {\r\n    this.dragUnsubscribers.forEach(unsubscribe => unsubscribe());\r\n  }\r\n\r\n  public onMouseUp(event: MouseEvent): void {\r\n    this.removeDragListeners();\r\n    if (this.cropper.isImageSet()) {\r\n      this.cropper.onMouseUp(event);\r\n      this.image.image = this.cropper.getCroppedImageHelper().src;\r\n      this.onCrop.emit(this.cropper.getCropBounds());\r\n      this.updateCropBounds();\r\n    }\r\n  }\r\n\r\n  public onMouseMove(event: MouseEvent): void {\r\n    this.cropper.onMouseMove(event);\r\n  }\r\n\r\n  public fileChangeListener($event: any) {\r\n    if ($event.target.files.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const file: File = $event.target.files[0];\r\n    if (this.settings.allowedFilesRegex.test(file.name)) {\r\n      const image: any = new Image();\r\n      const fileReader: FileReader = new FileReader();\r\n\r\n      fileReader.addEventListener('loadend', (loadEvent: any) => {\r\n        image.addEventListener('load', () => {\r\n          this.setImage(image);\r\n        });\r\n        image.src = loadEvent.target.result;\r\n      });\r\n\r\n      fileReader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  private resize() {\r\n    const canvas: HTMLCanvasElement = this.cropcanvas.nativeElement;\r\n    this.settings.canvasWidth = canvas.offsetWidth;\r\n    this.settings.canvasHeight = canvas.offsetHeight;\r\n    this.cropper.resizeCanvas(canvas.offsetWidth, canvas.offsetHeight, true);\r\n  }\r\n\r\n  public reset(): void {\r\n    this.cropper.reset();\r\n    this.renderer.setAttribute(\r\n      this.cropcanvas.nativeElement,\r\n      'class',\r\n      this.settings.cropperClass\r\n    );\r\n    this.image.image = this.cropper.getCroppedImageHelper().src;\r\n  }\r\n\r\n  public setImage(image: HTMLImageElement, newBounds: any = null) {\r\n    this.imageSet.emit(true);\r\n    this.renderer.setAttribute(\r\n      this.cropcanvas.nativeElement,\r\n      'class',\r\n      `${this.settings.cropperClass} ${this.settings.croppingClass}`\r\n    );\r\n    this.raf = window.requestAnimationFrame(() => {\r\n      if (this.raf) {\r\n        window.cancelAnimationFrame(this.raf);\r\n      }\r\n      if (image.naturalHeight > 0 && image.naturalWidth > 0) {\r\n        image.height = image.naturalHeight;\r\n        image.width = image.naturalWidth;\r\n\r\n        window.cancelAnimationFrame(this.raf);\r\n        this.getOrientedImage(image, (img: HTMLImageElement) => {\r\n          if (this.settings.dynamicSizing) {\r\n            const canvas: HTMLCanvasElement = this.cropcanvas.nativeElement;\r\n            this.settings.canvasWidth = canvas.offsetWidth;\r\n            this.settings.canvasHeight = canvas.offsetHeight;\r\n            this.cropper.resizeCanvas(\r\n              canvas.offsetWidth,\r\n              canvas.offsetHeight,\r\n              false\r\n            );\r\n          }\r\n\r\n          this.cropper.setImage(img);\r\n          if (this.cropPosition && this.cropPosition.isInitialized()) {\r\n            this.cropper.updateCropPosition(this.cropPosition.toBounds());\r\n          }\r\n\r\n          this.image.original = img;\r\n          let bounds = this.cropper.getCropBounds();\r\n          this.image.image = this.cropper.getCroppedImageHelper().src;\r\n\r\n          if (!this.image) {\r\n            this.image = image;\r\n          }\r\n\r\n          if (newBounds != null) {\r\n            bounds = newBounds;\r\n            this.cropper.setBounds(bounds);\r\n            this.cropper.updateCropPosition(bounds);\r\n          }\r\n          this.onCrop.emit(bounds);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private isCropPositionChanged(changes: SimpleChanges): boolean {\r\n    if (\r\n      this.cropper &&\r\n      changes.cropPosition &&\r\n      this.isCropPositionUpdateNeeded\r\n    ) {\r\n      return true;\r\n    } else {\r\n      this.isCropPositionUpdateNeeded = true;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private updateCropBounds(): void {\r\n    const cropBound: Bounds = this.cropper.getCropBounds();\r\n    this.cropPositionChange.emit(\r\n      new CropPosition(\r\n        cropBound.left,\r\n        cropBound.top,\r\n        cropBound.width,\r\n        cropBound.height\r\n      )\r\n    );\r\n    this.isCropPositionUpdateNeeded = false;\r\n  }\r\n\r\n  private getOrientedImage(\r\n    image: HTMLImageElement,\r\n    callback: (img: HTMLImageElement) => void\r\n  ) {\r\n    let img: any;\r\n\r\n    this.exif.getData(image, () => {\r\n      const orientation = this.exif.getTag(image, 'Orientation');\r\n\r\n      if ([3, 6, 8].indexOf(orientation) > -1) {\r\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\r\n        const ctx: CanvasRenderingContext2D = canvas.getContext(\r\n          '2d'\r\n        ) as CanvasRenderingContext2D;\r\n        let cw: number = image.width;\r\n        let ch: number = image.height;\r\n        let cx = 0;\r\n        let cy = 0;\r\n        let deg = 0;\r\n\r\n        switch (orientation) {\r\n          case 3:\r\n            cx = -image.width;\r\n            cy = -image.height;\r\n            deg = 180;\r\n            break;\r\n          case 6:\r\n            cw = image.height;\r\n            ch = image.width;\r\n            cy = -image.height;\r\n            deg = 90;\r\n            break;\r\n          case 8:\r\n            cw = image.height;\r\n            ch = image.width;\r\n            cx = -image.width;\r\n            deg = 270;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n\r\n        canvas.width = cw;\r\n        canvas.height = ch;\r\n        ctx.rotate((deg * Math.PI) / 180);\r\n        ctx.drawImage(image, cx, cy);\r\n        img = document.createElement('img');\r\n        img.width = cw;\r\n        img.height = ch;\r\n        img.addEventListener('load', () => {\r\n          callback(img);\r\n        });\r\n        img.src = canvas.toDataURL('image/png');\r\n      } else {\r\n        img = image;\r\n        callback(img);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ImageCropperComponent } from './image-cropper.component';\n\n@NgModule({\n  declarations: [ImageCropperComponent],\n  exports: [ImageCropperComponent],\n  imports: [CommonModule]\n})\nexport class ImageCropperModule {}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ImageCropperService {\n  constructor() {}\n}\n","// looks like this CropService is never used\r\nexport class CropService {\r\n  public canvas: HTMLCanvasElement;\r\n  public ctx: CanvasRenderingContext2D;\r\n\r\n  public init(canvas: HTMLCanvasElement) {\r\n    this.canvas = canvas;\r\n    this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n  }\r\n}\r\n","/*\n * Public API Surface of ngx-img-cropper\n */\n\nexport * from './lib/image-cropper/cropper-draw-settings';\nexport * from './lib/image-cropper/cropper-settings';\nexport * from './lib/image-cropper/exif';\nexport * from './lib/image-cropper/image-cropper.component';\nexport * from './lib/image-cropper/image-cropper.module';\nexport * from './lib/image-cropper/image-cropper.service';\nexport * from './lib/image-cropper/imageCropper';\nexport * from './lib/image-cropper/imageCropperDataShare';\nexport * from './lib/image-cropper/model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {ImageCropperModel as a} from './lib/image-cropper/model/imageCropperModel';"]}