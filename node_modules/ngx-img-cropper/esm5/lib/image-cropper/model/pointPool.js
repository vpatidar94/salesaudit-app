import { Point } from './point';
var PointPool = /** @class */ (function () {
    function PointPool(initialSize) {
        if (initialSize === void 0) { initialSize = 1; }
        var prev = (this.firstAvailable = new Point());
        for (var i = 1; i < initialSize; i++) {
            var p = new Point();
            prev.next = p;
            prev = p;
        }
    }
    Object.defineProperty(PointPool.prototype, "instance", {
        get: function () {
            return this;
        },
        enumerable: true,
        configurable: true
    });
    PointPool.prototype.borrow = function (x, y) {
        if (this.firstAvailable == null) {
            throw new Error('Pool exhausted');
        }
        this.borrowed++;
        var p = this.firstAvailable;
        this.firstAvailable = p.next;
        p.x = x;
        p.y = y;
        return p;
    };
    PointPool.prototype.returnPoint = function (p) {
        this.borrowed--;
        p.x = 0;
        p.y = 0;
        p.next = this.firstAvailable;
        this.firstAvailable = p;
    };
    return PointPool;
}());
export { PointPool };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9pbnRQb29sLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LWltZy1jcm9wcGVyLyIsInNvdXJjZXMiOlsibGliL2ltYWdlLWNyb3BwZXIvbW9kZWwvcG9pbnRQb29sLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFFaEM7SUFJRSxtQkFBWSxXQUF1QjtRQUF2Qiw0QkFBQSxFQUFBLGVBQXVCO1FBQ2pDLElBQUksSUFBSSxHQUFVLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUM7UUFFdEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNwQyxJQUFNLENBQUMsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1lBQ2QsSUFBSSxHQUFHLENBQUMsQ0FBQztTQUNWO0lBQ0gsQ0FBQztJQUVELHNCQUFJLCtCQUFRO2FBQVo7WUFDRSxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7OztPQUFBO0lBRU0sMEJBQU0sR0FBYixVQUFjLENBQVMsRUFBRSxDQUFTO1FBQ2hDLElBQUksSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLEVBQUU7WUFDL0IsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQ25DO1FBQ0QsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hCLElBQU0sQ0FBQyxHQUFVLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDckMsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQzdCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1IsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDUixPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFTSwrQkFBVyxHQUFsQixVQUFtQixDQUFRO1FBQ3pCLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNoQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNSLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1IsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQzdCLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFDSCxnQkFBQztBQUFELENBQUMsQUFyQ0QsSUFxQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb2ludCB9IGZyb20gJy4vcG9pbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvaW50UG9vbCB7XHJcbiAgcHJpdmF0ZSBib3Jyb3dlZDogbnVtYmVyO1xyXG4gIHByaXZhdGUgZmlyc3RBdmFpbGFibGU6IFBvaW50O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihpbml0aWFsU2l6ZTogbnVtYmVyID0gMSkge1xyXG4gICAgbGV0IHByZXY6IFBvaW50ID0gKHRoaXMuZmlyc3RBdmFpbGFibGUgPSBuZXcgUG9pbnQoKSk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBpbml0aWFsU2l6ZTsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHAgPSBuZXcgUG9pbnQoKTtcclxuICAgICAgcHJldi5uZXh0ID0gcDtcclxuICAgICAgcHJldiA9IHA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgaW5zdGFuY2UoKTogUG9pbnRQb29sIHtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGJvcnJvdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IFBvaW50IHtcclxuICAgIGlmICh0aGlzLmZpcnN0QXZhaWxhYmxlID09IG51bGwpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb29sIGV4aGF1c3RlZCcpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ib3Jyb3dlZCsrO1xyXG4gICAgY29uc3QgcDogUG9pbnQgPSB0aGlzLmZpcnN0QXZhaWxhYmxlO1xyXG4gICAgdGhpcy5maXJzdEF2YWlsYWJsZSA9IHAubmV4dDtcclxuICAgIHAueCA9IHg7XHJcbiAgICBwLnkgPSB5O1xyXG4gICAgcmV0dXJuIHA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmV0dXJuUG9pbnQocDogUG9pbnQpIHtcclxuICAgIHRoaXMuYm9ycm93ZWQtLTtcclxuICAgIHAueCA9IDA7XHJcbiAgICBwLnkgPSAwO1xyXG4gICAgcC5uZXh0ID0gdGhpcy5maXJzdEF2YWlsYWJsZTtcclxuICAgIHRoaXMuZmlyc3RBdmFpbGFibGUgPSBwO1xyXG4gIH1cclxufVxyXG4iXX0=